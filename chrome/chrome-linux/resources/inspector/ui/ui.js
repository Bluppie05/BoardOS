import{ObjectWrapper as e,UIString as t,Settings as i,EventTarget as s,Throttler as n}from"../common/common.js";import{Runtime as o}from"../root/root.js";import{Platform as r,InspectorFrontendHost as a,userMetrics as l,UserMetrics as h,InspectorFrontendHostAPI as d}from"../host/host.js";import{NumberUtilities as c,StringUtilities as u,Multimap as m}from"../platform/platform.js";import{DOMExtension as _}from"../dom_extension/dom_extension.js";import{ThemeSupport as p}from"../theme_support/theme_support.js";import{TextRange as g,TextUtils as b}from"../text_utils/text_utils.js";class f{flavorChanged(e){}}var v=Object.freeze({__proto__:null,ContextFlavorListener:f});let w;class E{constructor(){this._flavors=new Map,this._eventDispatchers=new Map}static instance(e={forceNew:null}){const{forceNew:t}=e;return w&&!t||(w=new E),w}setFlavor(e,t){(this._flavors.get(e)||null)!==t&&(t?this._flavors.set(e,t):this._flavors.delete(e),this._dispatchFlavorChange(e,t))}_dispatchFlavorChange(e,t){for(const i of o.Runtime.instance().extensions(f))i.hasContextType(e)&&i.instance().then(e=>e.flavorChanged(t));const i=this._eventDispatchers.get(e);i&&i.dispatchEventToListeners(S.FlavorChanged,t)}addFlavorChangeListener(t,i,s){let n=this._eventDispatchers.get(t);n||(n=new e.ObjectWrapper,this._eventDispatchers.set(t,n)),n.addEventListener(S.FlavorChanged,i,s)}removeFlavorChangeListener(e,t,i){const s=this._eventDispatchers.get(e);s&&(s.removeEventListener(S.FlavorChanged,t,i),s.hasEventListeners(S.FlavorChanged)||this._eventDispatchers.delete(e))}flavor(e){return this._flavors.get(e)||null}flavors(){return new Set(this._flavors.keys())}applicableExtensions(e){const t=new Set,i=this.flavors();for(const s of e)o.Runtime.instance().isExtensionApplicableToContextTypes(s,i)&&t.add(s);return t}}const S={FlavorChanged:Symbol("FlavorChanged")};var y=Object.freeze({__proto__:null,Context:E});o.RuntimeExtensionDescriptor;class x extends e.ObjectWrapper{constructor(e){super(),this._extension=e,this._enabled=!0,this._toggled=!1}id(){return this._actionDescriptor().actionId||""}extension(){return this._extension}async execute(){if(!this._extension.canInstantiate())return!1;const e=await this._extension.instance(),t=this.id();return e.handleAction(E.instance(),t)}icon(){return this._actionDescriptor().iconClass||""}toggledIcon(){return this._actionDescriptor().toggledIconClass||""}toggleWithRedColor(){return!!this._actionDescriptor().toggleWithRedColor}setEnabled(e){this._enabled!==e&&(this._enabled=e,this.dispatchEventToListeners(C.Enabled,e))}enabled(){return this._enabled}category(){return ls`${this._actionDescriptor().category||""}`}tags(){return this._actionDescriptor().tags||""}toggleable(){return!!this._actionDescriptor().toggleable}title(){let e=this._extension.title()||"";const t=this._actionDescriptor().options;if(t)for(const i of t)i.value!==this._toggled&&(e=ls`${i.title}`);return e}toggled(){return this._toggled}setToggled(e){console.assert(this.toggleable(),"Shouldn't be toggling an untoggleable action",this.id()),this._toggled!==e&&(this._toggled=e,this.dispatchEventToListeners(C.Toggled,e))}_actionDescriptor(){return this._extension.descriptor()}}const C={Enabled:Symbol("Enabled"),Toggled:Symbol("Toggled")};var T=Object.freeze({__proto__:null,Action:x,Events:C});var I=Object.freeze({__proto__:null,ActionDelegate:class{handleAction(e,t){throw new Error("not implemented")}}});let k;class L{constructor(){this._actionsById=new Map,this._registerActions()}static instance(e={forceNew:null}){const{forceNew:t}=e;return k&&!t||(k=new L),k}_registerActions(){o.Runtime.instance().extensions("action").forEach((function(e){const t=e.descriptor().actionId;if(!t)return void console.error("No actionId provided for extension "+e.descriptor().name);console.assert(!this._actionsById.get(t));const i=new x(e);!i.category()||i.title()?this._actionsById.set(t,i):console.error("Category actions require a title for command menu: "+t);e.canInstantiate()||i.setEnabled(!1)}),this)}availableActions(){return this.applicableActions([...this._actionsById.keys()],E.instance())}actions(){return[...this._actionsById.values()]}applicableActions(e,t){const i=[];for(const t of e){const e=this._actionsById.get(t);e&&e.enabled()&&i.push(e.extension())}return[...t.applicableExtensions(i)].map(function(e){const t=e.descriptor().actionId;return this.action(t)}.bind(this))}action(e){return this._actionsById.get(e)||null}}var M=Object.freeze({__proto__:null,ActionRegistry:L});let P=0;function D(e){return(e||"")+ ++P}function A(e,t){const i=D("labelledControl");t.id=i,e.setAttribute("for",i)}function R(e){e.setAttribute("role","alert"),e.setAttribute("aria-live","polite")}function O(e){e.setAttribute("role","button")}function F(e){e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true")}function B(e){e.setAttribute("role","group")}function z(e){e.setAttribute("role","link")}function W(e){O(e),e.setAttribute("aria-haspopup","true")}function N(e){e.setAttribute("role","tab")}function H(e){e.setAttribute("role","tabpanel")}function V(e){e.setAttribute("role","tree")}function U(e){e.setAttribute("role","treeitem")}function K(e){e.setAttribute("role","textbox")}function j(e){e.setAttribute("role","menu")}function q(e){e.setAttribute("role","menuitem")}function G(e){q(e),e.setAttribute("aria-haspopup","true")}function X(e){e.setAttribute("role","listbox")}function $(e){e.setAttribute("aria-multiselectable","true")}function Y(e){e.setAttribute("role","option")}function Q(e){e.setAttribute("aria-hidden","true")}function Z(e,t){e.setAttribute("role","heading"),e.setAttribute("aria-level",t.toString())}function J(e){return e.hasAttribute("role")}function ee(e,t){t?e.setAttribute("aria-placeholder",t):e.removeAttribute("aria-placeholder")}function te(e){e.id||(e.id=D("ariaElement"))}function ie(e,t){t?(te(t),e.setAttribute("aria-controls",t.id)):e.removeAttribute("aria-controls")}function se(e,t){e.setAttribute("aria-expanded",(!!t).toString())}function ne(e){e.removeAttribute("aria-expanded")}const oe={inline:"inline",list:"list",both:"both",none:"none"};function re(e,t){e.setAttribute("aria-selected",(!!t).toString())}function ae(e){e.removeAttribute("aria-selected")}function le(e,t){t?e.setAttribute("aria-invalid",t.toString()):e.removeAttribute("aria-invalid")}function he(e,t){e.setAttribute("aria-pressed",(!!t).toString())}function de(e,t){e.setAttribute("aria-label",t)}const ce=new WeakMap;function ue(e,t){const i=ce.get(e);if(i&&i.remove(),e.removeAttribute("data-aria-utils-animation-hack"),!t)return ce.delete(e),void e.removeAttribute("aria-describedby");const s=document.createElement("span");s.textContent=t,s.style.display="none",te(s),e.setAttribute("aria-describedby",s.id),ce.set(e,s);if(!new Set(["INPUT","IMG"]).has(e.tagName))return void e.appendChild(s);e.insertAdjacentElement("afterend",s)||(e.setAttribute("data-aria-utils-animation-hack","sorry"),e.addEventListener("animationend",()=>{ce.get(e)===s&&(e.removeAttribute("data-aria-utils-animation-hack"),e.insertAdjacentElement("afterend",s))},{once:!0}))}function me(e,t){t?(t.isConnected&&e.isConnected?console.assert(e.hasSameShadowRoot(t),"elements are not in the same shadow dom"):console.warn("One or more elements in an active-descendant relationship are not yet attached to the DOM tree."),te(t),e.setAttribute("aria-activedescendant",t.id)):e.removeAttribute("aria-activedescendant")}function _e(e,t){e.setAttribute("aria-setsize",t.toString())}function pe(e,t){e.setAttribute("aria-posinset",t.toString())}const ge=new WeakMap;function be(e,t){const i=t.ownerDocument;let s=ge.get(i);s||(s=i.body.createChild("div"),function(e){e.style.position="absolute",e.style.left="-999em",e.style.width="100em",e.style.overflow="hidden"}(s),s.setAttribute("role","alert"),s.setAttribute("aria-atomic","true"),ge.set(i,s)),de(s,e.trimEndWithMaxLength(1e4))}var fe=Object.freeze({__proto__:null,nextId:D,bindLabelToControl:A,markAsAlert:R,markAsApplication:function(e){e.setAttribute("role","application")},markAsButton:O,markAsCheckbox:function(e){e.setAttribute("role","checkbox")},markAsCombobox:function(e){e.setAttribute("role","combobox")},markAsModalDialog:F,markAsGroup:B,markAsLink:z,markAsMenuButton:W,markAsProgressBar:function(e,t=0,i=100){e.setAttribute("role","progressbar"),e.setAttribute("aria-valuemin",t.toString()),e.setAttribute("aria-valuemax",i.toString())},markAsTab:N,markAsTablist:function(e){e.setAttribute("role","tablist")},markAsTabpanel:H,markAsTree:V,markAsTreeitem:U,markAsTextBox:K,markAsMenu:j,markAsMenuItem:q,markAsMenuItemSubMenu:G,markAsList:function(e){e.setAttribute("role","list")},markAsListitem:function(e){e.setAttribute("role","listitem")},markAsListBox:X,markAsMultiSelectable:$,markAsOption:Y,markAsRadioGroup:function(e){e.setAttribute("role","radiogroup")},markAsHidden:Q,markAsSlider:function(e,t=0,i=100){e.setAttribute("role","slider"),e.setAttribute("aria-valuemin",String(t)),e.setAttribute("aria-valuemax",String(i))},markAsHeading:Z,markAsPoliteLiveRegion:function(e,t){e.setAttribute("aria-live","polite"),t&&e.setAttribute("aria-atomic","true")},hasRole:J,removeRole:function(e){e.removeAttribute("role")},setPlaceholder:ee,markAsPresentation:function(e){e.setAttribute("role","presentation")},markAsStatus:function(e){e.setAttribute("role","status")},ensureId:te,setAriaValueText:function(e,t){e.setAttribute("aria-valuetext",t)},setAriaValueNow:function(e,t){e.setAttribute("aria-valuenow",t)},setAriaValueMinMax:function(e,t,i){e.setAttribute("aria-valuemin",t),e.setAttribute("aria-valuemax",i)},setControls:ie,setChecked:function(e,t){e.setAttribute("aria-checked",(!!t).toString())},setCheckboxAsIndeterminate:function(e){e.setAttribute("aria-checked","mixed")},setDisabled:function(e,t){e.setAttribute("aria-disabled",(!!t).toString())},setExpanded:se,unsetExpandable:ne,setHidden:function(e,t){e.setAttribute("aria-hidden",(!!t).toString())},setLevel:function(e,t){e.setAttribute("aria-level",t.toString())},AutocompleteInteractionModel:oe,setAutocomplete:function(e,t=oe.none){e.setAttribute("aria-autocomplete",t)},setSelected:re,clearSelected:ae,setInvalid:le,setPressed:he,setValueNow:function(e,t){e.setAttribute("aria-valuenow",t.toString())},setValueText:function(e,t){e.setAttribute("aria-valuetext",t.toString())},setProgressBarValue:function(e,t,i){e.setAttribute("aria-valuenow",t.toString()),i&&e.setAttribute("aria-valuetext",i)},setAccessibleName:de,setDescription:ue,setActiveDescendant:me,setSetSize:_e,setPositionInSet:pe,alert:be});function ve(e,t,i){return self.customElements.define(t,class extends i{constructor(){super(),this.setAttribute("is",t)}},{extends:e}),()=>createElement(e,t)}let we=null;class Ee extends HTMLSpanElement{constructor(){super(),this._descriptor=null,this._spriteSheet=null,this._iconType=""}static create(e,t){we||(we=ve("span","ui-icon",Ee));const i=we();return t&&(i.className=t),e&&i.setIconType(e),i}setIconType(e){this._descriptor&&(this.style.removeProperty("--spritesheet-position"),this.style.removeProperty("width"),this.style.removeProperty("height"),this._toggleClasses(!1),this._iconType="",this._descriptor=null,this._spriteSheet=null);const t=xe.get(e)||null;if(t){if(this._iconType=e,this._descriptor=t,this._spriteSheet=ye.get(this._descriptor.spritesheet)||null,!this._spriteSheet)throw new Error(`ERROR: icon ${this._iconType} has unknown spritesheet: ${this._descriptor.spritesheet}`);this.style.setProperty("--spritesheet-position",this._propertyValue()),this.style.setProperty("width",this._spriteSheet.cellWidth+"px"),this.style.setProperty("height",this._spriteSheet.cellHeight+"px"),this._toggleClasses(!0)}else if(e)throw new Error("ERROR: failed to find icon descriptor for type: "+e)}_toggleClasses(e){this._descriptor&&(this.classList.toggle("spritesheet-"+this._descriptor.spritesheet,e),this.classList.toggle(this._iconType,e),this.classList.toggle("icon-mask",e&&!!this._descriptor.isMask),this.classList.toggle("icon-invert",e&&!!this._descriptor.invert))}_propertyValue(){if(!this._descriptor||!this._spriteSheet)throw new Error("Descriptor and spriteSheet expected to be present");if(!this._descriptor.coordinates){if(!this._descriptor.position||!Se.test(this._descriptor.position))throw new Error(`ERROR: icon '${this._iconType}' has malformed position: '${this._descriptor.position}'`);const e=this._descriptor.position[0].toLowerCase().charCodeAt(0)-97,t=parseInt(this._descriptor.position.substring(1),10)-1;this._descriptor.coordinates={x:-(this._spriteSheet.cellWidth+this._spriteSheet.padding)*e,y:(this._spriteSheet.cellHeight+this._spriteSheet.padding)*(t+1)-this._spriteSheet.padding}}return`${this._descriptor.coordinates.x}px ${this._descriptor.coordinates.y}px`}}const Se=/^[a-z][1-9][0-9]*$/,ye=new Map([["smallicons",{cellWidth:10,cellHeight:10,padding:10}],["mediumicons",{cellWidth:16,cellHeight:16,padding:0}],["largeicons",{cellWidth:28,cellHeight:24,padding:0}],["arrowicons",{cellWidth:19,cellHeight:19,padding:0}]]),xe=new Map([["smallicon-bezier",{position:"a5",spritesheet:"smallicons",isMask:!0}],["smallicon-checkmark",{position:"b5",spritesheet:"smallicons"}],["smallicon-checkmark-square",{position:"b6",spritesheet:"smallicons",isMask:!0}],["smallicon-checkmark-behind",{position:"d6",spritesheet:"smallicons",isMask:!0}],["smallicon-command-result",{position:"a4",spritesheet:"smallicons"}],["smallicon-contrast-ratio",{position:"a6",spritesheet:"smallicons",isMask:!0}],["smallicon-cross",{position:"b4",spritesheet:"smallicons"}],["smallicon-device",{position:"c5",spritesheet:"smallicons"}],["smallicon-error",{position:"c4",spritesheet:"smallicons"}],["smallicon-expand-less",{position:"f5",spritesheet:"smallicons",isMask:!0}],["smallicon-expand-more",{position:"e6",spritesheet:"smallicons",isMask:!0}],["smallicon-green-arrow",{position:"a3",spritesheet:"smallicons"}],["smallicon-green-ball",{position:"b3",spritesheet:"smallicons"}],["smallicon-info",{position:"c3",spritesheet:"smallicons"}],["smallicon-inline-breakpoint-conditional",{position:"d4",spritesheet:"smallicons"}],["smallicon-inline-breakpoint",{position:"d5",spritesheet:"smallicons"}],["smallicon-no",{position:"c6",spritesheet:"smallicons",isMask:!0}],["smallicon-orange-ball",{position:"d3",spritesheet:"smallicons"}],["smallicon-red-ball",{position:"a2",spritesheet:"smallicons"}],["smallicon-shadow",{position:"b2",spritesheet:"smallicons",isMask:!0}],["smallicon-step-in",{position:"c2",spritesheet:"smallicons"}],["smallicon-step-out",{position:"d2",spritesheet:"smallicons"}],["smallicon-text-prompt",{position:"e5",spritesheet:"smallicons"}],["smallicon-thick-left-arrow",{position:"e4",spritesheet:"smallicons"}],["smallicon-thick-right-arrow",{position:"e3",spritesheet:"smallicons"}],["smallicon-triangle-down",{position:"e2",spritesheet:"smallicons",isMask:!0}],["smallicon-triangle-right",{position:"a1",spritesheet:"smallicons",isMask:!0}],["smallicon-triangle-up",{position:"b1",spritesheet:"smallicons",isMask:!0}],["smallicon-user-command",{position:"c1",spritesheet:"smallicons"}],["smallicon-warning",{position:"d1",spritesheet:"smallicons"}],["smallicon-network-product",{position:"e1",spritesheet:"smallicons"}],["smallicon-clear-warning",{position:"f1",spritesheet:"smallicons",isMask:!0}],["smallicon-clear-info",{position:"f2",spritesheet:"smallicons"}],["smallicon-clear-error",{position:"f3",spritesheet:"smallicons"}],["smallicon-account-circle",{position:"f4",spritesheet:"smallicons"}],["smallicon-videoplayer-paused",{position:"f6",spritesheet:"smallicons",isMask:!0}],["smallicon-videoplayer-playing",{position:"g6",spritesheet:"smallicons",isMask:!0}],["smallicon-videoplayer-destroyed",{position:"g5",spritesheet:"smallicons",isMask:!0}],["smallicon-issue-yellow-text",{position:"g1",spritesheet:"smallicons"}],["smallicon-issue-blue-text",{position:"g2",spritesheet:"smallicons"}],["mediumicon-clear-storage",{position:"a4",spritesheet:"mediumicons",isMask:!0}],["mediumicon-cookie",{position:"b4",spritesheet:"mediumicons",isMask:!0}],["mediumicon-database",{position:"c4",spritesheet:"mediumicons",isMask:!0}],["mediumicon-info",{position:"c1",spritesheet:"mediumicons",isMask:!0}],["mediumicon-manifest",{position:"d4",spritesheet:"mediumicons",isMask:!0}],["mediumicon-service-worker",{position:"a3",spritesheet:"mediumicons",isMask:!0}],["mediumicon-table",{position:"b3",spritesheet:"mediumicons",isMask:!0}],["mediumicon-arrow-in-circle",{position:"c3",spritesheet:"mediumicons",isMask:!0}],["mediumicon-file-sync",{position:"d3",spritesheet:"mediumicons",invert:!0}],["mediumicon-file",{position:"a2",spritesheet:"mediumicons",invert:!0}],["mediumicon-gray-cross-active",{position:"b2",spritesheet:"mediumicons"}],["mediumicon-gray-cross-hover",{position:"c2",spritesheet:"mediumicons"}],["mediumicon-red-cross-active",{position:"d2",spritesheet:"mediumicons"}],["mediumicon-red-cross-hover",{position:"a1",spritesheet:"mediumicons"}],["mediumicon-search",{position:"b1",spritesheet:"mediumicons"}],["mediumicon-replace",{position:"c5",spritesheet:"mediumicons",isMask:!0}],["mediumicon-account-circle",{position:"e4",spritesheet:"mediumicons",isMask:!0}],["mediumicon-warning-triangle",{position:"e1",spritesheet:"mediumicons"}],["mediumicon-error-circle",{position:"e3",spritesheet:"mediumicons"}],["mediumicon-info-circle",{position:"e2",spritesheet:"mediumicons"}],["mediumicon-bug",{position:"d1",spritesheet:"mediumicons",isMask:!0}],["mediumicon-list",{position:"e5",spritesheet:"mediumicons",isMask:!0}],["mediumicon-warning",{position:"d5",spritesheet:"mediumicons",isMask:!0}],["mediumicon-sync",{position:"a5",spritesheet:"mediumicons",isMask:!0}],["mediumicon-fetch",{position:"b5",spritesheet:"mediumicons",isMask:!0}],["mediumicon-cloud",{position:"a6",spritesheet:"mediumicons",isMask:!0}],["mediumicon-bell",{position:"b6",spritesheet:"mediumicons",isMask:!0}],["mediumicon-payment",{position:"c6",spritesheet:"mediumicons",isMask:!0}],["mediumicon-schedule",{position:"d6",spritesheet:"mediumicons",isMask:!0}],["mediumicon-frame",{position:"e6",spritesheet:"mediumicons",isMask:!0}],["mediumicon-frame-embedded",{position:"f6",spritesheet:"mediumicons",isMask:!0}],["mediumicon-frame-opened",{position:"f5",spritesheet:"mediumicons",isMask:!0}],["mediumicon-frame-embedded-blocked",{position:"f4",spritesheet:"mediumicons",isMask:!0}],["mediumicon-frame-blocked",{position:"g4",spritesheet:"mediumicons",isMask:!0}],["mediumicon-elements-panel",{position:"f3",spritesheet:"mediumicons",isMask:!0}],["mediumicon-network-panel",{position:"f2",spritesheet:"mediumicons",isMask:!0}],["mediumicon-sources-panel",{position:"g1",spritesheet:"mediumicons",isMask:!0}],["mediumicon-frame-top",{position:"f1",spritesheet:"mediumicons",isMask:!0}],["mediumicon-checkmark",{position:"g2",spritesheet:"mediumicons",isMask:!0}],["mediumicon-not-available",{position:"g3",spritesheet:"mediumicons",isMask:!0}],["mediumicon-warning-circle",{position:"g5",spritesheet:"mediumicons",isMask:!0}],["mediumicon-feedback",{position:"g6",spritesheet:"mediumicons",isMask:!0}],["badge-navigator-file-sync",{position:"a9",spritesheet:"largeicons"}],["largeicon-add",{position:"a8",spritesheet:"largeicons",isMask:!0}],["largeicon-camera",{position:"b7",spritesheet:"largeicons",isMask:!0}],["largeicon-center",{position:"c9",spritesheet:"largeicons",isMask:!0}],["largeicon-checkmark",{position:"c8",spritesheet:"largeicons",isMask:!0}],["largeicon-chevron",{position:"c7",spritesheet:"largeicons",isMask:!0}],["largeicon-clear",{position:"a6",spritesheet:"largeicons",isMask:!0}],["largeicon-copy",{position:"b6",spritesheet:"largeicons",isMask:!0}],["largeicon-deactivate-breakpoints",{position:"c6",spritesheet:"largeicons",isMask:!0}],["largeicon-delete",{position:"d9",spritesheet:"largeicons",isMask:!0}],["largeicon-dock-to-bottom",{position:"d8",spritesheet:"largeicons",isMask:!0}],["largeicon-dock-to-left",{position:"d7",spritesheet:"largeicons",isMask:!0}],["largeicon-dock-to-right",{position:"d6",spritesheet:"largeicons",isMask:!0}],["largeicon-download",{position:"h6",spritesheet:"largeicons",isMask:!0}],["largeicon-edit",{position:"a5",spritesheet:"largeicons",isMask:!0}],["largeicon-eyedropper",{position:"b5",spritesheet:"largeicons",isMask:!0}],["largeicon-filter",{position:"c5",spritesheet:"largeicons",isMask:!0}],["largeicon-hide-bottom-sidebar",{position:"e9",spritesheet:"largeicons",isMask:!0}],["largeicon-hide-left-sidebar",{position:"e8",spritesheet:"largeicons",isMask:!0}],["largeicon-hide-right-sidebar",{position:"e7",spritesheet:"largeicons",isMask:!0}],["largeicon-hide-top-sidebar",{position:"e6",spritesheet:"largeicons",isMask:!0}],["largeicon-large-list",{position:"e5",spritesheet:"largeicons",isMask:!0}],["largeicon-layout-editor",{position:"a4",spritesheet:"largeicons",isMask:!0}],["largeicon-load",{position:"h5",spritesheet:"largeicons",isMask:!0}],["largeicon-longclick-triangle",{position:"b4",spritesheet:"largeicons",isMask:!0}],["largeicon-menu",{position:"c4",spritesheet:"largeicons",isMask:!0}],["largeicon-navigator-domain",{position:"d4",spritesheet:"largeicons",isMask:!0}],["largeicon-navigator-file",{position:"e4",spritesheet:"largeicons",isMask:!0}],["largeicon-navigator-file-sync",{position:"f9",spritesheet:"largeicons",isMask:!0}],["largeicon-navigator-folder",{position:"f8",spritesheet:"largeicons",isMask:!0}],["largeicon-navigator-frame",{position:"f7",spritesheet:"largeicons",isMask:!0}],["largeicon-navigator-snippet",{position:"f6",spritesheet:"largeicons",isMask:!0}],["largeicon-navigator-worker",{position:"f5",spritesheet:"largeicons",isMask:!0}],["largeicon-node-search",{position:"f4",spritesheet:"largeicons",isMask:!0}],["largeicon-pan",{position:"a3",spritesheet:"largeicons",isMask:!0}],["largeicon-pause-animation",{position:"b3",spritesheet:"largeicons",isMask:!0}],["largeicon-pause",{position:"c3",spritesheet:"largeicons",isMask:!0}],["largeicon-pause-on-exceptions",{position:"d3",spritesheet:"largeicons",isMask:!0}],["largeicon-phone",{position:"e3",spritesheet:"largeicons",isMask:!0}],["largeicon-play-animation",{position:"f3",spritesheet:"largeicons",isMask:!0}],["largeicon-play-back",{position:"a2",spritesheet:"largeicons",isMask:!0}],["largeicon-play",{position:"b2",spritesheet:"largeicons",isMask:!0}],["largeicon-pretty-print",{position:"c2",spritesheet:"largeicons",isMask:!0}],["largeicon-refresh",{position:"d2",spritesheet:"largeicons",isMask:!0}],["largeicon-replay-animation",{position:"e2",spritesheet:"largeicons",isMask:!0}],["largeicon-resume",{position:"f2",spritesheet:"largeicons",isMask:!0}],["largeicon-rotate",{position:"g9",spritesheet:"largeicons",isMask:!0}],["largeicon-rotate-screen",{position:"g8",spritesheet:"largeicons",isMask:!0}],["largeicon-search",{position:"h4",spritesheet:"largeicons",isMask:!0}],["largeicon-settings-gear",{position:"g7",spritesheet:"largeicons",isMask:!0}],["largeicon-shortcut-changed",{position:"i4",spritesheet:"largeicons",isMask:!0}],["largeicon-show-bottom-sidebar",{position:"g6",spritesheet:"largeicons",isMask:!0}],["largeicon-show-left-sidebar",{position:"g5",spritesheet:"largeicons",isMask:!0}],["largeicon-show-right-sidebar",{position:"g4",spritesheet:"largeicons",isMask:!0}],["largeicon-show-top-sidebar",{position:"g3",spritesheet:"largeicons",isMask:!0}],["largeicon-start-recording",{position:"g2",spritesheet:"largeicons",isMask:!0}],["largeicon-step-into",{position:"a1",spritesheet:"largeicons",isMask:!0}],["largeicon-step-out",{position:"b1",spritesheet:"largeicons",isMask:!0}],["largeicon-step-over",{position:"c1",spritesheet:"largeicons",isMask:!0}],["largeicon-step",{position:"h1",spritesheet:"largeicons",isMask:!0}],["largeicon-stop-recording",{position:"d1",spritesheet:"largeicons",isMask:!0}],["largeicon-terminate-execution",{position:"h2",spritesheet:"largeicons",isMask:!0}],["largeicon-trash-bin",{position:"f1",spritesheet:"largeicons",isMask:!0}],["largeicon-undo",{position:"h7",spritesheet:"largeicons",isMask:!0}],["largeicon-undock",{position:"g1",spritesheet:"largeicons",isMask:!0}],["largeicon-visibility",{position:"h9",spritesheet:"largeicons",isMask:!0}],["largeicon-waterfall",{position:"h8",spritesheet:"largeicons",isMask:!0}],["largeicon-breaking-change",{position:"h3",spritesheet:"largeicons"}],["largeicon-link",{position:"i1",spritesheet:"largeicons",isMask:!0}],["largeicon-dual-screen",{position:"i2",spritesheet:"largeicons",isMask:!0}],["largeicon-experimental-api",{position:"i3",spritesheet:"largeicons",isMask:!0}],["mediumicon-arrow-top",{position:"a4",spritesheet:"arrowicons"}],["mediumicon-arrow-bottom",{position:"a3",spritesheet:"arrowicons"}],["mediumicon-arrow-left",{position:"a2",spritesheet:"arrowicons"}],["mediumicon-arrow-right",{position:"a1",spritesheet:"arrowicons"}]]);var Ce=Object.freeze({__proto__:null,Icon:Ee,Descriptor:void 0,SpriteSheet:void 0});let Te;function Ie(e){if("number"==typeof Te)return Te;if(!e)return 16;const t=e.createElement("div"),i=e.createElement("div");return t.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),i.setAttribute("style","height: 200px"),t.appendChild(i),e.body.appendChild(t),Te=t.offsetWidth-t.clientWidth,e.body.removeChild(t),Te}class ke{constructor(e,t,i){this.x=e,this.y=t,this.z=i}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){const e=this.length();e<=1e-5||(this.x/=e,this.y/=e,this.z/=e)}}class Le{constructor(e,t){this.x=e,this.y=t}distanceTo(e){return Math.sqrt(Math.pow(e.x-this.x,2)+Math.pow(e.y-this.y,2))}projectOn(e){return 0===e.x&&0===e.y?new Le(0,0):e.scale((this.x*e.x+this.y*e.y)/(Math.pow(e.x,2)+Math.pow(e.y,2)))}scale(e){return new Le(this.x*e,this.y*e)}toString(){return Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100}}class Me{constructor(e,t){this.controlPoints=[e,t]}static parse(e){const t=Me.KeywordValues,i=e.toLowerCase().replace(/\s+/g,"");if(t.has(i))return Me.parse(t.get(i));const s=i.match(/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/);if(s){const e=new Le(parseFloat(s[1]),parseFloat(s[2])),t=new Le(parseFloat(s[3]),parseFloat(s[4]));return new Me(e,t)}return null}evaluateAt(e){function t(e,t,i){return 3*(1-i)*(1-i)*i*e+3*(1-i)*i*i*t+Math.pow(i,3)}const i=t(this.controlPoints[0].x,this.controlPoints[1].x,e),s=t(this.controlPoints[0].y,this.controlPoints[1].y,e);return new Le(i,s)}asCSSText(){const e="cubic-bezier("+this.controlPoints.join(", ")+")",t=Me.KeywordValues;for(const[i,s]of t)if(e===s)return i;return e}}Me.Regex=/((cubic-bezier\([^)]+\))|\b(linear|ease-in-out|ease-in|ease-out|ease)\b)/g,Me.KeywordValues=new Map([["linear","cubic-bezier(0, 0, 1, 1)"],["ease","cubic-bezier(0.25, 0.1, 0.25, 1)"],["ease-in","cubic-bezier(0.42, 0, 1, 1)"],["ease-in-out","cubic-bezier(0.42, 0, 0.58, 1)"],["ease-out","cubic-bezier(0, 0, 0.58, 1)"]]);class Pe{constructor(e,t,i){this.alpha=e,this.beta=t,this.gamma=i}static fromRotationMatrix(e){const t=Math.atan2(e.m23,e.m33),i=Math.atan2(-e.m13,Math.sqrt(e.m11*e.m11+e.m12*e.m12)),s=Math.atan2(e.m12,e.m11);return new Pe(Oe(s),Oe(t),Oe(i))}toRotate3DString(){const e={alpha:[0,1,0],beta:[-1,0,0],gamma:[0,-Math.sin(Re(this.beta)),Math.cos(Re(this.beta))]};return"rotate3d("+e.alpha.join(",")+","+this.alpha+"deg) rotate3d("+e.beta.join(",")+","+this.beta+"deg) rotate3d("+e.gamma.join(",")+","+this.gamma+"deg)"}}const De=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},Ae=function(e,t){const i=e.x*t.m14+e.y*t.m24+e.z*t.m34+t.m44,s=(e.x*t.m11+e.y*t.m21+e.z*t.m31+t.m41)/i,n=(e.x*t.m12+e.y*t.m22+e.z*t.m32+t.m42)/i,o=(e.x*t.m13+e.y*t.m23+e.z*t.m33+t.m43)/i;return new ke(s,n,o)},Re=function(e){return e*Math.PI/180},Oe=function(e){return 180*e/Math.PI};class Fe{constructor(e,t){this.width=e,this.height=t}clipTo(e){return e?new Fe(Math.min(this.width,e.width),Math.min(this.height,e.height)):this}scale(e){return new Fe(this.width*e,this.height*e)}isEqual(e){return!!e&&this.width===e.width&&this.height===e.height}widthToMax(e){return new Fe(Math.max(this.width,"number"==typeof e?e:e.width),this.height)}addWidth(e){return new Fe(this.width+("number"==typeof e?e:e.width),this.height)}heightToMax(e){return new Fe(this.width,Math.max(this.height,"number"==typeof e?e:e.height))}addHeight(e){return new Fe(this.width,this.height+("number"==typeof e?e:e.height))}}class Be{constructor(e,t,i,s){this.left=e,this.top=t,this.width=i,this.height=s}isEqual(e){return!!e&&this.left===e.left&&this.top===e.top&&this.width===e.width&&this.height===e.height}scale(e){return new Be(this.left*e,this.top*e,this.width*e,this.height*e)}size(){return new Fe(this.width,this.height)}relativeTo(e){return new Be(this.left-e.left,this.top-e.top,this.width,this.height)}rebaseTo(e){return new Be(this.left+e.left,this.top+e.top,this.width,this.height)}}class ze{constructor(e,t){if(this.minimum=e||new Fe(0,0),this.preferred=t||this.minimum,this.minimum.width>this.preferred.width||this.minimum.height>this.preferred.height)throw new Error("Minimum size is greater than preferred.")}isEqual(e){return!!e&&this.minimum.isEqual(e.minimum)&&this.preferred.isEqual(e.preferred)}widthToMax(e){return"number"==typeof e?new ze(this.minimum.widthToMax(e),this.preferred.widthToMax(e)):new ze(this.minimum.widthToMax(e.minimum),this.preferred.widthToMax(e.preferred))}addWidth(e){return"number"==typeof e?new ze(this.minimum.addWidth(e),this.preferred.addWidth(e)):new ze(this.minimum.addWidth(e.minimum),this.preferred.addWidth(e.preferred))}heightToMax(e){return"number"==typeof e?new ze(this.minimum.heightToMax(e),this.preferred.heightToMax(e)):new ze(this.minimum.heightToMax(e.minimum),this.preferred.heightToMax(e.preferred))}addHeight(e){return"number"==typeof e?new ze(this.minimum.addHeight(e),this.preferred.addHeight(e)):new ze(this.minimum.addHeight(e.minimum),this.preferred.addHeight(e.preferred))}}var We=Object.freeze({__proto__:null,_Eps:1e-5,Vector:ke,Point:Le,CubicBezier:Me,EulerAngles:Pe,scalarProduct:De,crossProduct:function(e,t){const i=e.y*t.z-e.z*t.y,s=e.z*t.x-e.x*t.z,n=e.x*t.y-e.y*t.x;return new ke(i,s,n)},subtract:function(e,t){const i=e.x-t.x,s=e.y-t.y,n=e.z-t.z;return new ke(i,s,n)},multiplyVectorByMatrixAndNormalize:Ae,calculateAngle:function(e,t){const i=e.length(),s=t.length();if(i<=1e-5||s<=1e-5)return 0;const n=De(e,t)/i/s;return Math.abs(n)>1?0:Oe(Math.acos(n))},degreesToRadians:Re,degreesToGradians:function(e){return e/9*10},degreesToTurns:function(e){return e/360},radiansToDegrees:Oe,radiansToGradians:function(e){return 200*e/Math.PI},radiansToTurns:function(e){return e/(2*Math.PI)},gradiansToRadians:function(e){return e*Math.PI/200},turnsToRadians:function(e){return 2*e*Math.PI},boundsForTransformedPoints:function(e,t,i){i||(i={minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}),t.length%3&&console.warn("Invalid size of points array");for(let s=0;s<t.length;s+=3){let n=new ke(t[s],t[s+1],t[s+2]);n=Ae(n,e),i.minX=Math.min(i.minX,n.x),i.maxX=Math.max(i.maxX,n.x),i.minY=Math.min(i.minY,n.y),i.maxY=Math.max(i.maxY,n.y)}return i},Size:Fe,Insets:class{constructor(e,t,i,s){this.left=e,this.top=t,this.right=i,this.bottom=s}isEqual(e){return!!e&&this.left===e.left&&this.top===e.top&&this.right===e.right&&this.bottom===e.bottom}},Rect:Be,Constraints:ze});function Ne(e,t,i={enableLegacyPatching:!1}){const s=o.cachedResources.get(t)||"";s||console.error(t+" not preloaded. Check module.json");let n=createElement("style");if(n.textContent=s,e.appendChild(n),i.enableLegacyPatching){const i=p.instance().themeStyleSheet(t,s);i&&(n=createElement("style"),n.textContent=i+"\n"+o.Runtime.resolveSourceURL(t+".theme"),e.appendChild(n))}}function He(e){const t=e.target&&e.target.ownerDocument,i=t?t.deepActiveElement():null;!function(e){for(;e&&!e.__widget;)e=e.parentNodeOrShadowHost();if(!e)return;let t=e.__widget;for(;t._parentWidget;)t._parentWidget._defaultFocusedChild=t,t=t._parentWidget}(i),function(e){e=e&&e.parentNodeOrShadowHost();const t=customElements.get("x-widget");let i=null;for(;e;)e instanceof t&&(i&&(e._defaultFocusedElement=i),i=e),e=e.parentNodeOrShadowHost()}(i)}function Ve(e){Ne(e,"ui/inspectorCommon.css",{enableLegacyPatching:!0}),Ne(e,"ui/textButton.css",{enableLegacyPatching:!0}),p.instance().injectHighlightStyleSheets(e),p.instance().injectCustomStyleSheets(e)}function Ue(e,t={delegatesFocus:void 0,cssFile:void 0,enableLegacyPatching:!1}){const{cssFile:i,delegatesFocus:s,enableLegacyPatching:n}=t,o=e.attachShadow({mode:"open",delegatesFocus:s});return Ve(o),i&&Ne(o,i,{enableLegacyPatching:n}),o.addEventListener("focus",He.bind(UI),!0),o}class Ke extends HTMLElement{static get observedAttributes(){return["flex","padding","padding-top","padding-bottom","padding-left","padding-right","margin","margin-top","margin-bottom","margin-left","margin-right","overflow","overflow-x","overflow-y","font-size","color","background","background-color","border","border-top","border-bottom","border-left","border-right","max-width","max-height"]}attributeChangedCallback(e,t,i){if("flex"!==e)if(null===i){if(this.style.removeProperty(e),e.startsWith("padding-")||e.startsWith("margin-")||e.startsWith("border-")||e.startsWith("background-")||e.startsWith("overflow-")){const t=e.substring(0,e.indexOf("-")),i=this.getAttribute(t);null!==i&&this.style.setProperty(t,i)}}else this.style.setProperty(e,i);else null===i?this.style.removeProperty("flex"):"initial"===i||"auto"===i||"none"===i||-1!==i.indexOf(" ")?this.style.setProperty("flex",i):this.style.setProperty("flex","0 0 "+i)}}class je extends Ke{constructor(e){super(),this.style.setProperty("display","flex"),this.style.setProperty("flex-direction",e),this.style.setProperty("justify-content","flex-start")}static get observedAttributes(){return super.observedAttributes.concat(["x-start","x-center","x-stretch","x-baseline","justify-content"])}attributeChangedCallback(e,t,i){"x-start"!==e&&"x-center"!==e&&"x-stretch"!==e&&"x-baseline"!==e?super.attributeChangedCallback(e,t,i):null===i?this.style.removeProperty("align-items"):this.style.setProperty("align-items","x-start"===e?"flex-start":e.substr(2))}}self.customElements.define("x-vbox",class extends je{constructor(){super("column")}}),self.customElements.define("x-hbox",class extends je{constructor(){super("row")}}),self.customElements.define("x-cbox",class extends Ke{constructor(){super(),this.style.setProperty("display","flex"),this.style.setProperty("flex-direction","column"),this.style.setProperty("justify-content","center"),this.style.setProperty("align-items","center")}}),self.customElements.define("x-div",class extends Ke{constructor(){super(),this.style.setProperty("display","block")}}),self.customElements.define("x-span",class extends Ke{constructor(){super(),this.style.setProperty("display","inline")}}),self.customElements.define("x-text",class extends Ke{constructor(){super(),this.style.setProperty("display","inline"),this.style.setProperty("white-space","pre")}});var qe=Object.freeze({__proto__:null,XElement:Ke});let Ge=null;const Xe=new WeakMap;class $e extends Ke{constructor(){super(),this.style.setProperty("display","flex"),this.style.setProperty("flex-direction","column"),this.style.setProperty("align-items","stretch"),this.style.setProperty("justify-content","flex-start"),this.style.setProperty("contain","layout style"),this._visible=!1,this._shadowRoot,this._defaultFocusedElement=null,this._elementsToRestoreScrollPositionsFor=[],this._onShownCallback,this._onHiddenCallback,this._onResizedCallback,Ge||(Ge=new ResizeObserver(e=>{for(const t of e){const e=t.target;e._visible&&e._onResizedCallback&&e._onResizedCallback.call(null)}})),Ge.observe&&Ge.observe(this),this.setElementsToRestoreScrollPositionsFor([this])}isShowing(){return this._visible}registerRequiredCSS(e,t){Ne(this._shadowRoot||this,e,t)}setOnShown(e){this._onShownCallback=e}setOnHidden(e){this._onHiddenCallback=e}setOnResized(e){this._onResizedCallback=e}setElementsToRestoreScrollPositionsFor(e){for(const e of this._elementsToRestoreScrollPositionsFor)e.removeEventListener("scroll",$e._storeScrollPosition,{capture:!1});this._elementsToRestoreScrollPositionsFor=e;for(const e of this._elementsToRestoreScrollPositionsFor)e.addEventListener("scroll",$e._storeScrollPosition,{passive:!0,capture:!1})}restoreScrollPositions(){for(const e of this._elementsToRestoreScrollPositionsFor){const t=Xe.get(e);t&&(e.scrollTop=t.scrollTop,e.scrollLeft=t.scrollLeft)}}static _storeScrollPosition(e){const t=e.currentTarget;Xe.set(t,{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop})}setDefaultFocusedElement(e){if(e&&!this.isSelfOrAncestor(e))throw new Error("Default focus must be descendant");this._defaultFocusedElement=e}focus(){if(!this._visible)return;let e;if(this._defaultFocusedElement&&this.isSelfOrAncestor(this._defaultFocusedElement))e=this._defaultFocusedElement;else if(-1!==this.tabIndex)e=this;else{let t=this.traverseNextNode(this);for(;t;){if(t instanceof $e&&t._visible){e=t;break}t=t.traverseNextNode(this)}}e&&!e.hasFocus()&&(e===this?HTMLElement.prototype.focus.call(this):e.focus())}connectedCallback(){this._visible=!0,this.restoreScrollPositions(),this._onShownCallback&&this._onShownCallback.call(null)}disconnectedCallback(){this._visible=!1,this._onHiddenCallback&&this._onHiddenCallback.call(null)}}self.customElements.define("x-widget",$e);var Ye=Object.freeze({__proto__:null,XWidget:$e});class Qe extends HTMLDivElement{constructor(){super(),this.__widget,this.__widgetCounter}}class Ze extends e.ObjectWrapper{constructor(e,t){super(),this.element,this.contentElement=document.createElement("div"),this.contentElement.classList.add("widget"),e?(this.element=document.createElement("div"),this.element.classList.add("vbox"),this.element.classList.add("flex-auto"),this._shadowRoot=Ue(this.element,{cssFile:void 0,enableLegacyPatching:!0,delegatesFocus:t}),this._shadowRoot.appendChild(this.contentElement)):this.element=this.contentElement,this._isWebComponent=e,this.element.__widget=this,this._visible=!1,this._isRoot=!1,this._isShowing=!1,this._children=[],this._hideOnDetach=!1,this._notificationDepth=0,this._invalidationsSuspended=0,this._defaultFocusedChild=null,this._parentWidget=null}static _incrementWidgetCounter(e,t){const i=(t.__widgetCounter||0)+(t.__widget?1:0);if(!i)return;let s=e;for(;s;)s.__widgetCounter=(s.__widgetCounter||0)+i,s=st(s)}static _decrementWidgetCounter(e,t){const i=(t.__widgetCounter||0)+(t.__widget?1:0);if(!i)return;let s=e;for(;s;)s.__widgetCounter&&(s.__widgetCounter-=i),s=st(s)}static __assert(e,t){if(!e)throw new Error(t)}markAsRoot(){Ze.__assert(!this.element.parentElement,"Attempt to mark as root attached node"),this._isRoot=!0}parentWidget(){return this._parentWidget}children(){return this._children}childWasDetached(e){}isShowing(){return this._isShowing}shouldHideOnDetach(){if(!this.element.parentElement)return!1;if(this._hideOnDetach)return!0;for(const e of this._children)if(e.shouldHideOnDetach())return!0;return!1}setHideOnDetach(){this._hideOnDetach=!0}_inNotification(){return!!this._notificationDepth||!(!this._parentWidget||!this._parentWidget._inNotification())}_parentIsShowing(){return!!this._isRoot||!!this._parentWidget&&this._parentWidget.isShowing()}_callOnVisibleChildren(e){const t=this._children.slice();for(let i=0;i<t.length;++i)t[i]._parentWidget===this&&t[i]._visible&&e.call(t[i])}_processWillShow(){this._callOnVisibleChildren(this._processWillShow),this._isShowing=!0}_processWasShown(){this._inNotification()||(this.restoreScrollPositions(),this._notify(this.wasShown),this._callOnVisibleChildren(this._processWasShown))}_processWillHide(){this._inNotification()||(this.storeScrollPositions(),this._callOnVisibleChildren(this._processWillHide),this._notify(this.willHide),this._isShowing=!1)}_processWasHidden(){this._callOnVisibleChildren(this._processWasHidden)}_processOnResize(){this._inNotification()||this.isShowing()&&(this._notify(this.onResize),this._callOnVisibleChildren(this._processOnResize))}_notify(e){++this._notificationDepth;try{e.call(this)}finally{--this._notificationDepth}}wasShown(){}willHide(){}onResize(){}onLayout(){}ownerViewDisposed(){}show(e,t){if(Ze.__assert(e,"Attempt to attach widget with no parent element"),!this._isRoot){let t=e;for(;t&&!t.__widget;)t=st(t);if(!t||!t.__widget)throw new Error("Attempt to attach widget to orphan node");this._attach(t.__widget)}this._showWidget(e,t)}_attach(e){e!==this._parentWidget&&(this._parentWidget&&this.detach(),this._parentWidget=e,this._parentWidget._children.push(this),this._isRoot=!1)}showWidget(){if(!this._visible){if(!this.element.parentElement)throw new Error("Attempt to show widget that is not hidden using hideWidget().");this._showWidget(this.element.parentElement,this.element.nextSibling)}}_showWidget(e,t){let i=e;for(;i&&!i.__widget;)i=st(i);this._isRoot?Ze.__assert(!i,"Attempt to show root widget under another widget"):Ze.__assert(i&&i.__widget===this._parentWidget,"Attempt to show under node belonging to alien widget");const s=this._visible;s&&this.element.parentElement===e||(this._visible=!0,!s&&this._parentIsShowing()&&this._processWillShow(),this.element.classList.remove("hidden"),this.element.parentElement!==e&&(this._externallyManaged||Ze._incrementWidgetCounter(e,this.element),t?_.originalInsertBefore.call(e,this.element,t):_.originalAppendChild.call(e,this.element)),!s&&this._parentIsShowing()&&this._processWasShown(),this._parentWidget&&this._hasNonZeroConstraints()?this._parentWidget.invalidateConstraints():this._processOnResize())}hideWidget(){this._visible&&this._hideWidget(!1)}_hideWidget(e){this._visible=!1;const t=this.element.parentElement;this._parentIsShowing()&&this._processWillHide(),e?(Ze._decrementWidgetCounter(t,this.element),_.originalRemoveChild.call(t,this.element)):this.element.classList.add("hidden"),this._parentIsShowing()&&this._processWasHidden(),this._parentWidget&&this._hasNonZeroConstraints()&&this._parentWidget.invalidateConstraints()}detach(e){if(!this._parentWidget&&!this._isRoot)return;const t=e||!this.shouldHideOnDetach();if(this._visible)this._hideWidget(t);else if(t&&this.element.parentElement){const e=this.element.parentElement;Ze._decrementWidgetCounter(e,this.element),_.originalRemoveChild.call(e,this.element)}if(this._parentWidget){const e=this._parentWidget._children.indexOf(this);Ze.__assert(e>=0,"Attempt to remove non-child widget"),this._parentWidget._children.splice(e,1),this._parentWidget._defaultFocusedChild===this&&(this._parentWidget._defaultFocusedChild=null),this._parentWidget.childWasDetached(this),this._parentWidget=null}else Ze.__assert(this._isRoot,"Removing non-root widget from DOM")}detachChildWidgets(){const e=this._children.slice();for(let t=0;t<e.length;++t)e[t].detach()}elementsToRestoreScrollPositionsFor(){return[this.element]}storeScrollPositions(){const e=this.elementsToRestoreScrollPositionsFor();for(const t of e)Je.set(t,{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop})}restoreScrollPositions(){const e=this.elementsToRestoreScrollPositionsFor();for(const t of e){const e=Je.get(t);e&&(t.scrollLeft=e.scrollLeft,t.scrollTop=e.scrollTop)}}doResize(){this.isShowing()&&(this._inNotification()||this._callOnVisibleChildren(this._processOnResize))}doLayout(){this.isShowing()&&(this._notify(this.onLayout),this.doResize())}registerRequiredCSS(e,t){this._isWebComponent?Ne(this._shadowRoot,e,t):Ne(this.element,e,t)}printWidgetHierarchy(){const e=[];this._collectWidgetHierarchy("",e),console.log(e.join("\n"))}_collectWidgetHierarchy(e,t){t.push(e+"["+this.element.className+"]"+(this._children.length?" {":""));for(let i=0;i<this._children.length;++i)this._children[i]._collectWidgetHierarchy(e+"    ",t);this._children.length&&t.push(e+"}")}setDefaultFocusedElement(e){this._defaultFocusedElement=e}setDefaultFocusedChild(e){Ze.__assert(e._parentWidget===this,"Attempt to set non-child widget as default focused."),this._defaultFocusedChild=e}focus(){if(!this.isShowing())return;const e=this._defaultFocusedElement;if(e)e.hasFocus()||e.focus();else if(this._defaultFocusedChild&&this._defaultFocusedChild._visible)this._defaultFocusedChild.focus();else{for(const e of this._children)if(e._visible)return void e.focus();let e=this.contentElement.traverseNextNode(this.contentElement);for(;e;){if(e instanceof $e)return void e.focus();e=e.traverseNextNode(this.contentElement)}}}hasFocus(){return this.element.hasFocus()}calculateConstraints(){return new ze}constraints(){return void 0!==this._constraints?this._constraints:(void 0===this._cachedConstraints&&(this._cachedConstraints=this.calculateConstraints()),this._cachedConstraints)}setMinimumAndPreferredSizes(e,t,i,s){this._constraints=new ze(new Fe(e,t),new Fe(i,s)),this.invalidateConstraints()}setMinimumSize(e,t){this._constraints=new ze(new Fe(e,t)),this.invalidateConstraints()}_hasNonZeroConstraints(){const e=this.constraints();return!!(e.minimum.width||e.minimum.height||e.preferred.width||e.preferred.height)}suspendInvalidations(){++this._invalidationsSuspended}resumeInvalidations(){--this._invalidationsSuspended,!this._invalidationsSuspended&&this._invalidationsRequested&&this.invalidateConstraints()}invalidateConstraints(){if(this._invalidationsSuspended)return void(this._invalidationsRequested=!0);this._invalidationsRequested=!1;const e=this._cachedConstraints;delete this._cachedConstraints;!this.constraints().isEqual(e||null)&&this._parentWidget?this._parentWidget.invalidateConstraints():this.doLayout()}markAsExternallyManaged(){Ze.__assert(!this._parentWidget,"Attempt to mark widget as externally managed after insertion to the DOM"),this._externallyManaged=!0}}const Je=new WeakMap;class et extends Ze{constructor(e,t){super(e,t),this.contentElement.classList.add("vbox")}calculateConstraints(){let e=new ze;return this._callOnVisibleChildren((function(){const t=this.constraints();e=e.widthToMax(t),e=e.addHeight(t)})),e}}class tt extends Ze{constructor(e){super(e),this.contentElement.classList.add("hbox")}calculateConstraints(){let e=new ze;return this._callOnVisibleChildren((function(){const t=this.constraints();e=e.addWidth(t),e=e.heightToMax(t)})),e}}class it{constructor(e){this._widget=e,this._previous=e.element.ownerDocument.deepActiveElement(),e.focus()}restore(){this._widget&&(this._widget.hasFocus()&&this._previous&&this._previous.focus(),this._previous=null,this._widget=null)}}function st(e){return e.parentElementOrShadowHost()}var nt=Object.freeze({__proto__:null,WidgetElement:Qe,Widget:Ze,VBox:et,HBox:tt,VBoxWithResizeCallback:class extends et{constructor(e){super(),this._resizeCallback=e}onResize(){this._resizeCallback()}},WidgetFocusRestorer:it});class ot extends e.ObjectWrapper{constructor(){super(),this._widget=new Ze(!0),this._widget.markAsRoot(),this.element=this._widget.element,this.contentElement=this._widget.contentElement,this._arrowElement=Ee.create("","arrow hidden"),this.element.shadowRoot&&this.element.shadowRoot.appendChild(this._arrowElement),this.registerRequiredCSS("ui/glassPane.css",{enableLegacyPatching:!0}),this.setPointerEventsBehavior(rt.PierceGlassPane),this._onMouseDownBound=this._onMouseDown.bind(this),this._onClickOutsideCallback=null,this._maxSize=null,this._positionX=null,this._positionY=null,this._anchorBox=null,this._anchorBehavior=at.PreferTop,this._sizeBehavior=lt.SetExactSize,this._marginBehavior=ht.DefaultMargin}isShowing(){return this._widget.isShowing()}registerRequiredCSS(e,t){this._widget.registerRequiredCSS(e,t)}setDefaultFocusedElement(e){this._widget.setDefaultFocusedElement(e)}setDimmed(e){this.element.classList.toggle("dimmed-pane",e)}setPointerEventsBehavior(e){this.element.classList.toggle("no-pointer-events",e!==rt.BlockedByGlassPane),this.contentElement.classList.toggle("no-pointer-events",e===rt.PierceContents)}setOutsideClickCallback(e){this._onClickOutsideCallback=e}setMaxContentSize(e){this._maxSize=e,this.positionContent()}setSizeBehavior(e){this._sizeBehavior=e,this.positionContent()}setContentPosition(e,t){this._positionX=e,this._positionY=t,this.positionContent()}setContentAnchorBox(e){this._anchorBox=e,this.positionContent()}setAnchorBehavior(e){this._anchorBehavior=e}setMarginBehavior(e){this._marginBehavior=e,this._arrowElement.classList.toggle("hidden",e!==ht.Arrow)}show(e){this.isShowing()||(this.element.style.zIndex=""+(3e3+1e3*ct.size),e.body.addEventListener("mousedown",this._onMouseDownBound,!0),this._widget.show(e.body),ct.add(this),this.positionContent())}hide(){this.isShowing()&&(ct.delete(this),this.element.ownerDocument.body.removeEventListener("mousedown",this._onMouseDownBound,!0),this._widget.detach())}_onMouseDown(e){if(!this._onClickOutsideCallback)return;const t=e.deepElementFromPoint();t&&!this.contentElement.isSelfOrAncestor(t)&&this._onClickOutsideCallback.call(null,e)}positionContent(){if(!this.isShowing())return;const e=this._marginBehavior===ht.Arrow,t=e?8:this._marginBehavior===ht.NoMargin?0:3,i=Ie(this.element.ownerDocument),s=dt.get(this.element.ownerDocument);this._sizeBehavior===lt.MeasureContent&&(this.contentElement.positionAt(0,0),this.contentElement.style.width="",this.contentElement.style.maxWidth="",this.contentElement.style.height="",this.contentElement.style.maxHeight="");const n=s.offsetWidth,o=s.offsetHeight;let r=n-2*t,a=o-2*t,l=t,h=t;if(this._maxSize&&(r=Math.min(r,this._maxSize.width),a=Math.min(a,this._maxSize.height)),this._sizeBehavior===lt.MeasureContent){const e=this.contentElement.getBoundingClientRect(),t=a<e.height?i:0,s=r<e.width?i:0;r=Math.min(r,e.width+t),a=Math.min(a,e.height+s)}if(this._anchorBox){const i=this._anchorBox.relativeToElement(s);let d=this._anchorBehavior;if(this._arrowElement.classList.remove("arrow-none","arrow-top","arrow-bottom","arrow-left","arrow-right"),d===at.PreferTop||d===at.PreferBottom){const u=i.y-2*t,m=o-i.y-i.height-2*t;let _;d===at.PreferTop&&u<a&&m>u&&(d=at.PreferBottom),d===at.PreferBottom&&m<a&&u>m&&(d=at.PreferTop);let p=!0;if(d===at.PreferTop){h=Math.max(t,i.y-a-t);const e=i.y-h-t;this._sizeBehavior===lt.MeasureContent?a>e&&(this._arrowElement.classList.add("arrow-none"),p=!1):a=Math.min(a,e),this._arrowElement.setIconType("mediumicon-arrow-bottom"),this._arrowElement.classList.add("arrow-bottom"),_=i.y-t}else{h=i.y+i.height+t;const e=o-h-t;this._sizeBehavior===lt.MeasureContent?a>e&&(this._arrowElement.classList.add("arrow-none"),h=o-t-a,p=!1):a=Math.min(a,e),this._arrowElement.setIconType("mediumicon-arrow-top"),this._arrowElement.classList.add("arrow-top"),_=i.y+i.height+t}if(l=Math.max(t,Math.min(i.x,n-r-t)),p?e&&l-10>=t&&(l-=10):l=Math.min(l+10,n-r-t),r=Math.min(r,n-l-t),20>=r)this._arrowElement.classList.add("arrow-none");else{let e=i.x+Math.min(50,Math.floor(i.width/2));e=c.clamp(e,l+10,l+r-10),this._arrowElement.positionAt(e,_,s)}}else{const u=i.x-2*t,m=n-i.x-i.width-2*t;let _;d===at.PreferLeft&&u<r&&m>u&&(d=at.PreferRight),d===at.PreferRight&&m<r&&u>m&&(d=at.PreferLeft);let p=!0;if(d===at.PreferLeft){l=Math.max(t,i.x-r-t);const e=i.x-l-t;this._sizeBehavior===lt.MeasureContent?r>e&&(this._arrowElement.classList.add("arrow-none"),p=!1):r=Math.min(r,e),this._arrowElement.setIconType("mediumicon-arrow-right"),this._arrowElement.classList.add("arrow-right"),_=i.x-t}else{l=i.x+i.width+t;const e=n-l-t;this._sizeBehavior===lt.MeasureContent?r>e&&(this._arrowElement.classList.add("arrow-none"),l=n-t-r,p=!1):r=Math.min(r,e),this._arrowElement.setIconType("mediumicon-arrow-left"),this._arrowElement.classList.add("arrow-left"),_=i.x+i.width+t}if(h=Math.max(t,Math.min(i.y,o-a-t)),p?e&&h-10>=t&&(h-=10):h=Math.min(h+10,o-a-t),a=Math.min(a,o-h-t),20>=a)this._arrowElement.classList.add("arrow-none");else{let e=i.y+Math.min(50,Math.floor(i.height/2));e=c.clamp(e,h+10,h+a-10),this._arrowElement.positionAt(_,e,s)}}}else l=null!==this._positionX?this._positionX:(n-r)/2,h=null!==this._positionY?this._positionY:(o-a)/2,r=Math.min(r,n-l-t),a=Math.min(a,o-h-t),this._arrowElement.classList.add("arrow-none");this.contentElement.style.width=r+"px",this._sizeBehavior===lt.SetExactWidthMaxHeight?this.contentElement.style.maxHeight=a+"px":this.contentElement.style.height=a+"px",this.contentElement.positionAt(l,h,s),this._widget.doResize()}widget(){return this._widget}static setContainer(e){dt.set(e.ownerDocument,e),ot.containerMoved(e)}static container(e){return dt.get(e)}static containerMoved(e){for(const t of ct)t.isShowing()&&t.element.ownerDocument===e.ownerDocument&&t.positionContent()}}const rt={BlockedByGlassPane:Symbol("BlockedByGlassPane"),PierceGlassPane:Symbol("PierceGlassPane"),PierceContents:Symbol("PierceContents")},at={PreferTop:Symbol("PreferTop"),PreferBottom:Symbol("PreferBottom"),PreferLeft:Symbol("PreferLeft"),PreferRight:Symbol("PreferRight")},lt={SetExactSize:Symbol("SetExactSize"),SetExactWidthMaxHeight:Symbol("SetExactWidthMaxHeight"),MeasureContent:Symbol("MeasureContent")},ht={Arrow:Symbol("Arrow"),DefaultMargin:Symbol("DefaultMargin"),NoMargin:Symbol("NoMargin")},dt=new Map,ct=new Set,ut=ct;var mt=Object.freeze({__proto__:null,GlassPane:ot,PointerEventsBehavior:rt,AnchorBehavior:at,SizeBehavior:lt,MarginBehavior:ht,GlassPanePanes:ut});class _t{constructor(e,t,i,s){this.descriptors=e,this.action=t,this.type=i,this.keybindSets=s}title(){return this.descriptors.map(e=>e.name).join(" ")}isDefault(){return this.type===bt.DefaultShortcut||this.type===bt.DisabledDefault||this.type===bt.KeybindSetShortcut&&this.keybindSets.has(pn)}changeType(e){return new _t(this.descriptors,this.action,e)}changeKeys(e){return this.descriptors=e,this}descriptorsMatch(e){return e.length===this.descriptors.length&&e.every((e,t)=>e.key===this.descriptors[t].key)}hasKeybindSet(e){return!this.keybindSets||this.keybindSets.has(e)}equals(e){return this.descriptorsMatch(e.descriptors)&&this.type===e.type&&this.action===e.action}static createShortcutFromSettingObject(e){return new _t(e.descriptors,e.action,e.type)}static makeKey(e,t){return"string"==typeof e&&(e=e.charCodeAt(0)-(/^[a-z]/.test(e)?32:0)),t=t||pt.None,_t._makeKeyFromCodeAndModifiers(e,t)}static makeKeyFromEvent(e){let t=pt.None;e.shiftKey&&(t|=pt.Shift),e.ctrlKey&&(t|=pt.Ctrl),e.altKey&&(t|=pt.Alt),e.metaKey&&(t|=pt.Meta);const i=e.keyCode||e.__keyCode;return _t._makeKeyFromCodeAndModifiers(i,t)}static makeKeyFromEventIgnoringModifiers(e){const t=e.keyCode||e.__keyCode;return _t._makeKeyFromCodeAndModifiers(t,pt.None)}static eventHasCtrlOrMeta(e){return r.isMac()?e.metaKey&&!e.ctrlKey:e.ctrlKey&&!e.metaKey}static hasNoModifiers(e){return!(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)}static makeDescriptor(e,t){return{key:_t.makeKey("string"==typeof e?e:e.code,t),name:_t.shortcutToString(e,t)}}static makeDescriptorFromBindingShortcut(e){const[t,...i]=e.split(/\+(?!$)/).reverse();let s=0;for(const t of i){const i=pt[t];console.assert(void 0!==i,`Only one key other than modifier is allowed in shortcut <${e}>`),s|=i}console.assert(t,`Modifiers-only shortcuts are not allowed (encountered <${e}>)`);const n=gt[t]||ft[t];return n&&n.shiftKey&&(s|=pt.Shift),_t.makeDescriptor(n||t,s)}static shortcutToString(e,t){return _t._modifiersToString(t)+_t._keyName(e)}static _keyName(e){return"string"==typeof e?e.toUpperCase():"string"==typeof e.name?e.name:e.name[r.platform()]||e.name.other||""}static _makeKeyFromCodeAndModifiers(e,t){return 255&e|t<<8}static keyCodeAndModifiersFromKey(e){return{keyCode:255&e,modifiers:e>>8}}static isModifier(e){const{keyCode:t}=_t.keyCodeAndModifiersFromKey(e);return t===gt.Shift.code||t===gt.Ctrl.code||t===gt.Alt.code||t===gt.Meta.code}static _modifiersToString(e){const t=r.isMac(),i=pt,s=new Map([[i.Ctrl,t?"Ctrl ":"Ctrl + "],[i.Alt,t?"⌥ ":"Alt + "],[i.Shift,t?"⇧ ":"Shift + "],[i.Meta,t?"⌘ ":"Win + "]]);return[i.Meta,i.Ctrl,i.Alt,i.Shift].map((function(t){return e&t?s.get(t):""})).join("")}}const pt={None:0,Shift:1,Ctrl:2,Alt:4,Meta:8,CtrlOrMeta:r.isMac()?8:2,ShiftOrOption:r.isMac()?4:1},gt={Backspace:{code:8,name:"↤"},Tab:{code:9,name:{mac:"⇥",other:"Tab"}},Enter:{code:13,name:{mac:"↩",other:"Enter"}},Shift:{code:16,name:{mac:"⇧",other:"Shift"}},Ctrl:{code:17,name:"Ctrl"},Alt:{code:18,name:"Alt"},Esc:{code:27,name:"Esc"},Space:{code:32,name:"Space"},PageUp:{code:33,name:{mac:"⇞",other:"PageUp"}},PageDown:{code:34,name:{mac:"⇟",other:"PageDown"}},End:{code:35,name:{mac:"↗",other:"End"}},Home:{code:36,name:{mac:"↖",other:"Home"}},Left:{code:37,name:"←"},Up:{code:38,name:"↑"},Right:{code:39,name:"→"},Down:{code:40,name:"↓"},Delete:{code:46,name:"Del"},Zero:{code:48,name:"0"},H:{code:72,name:"H"},N:{code:78,name:"N"},P:{code:80,name:"P"},Meta:{code:91,name:"Meta"},F1:{code:112,name:"F1"},F2:{code:113,name:"F2"},F3:{code:114,name:"F3"},F4:{code:115,name:"F4"},F5:{code:116,name:"F5"},F6:{code:117,name:"F6"},F7:{code:118,name:"F7"},F8:{code:119,name:"F8"},F9:{code:120,name:"F9"},F10:{code:121,name:"F10"},F11:{code:122,name:"F11"},F12:{code:123,name:"F12"},Semicolon:{code:186,name:";"},NumpadPlus:{code:107,name:"Numpad +"},NumpadMinus:{code:109,name:"Numpad -"},Numpad0:{code:96,name:"Numpad 0"},Plus:{code:187,name:"+"},Comma:{code:188,name:","},Minus:{code:189,name:"-"},Period:{code:190,name:"."},Slash:{code:191,name:"/"},QuestionMark:{code:191,name:"?"},Apostrophe:{code:192,name:"`"},Tilde:{code:192,name:"Tilde"},LeftSquareBracket:{code:219,name:"["},RightSquareBracket:{code:221,name:"]"},Backslash:{code:220,name:"\\"},SingleQuote:{code:222,name:"'"},get CtrlOrMeta(){return r.isMac()?this.Meta:this.Ctrl}},bt={UserShortcut:"UserShortcut",DefaultShortcut:"DefaultShortcut",DisabledDefault:"DisabledDefault",UnsetShortcut:"UnsetShortcut",KeybindSetShortcut:"KeybindSetShortcut"},ft={};!function(){for(const e in gt){const t=gt[e];if("object"==typeof t&&t.code){const i="string"==typeof t.name?t.name:e;ft[i]=t}}}();var vt=Object.freeze({__proto__:null,KeyboardShortcut:_t,Modifiers:pt,Keys:gt,Type:bt,KeyBindings:ft,Key:void 0,Descriptor:void 0});function wt(e){return e.data}class Et{constructor(e){this._element=e,this._elementsById=new Map}element(){return this._element}$(e){return this._elementsById.get(e)}static build(e,...t){return Et._render(Et._template(e),t)}static cached(e,...t){let i=It.get(e);return i||(i=Et._template(e),It.set(e,i)),Et._render(i,t)}static _template(e){let t="",i=!0;for(let s=0;s<e.length-1;s++){t+=e[s];const n=e[s].lastIndexOf(">"),o=e[s].indexOf("<",n+1);-1!==n&&-1===o?i=!0:-1!==o&&(i=!1),t+=i?St:xt(s)}t+=e[e.length-1];const s=document.createElement("template");s.innerHTML=t;const n=s.ownerDocument.createTreeWalker(s.content,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,null,!1);let o=0;const r=[],a=[],l=[];for(;n.nextNode();){const e=n.currentNode;if(e.nodeType===Node.ELEMENT_NODE&&e.hasAttributes()){e.hasAttribute("$")&&(l.push(e),a.push({replaceNodeIndex:void 0,attr:void 0,elementId:e.getAttribute("$")||""}),e.removeAttribute("$"));const t=[];for(let i=0;i<e.attributes.length;i++){const s=e.attributes[i].name;if(!Ct.test(s)&&!Ct.test(e.attributes[i].value))continue;t.push(s),l.push(e);const n={index:o,names:s.split(Ct),values:e.attributes[i].value.split(Ct)};o+=n.names.length-1,o+=n.values.length-1;const r={elementId:void 0,replaceNodeIndex:void 0,attr:n};a.push(r)}for(let i=0;i<t.length;i++)e.removeAttribute(t[i])}if(e.nodeType===Node.TEXT_NODE&&-1!==wt(e).indexOf(St)){const t=wt(e).split(yt);e.data=t[t.length-1];const i=e.parentNode;for(let s=0;s<t.length-1;s++){t[s]&&i.insertBefore(document.createTextNode(t[s]),e);const n=document.createElement("span");l.push(n),a.push({attr:void 0,elementId:void 0,replaceNodeIndex:o++}),i.insertBefore(n,e)}}e.nodeType!==Node.TEXT_NODE||e.previousSibling&&e.previousSibling.nodeType!==Node.ELEMENT_NODE||e.nextSibling&&e.nextSibling.nodeType!==Node.ELEMENT_NODE||!/^\s*$/.test(wt(e))||r.push(e)}for(let e=0;e<l.length;e++)l[e].classList.add(Tt(e));for(const e of r)e.remove();return{template:s,binds:a}}static _render(e,t){const i=e.template.ownerDocument.importNode(e.template.content,!0),s=i.firstChild===i.lastChild?i.firstChild:i,n=new Et(s),o=[];for(let t=0;t<e.binds.length;t++){const e=Tt(t),s=i.querySelector("."+e);s.classList.remove(e),o.push(s)}for(let i=0;i<e.binds.length;i++){const s=e.binds[i],r=o[i];if(void 0!==s.elementId)n._elementsById.set(s.elementId,r);else if(void 0!==s.replaceNodeIndex){const e=t[s.replaceNodeIndex];r.parentNode.replaceChild(this._nodeForValue(e),r)}else{if(void 0===s.attr)throw new Error("Unexpected bind");if(2===s.attr.names.length&&1===s.attr.values.length&&"function"==typeof t[s.attr.index])t[s.attr.index].call(null,r);else{let e=s.attr.names[0];for(let i=1;i<s.attr.names.length;i++)e+=t[s.attr.index+i-1],e+=s.attr.names[i];if(e){let i=s.attr.values[0];for(let e=1;e<s.attr.values.length;e++)i+=t[s.attr.index+s.attr.names.length-1+e-1],i+=s.attr.values[e];r.setAttribute(e,i)}}}}return n}static _nodeForValue(e){if(e instanceof Node)return e;if(e instanceof Et)return e._element;if(Array.isArray(e)){const t=document.createDocumentFragment();for(const i of e)t.appendChild(this._nodeForValue(i));return t}return document.createTextNode(""+e)}}const St="{{template-text}}",yt=/{{template-text}}/,xt=e=>"template-attribute"+e,Ct=/template-attribute\d+/,Tt=e=>"template-class-"+e,It=new Map,kt=(e,...t)=>Et.cached(e,...t).element();var Lt=Object.freeze({__proto__:null,Fragment:Et,_textMarker:St,_attributeMarker:xt,html:kt,TemplateDefinition:void 0,_Bind:void 0,_Template:void 0});class Mt extends Ke{static create(e,t,i,s){return t||(t=e),i=i||"",e=Si(e),kt`
        <x-link href='${e}' class='${i} devtools-link' ${s?"no-click":""}
        >${t.trimMiddle(xi)}</x-link>`}constructor(){super(),this.style.setProperty("display","inline"),z(this),this.tabIndex=0,this.target="_blank",this.rel="noopener",this._href=null,this._clickable=!0,this._onClick=e=>{e.consume(!0),a.InspectorFrontendHostInstance.openInNewTab(this._href)},this._onKeyDown=e=>{isEnterOrSpaceKey(e)&&(e.consume(!0),a.InspectorFrontendHostInstance.openInNewTab(this._href))}}static get observedAttributes(){return Ke.observedAttributes.concat(["href","no-click"])}attributeChangedCallback(e,t,i){if("no-click"===e)return this._clickable=!i,void this._updateClick();if("href"===e){i||(i="");let e=null,t=null;try{t=new URL(i),e=t.toString()}catch(e){}return t&&"javascript:"===t.protocol&&(e=null),this._href=e,this.title=i,void this._updateClick()}super.attributeChangedCallback(e,t,i)}_updateClick(){null!==this._href&&this._clickable?(this.addEventListener("click",this._onClick,!1),this.addEventListener("keydown",this._onKeyDown,!1),this.style.setProperty("cursor","pointer")):(this.removeEventListener("click",this._onClick,!1),this.removeEventListener("keydown",this._onKeyDown,!1),this.style.removeProperty("cursor"))}}self.customElements.define("x-link",Mt);var Pt=Object.freeze({__proto__:null,XLink:Mt,ContextMenuProvider:class{appendApplicableItems(e,t,i){let s=i;for(;s&&!(s instanceof Mt);)s=s.parentNodeOrShadowHost();if(!s||!s._href)return;const n=s;t.revealSection().appendItem($t(),()=>{n._href&&a.InspectorFrontendHostInstance.openInNewTab(n._href)}),t.revealSection().appendItem(Yt(),()=>{n._href&&a.InspectorFrontendHostInstance.copyText(n._href)})}}});function Dt(e,t,i,s,n,o,r){let a;e.addEventListener("mousedown",(function(o){const l=new Rt,h=l.elementDragStart.bind(l,e,t,i,s,n,o);r?a=setTimeout(h,r):h()}),!1),r&&e.addEventListener("mouseup",(function(){a&&clearTimeout(a),a=null}),!1),null!==o&&(e.style.cursor=o||n||"")}function At(e,t,i,s,n,o){(new Rt).elementDragStart(e,t,i,s,n,o)}class Rt{constructor(){this._elementDragMove=this._elementDragMove.bind(this),this._elementDragEnd=this._elementDragEnd.bind(this),this._mouseOutWhileDragging=this._mouseOutWhileDragging.bind(this)}_createGlassPane(){this._glassPaneInUse=!0,Rt._glassPaneUsageCount++||(Rt._glassPane=new ot,Rt._glassPane.setPointerEventsBehavior(rt.BlockedByGlassPane),Rt._glassPane.show(Rt._documentForMouseOut))}_disposeGlassPane(){this._glassPaneInUse&&(this._glassPaneInUse=!1,--Rt._glassPaneUsageCount||(Rt._glassPane.hide(),delete Rt._glassPane,delete Rt._documentForMouseOut))}elementDragStart(e,t,i,s,n,o){if(o.button||r.isMac()&&o.ctrlKey)return;if(this._elementDraggingEventListener)return;if(t&&!t(o))return;const a=o.target.ownerDocument;this._elementDraggingEventListener=i,this._elementEndDraggingEventListener=s,console.assert((Rt._documentForMouseOut||a)===a,"Dragging on multiple documents."),Rt._documentForMouseOut=a,this._dragEventsTargetDocument=a;try{this._dragEventsTargetDocumentTop=a.defaultView.top.document}catch(e){this._dragEventsTargetDocumentTop=this._dragEventsTargetDocument}a.addEventListener("mousemove",this._elementDragMove,!0),a.addEventListener("mouseup",this._elementDragEnd,!0),a.addEventListener("mouseout",this._mouseOutWhileDragging,!0),a!==this._dragEventsTargetDocumentTop&&this._dragEventsTargetDocumentTop.addEventListener("mouseup",this._elementDragEnd,!0),"string"==typeof n&&(this._restoreCursorAfterDrag=function(t){a.body.style.removeProperty("cursor"),e.style.cursor=t,this._restoreCursorAfterDrag=null}.bind(this,e.style.cursor),e.style.cursor=n,a.body.style.cursor=n),o.preventDefault()}_mouseOutWhileDragging(){this._unregisterMouseOutWhileDragging(),this._createGlassPane()}_unregisterMouseOutWhileDragging(){Rt._documentForMouseOut&&Rt._documentForMouseOut.removeEventListener("mouseout",this._mouseOutWhileDragging,!0)}_unregisterDragEvents(){this._dragEventsTargetDocument&&(this._dragEventsTargetDocument.removeEventListener("mousemove",this._elementDragMove,!0),this._dragEventsTargetDocument.removeEventListener("mouseup",this._elementDragEnd,!0),this._dragEventsTargetDocument!==this._dragEventsTargetDocumentTop&&this._dragEventsTargetDocumentTop.removeEventListener("mouseup",this._elementDragEnd,!0),delete this._dragEventsTargetDocument,delete this._dragEventsTargetDocumentTop)}_elementDragMove(e){1===e.buttons?this._elementDraggingEventListener(e)&&this._cancelDragEvents(e):this._elementDragEnd(e)}_cancelDragEvents(e){this._unregisterDragEvents(),this._unregisterMouseOutWhileDragging(),this._restoreCursorAfterDrag&&this._restoreCursorAfterDrag(),this._disposeGlassPane(),delete this._elementDraggingEventListener,delete this._elementEndDraggingEventListener}_elementDragEnd(e){const t=this._elementEndDraggingEventListener;this._cancelDragEvents(e),e.preventDefault(),t&&t(e)}}function Ot(){if(UI.__editingCount)return!0;const e=document.deepActiveElement();return!!e&&(e.classList.contains("text-prompt")||"INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)}function Ft(e,t){if(t){if(e.__editing)return!1;e.classList.add("being-edited"),e.__editing=!0,UI.__editingCount=(UI.__editingCount||0)+1}else{if(!e.__editing)return!1;e.classList.remove("being-edited"),delete e.__editing,--UI.__editingCount}return!0}Rt._glassPaneUsageCount=0;const Bt=/^(-?(?:\d+(?:\.\d+)?|\.\d+))$/;function zt(e){let t=null;return"mousewheel"===e.type?e.wheelDeltaY>0||e.wheelDeltaX>0?t="Up":(e.wheelDeltaY<0||e.wheelDeltaX<0)&&(t="Down"):"ArrowUp"===e.key||"PageUp"===e.key?t="Up":"ArrowDown"!==e.key&&"PageDown"!==e.key||(t="Down"),t}function Wt(e,t,i){const s=zt(t);if(!s)return null;const n=t;let o=1;_t.eventHasCtrlOrMeta(n)?o=100:n.shiftKey?o=10:n.altKey&&(o=.1),"Down"===s&&(o*=-1),i&&(o*=i);const r=Number((e+o).toFixed(6));return String(r).match(Bt)?r:null}function Nt(e,t,i){let s,n,o,r=null,a=/(.*#)([\da-fA-F]+)(.*)/.exec(e);return a&&a.length?(s=a[1],n=a[3],o=function(e,t){const i=zt(t);if(!i)return null;const s=t,n=parseInt(e,16);if(isNaN(n)||!isFinite(n))return null;const o=e.length,r=o/3;if(1!==r&&2!==r)return null;let a=0;_t.eventHasCtrlOrMeta(s)&&(a+=Math.pow(16,2*r)),s.shiftKey&&(a+=Math.pow(16,r)),s.altKey&&(a+=1),0===a&&(a=1),"Down"===i&&(a*=-1);const l=Math.pow(16,o)-1;let h=c.clamp(n+a,0,l).toString(16).toUpperCase();for(let e=0,t=o-h.length;e<t;++e)h="0"+h;return h}(a[2],t),null!==o&&(r=s+o+n)):(a=/(.*?)(-?(?:\d+(?:\.\d+)?|\.\d+))(.*)/.exec(e),a&&a.length&&(s=a[1],n=a[3],o=Wt(parseFloat(a[2]),t),null!==o&&(r=i?i(s,o,n):s+o+n))),r}Number.preciseMillisToString=function(e,i){const s="%."+(i=i||0)+"f ms";return t.UIString(s,e)};const Ht=new t.UIStringFormat("%.0f μs"),Vt=new t.UIStringFormat("%.2f ms"),Ut=new t.UIStringFormat("%.0f ms"),Kt=new t.UIStringFormat("%.2f s"),jt=new t.UIStringFormat("%.1f min"),qt=new t.UIStringFormat("%.1f hrs"),Gt=new t.UIStringFormat("%.1f days");function Xt(e,i){return u.format(t.UIString(e),i,{s:e=>e},createElement("span"),(function(e,t){return e.appendChild("string"==typeof t?createTextNode(t):t),e})).formattedResult}function $t(){return t.UIString("Open in new tab")}function Yt(){return t.UIString("Copy link address")}function Qt(e,t){t.target.document.nodeType===Node.DOCUMENT_NODE&&e.body.classList.remove("inactive")}function Zt(e,t){t.target.document.nodeType===Node.DOCUMENT_NODE&&e.body.classList.add("inactive")}Number.millisToString=function(e,t){if(!isFinite(e))return"-";if(0===e)return"0";if(t&&e<.1)return Ht.format(1e3*e);if(t&&e<1e3)return Vt.format(e);if(e<1e3)return Ut.format(e);const i=e/1e3;if(i<60)return Kt.format(i);const s=i/60;if(s<60)return jt.format(s);const n=s/60;if(n<24)return qt.format(n);const o=n/24;return Gt.format(o)},Number.secondsToString=function(e,t){return isFinite(e)?Number.millisToString(1e3*e,t):"-"},Number.withThousandsSeparator=function(e){let t=e+"";const i=/(\d+)(\d{3})/;for(;t.match(i);)t=t.replace(i,"$1 $2");return t};class Jt{constructor(e){this._element=e,this._previous=e.ownerDocument.deepActiveElement(),e.focus()}restore(){this._element&&(this._element.hasFocus()&&this._previous&&this._previous.focus(),this._previous=null,this._element=null)}}function ei(e,t,i){return ti(e,t,"highlighted-search-result",i)}function ti(e,t,i,s){s=s||[];const n=[],o=e.childTextNodes(),r=o.map((function(e){return e.textContent})).join(""),a=e.ownerDocument;if(0===o.length)return n;const l=[];let h=0;for(let e=0;e<o.length;++e){const t={};t.offset=h,t.length=o[e].textContent.length,h=t.offset+t.length,l.push(t)}let d=0;for(let e=0;e<t.length;++e){const h=t[e].offset,c=h+t[e].length;for(;d<o.length&&l[d].offset+l[d].length<=h;)d++;let u=d;for(;u<o.length&&l[u].offset+l[u].length<c;)u++;if(u===o.length)break;const m=a.createElement("span");m.className=i,m.textContent=r.substring(h,c);const _=o[u],p=_.textContent;if(_.textContent=p.substring(c-l[u].offset),s.push({node:_,type:"changed",oldText:p,newText:_.textContent}),d===u){_.parentElement.insertBefore(m,_),s.push({node:m,type:"added",nextSibling:_,parent:_.parentElement}),n.push(m);const e=a.createTextNode(p.substring(0,h-l[d].offset));_.parentElement.insertBefore(e,m),s.push({node:e,type:"added",nextSibling:m,parent:_.parentElement})}else{const e=o[d],t=e.textContent,i=e.nextSibling;e.parentElement.insertBefore(m,i),s.push({node:m,type:"added",nextSibling:i,parent:e.parentElement}),n.push(m),e.textContent=t.substring(0,h-l[d].offset),s.push({node:e,type:"changed",oldText:t,newText:e.textContent});for(let e=d+1;e<u;e++){const t=o[e],i=t.textContent;t.textContent="",s.push({node:t,type:"changed",oldText:i,newText:t.textContent})}}d=u,l[d].offset=c,l[d].length=_.textContent.length}return n}function ii(e,t){const i=e.parentElement,s=e.nextSibling;(t=t||e.ownerDocument.body).appendChild(e),e.positionAt(0,0);const n=e.getBoundingClientRect();return e.positionAt(void 0,void 0),i?i.insertBefore(e,s):e.remove(),new Fe(n.width,n.height)}class si{constructor(e){this._handlers=null,this._autoInvoke=e}add(e,t){this._handlers||(this._handlers=new Map,this._autoInvoke&&this.scheduleInvoke());let i=this._handlers.get(e);i||(i=new Set,this._handlers.set(e,i)),i.add(t)}scheduleInvoke(){this._handlers&&requestAnimationFrame(this._invoke.bind(this))}_invoke(){const e=this._handlers||new Map;this._handlers=null;for(const[t,i]of e)for(const e of i)e.call(t)}}let ni=0,oi=null;function ri(e,t){oi||(oi=new si(!0)),oi.add(e,t)}class ai extends e.ObjectWrapper{constructor(e,t,i=(e=>isEnterOrSpaceKey(e))){super(),this._element=e,this._callback=t,this._editKey=i,this._enable(),this._longClickData}reset(){this._longClickInterval&&(clearInterval(this._longClickInterval),delete this._longClickInterval)}_enable(){if(this._longClickData)return;const e=function(e){if(this._editKey(e)){const t=this._callback;this._longClickInterval=setTimeout(t.bind(null,e),ai.TIME_MS)}}.bind(this),t=function(e){this._editKey(e)&&this.reset()}.bind(this),i=function(e){if(1!==e.which)return;const t=this._callback;this._longClickInterval=setTimeout(t.bind(null,e),ai.TIME_MS)}.bind(this),s=function(e){if(1!==e.which)return;this.reset()}.bind(this),n=this.reset.bind(this);this._element.addEventListener("keydown",e,!1),this._element.addEventListener("keyup",t,!1),this._element.addEventListener("mousedown",i,!1),this._element.addEventListener("mouseout",n,!1),this._element.addEventListener("mouseup",s,!1),this._element.addEventListener("click",n,!0),this._longClickData={mouseUp:s,mouseDown:i,reset:n}}dispose(){this._longClickData&&(this._element.removeEventListener("mousedown",this._longClickData.mouseDown,!1),this._element.removeEventListener("mouseout",this._longClickData.reset,!1),this._element.removeEventListener("mouseup",this._longClickData.mouseUp,!1),this._element.addEventListener("click",this._longClickData.reset,!0),delete this._longClickData)}}ai.TIME_MS=200;const li=(e,t)=>{const i=e.ownerDocument.createTextNode(t);return e.appendChild(i),i};function hi(e,t,i,s,n){const o=document.createElement("button");return i&&(o.className=i),o.textContent=e,o.classList.add("text-button"),s&&o.classList.add("primary-button"),t&&o.addEventListener(n||"click",t),o.type="button",o}function di(e,t){const i=document.createElement("input");return e&&(i.className=e),i.spellcheck=!1,i.classList.add("harmony-input"),t&&(i.type=t),i}class ci extends HTMLSpanElement{constructor(){super(),this._shadowRoot,this.checkboxElement,this.textElement,ci._lastId=(ci._lastId||0)+1;const e="ui-checkbox-label"+ci._lastId;this._shadowRoot=Ue(this,{cssFile:"ui/checkboxTextLabel.css",enableLegacyPatching:!0,delegatesFocus:void 0}),this.checkboxElement=this._shadowRoot.createChild("input"),this.checkboxElement.type="checkbox",this.checkboxElement.setAttribute("id",e),this.textElement=this._shadowRoot.createChild("label","dt-checkbox-text"),this.textElement.setAttribute("for",e),this._shadowRoot.createChild("slot")}static create(e,t,i){ci._constructor||(ci._constructor=ve("span","dt-checkbox",ci));const s=ci._constructor();return s.checkboxElement.checked=!!t,void 0!==e&&(s.textElement.textContent=e,de(s.checkboxElement,e),void 0!==i&&(s.textElement.createChild("div","dt-checkbox-subtitle").textContent=i)),s}set backgroundColor(e){this.checkboxElement.classList.add("dt-checkbox-themed"),this.checkboxElement.style.backgroundColor=e}set checkColor(e){this.checkboxElement.classList.add("dt-checkbox-themed");const t=createElement("style");t.textContent="input.dt-checkbox-themed:checked:after { background-color: "+e+"}",this._shadowRoot.appendChild(t)}set borderColor(e){this.checkboxElement.classList.add("dt-checkbox-themed"),this.checkboxElement.style.borderColor=e}}class ui extends HTMLSpanElement{constructor(){super();const e=Ue(this,{enableLegacyPatching:!0,cssFile:void 0,delegatesFocus:void 0});this._iconElement=Ee.create(),this._iconElement.style.setProperty("margin-right","4px"),e.appendChild(this._iconElement),e.createChild("slot")}set type(e){this._iconElement.setIconType(e)}}let mi=0;class _i extends HTMLSpanElement{constructor(){super(),this.radioElement=this.createChild("input","dt-radio-button"),this.labelElement=this.createChild("label");const e="dt-radio-button-id"+ ++mi;this.radioElement.id=e,this.radioElement.type="radio",this.labelElement.htmlFor=e;Ue(this,{cssFile:"ui/radioButton.css",enableLegacyPatching:!0,delegatesFocus:void 0}).createChild("slot"),this.addEventListener("click",pi,!1)}}function pi(e){this.radioElement.checked||this.radioElement.disabled||(this.radioElement.checked=!0,this.radioElement.dispatchEvent(new Event("change")))}ve("span","dt-radio",_i),ve("span","dt-icon-label",ui);class gi extends HTMLSpanElement{constructor(){super();const e=Ue(this,{cssFile:"ui/slider.css",enableLegacyPatching:!0,delegatesFocus:void 0});this.sliderElement=document.createElement("input"),this.sliderElement.classList.add("dt-range-input"),this.sliderElement.type="range",e.appendChild(this.sliderElement)}set value(e){this.sliderElement.value=e}get value(){return this.sliderElement.value}}ve("span","dt-slider",gi);class bi extends HTMLSpanElement{constructor(){super();const e=Ue(this,{cssFile:"ui/smallBubble.css",enableLegacyPatching:!0,delegatesFocus:void 0});this._textElement=e.createChild("div"),this._textElement.className="info",this._textElement.createChild("slot")}set type(e){this._textElement.className=e}}ve("span","dt-small-bubble",bi);class fi extends HTMLDivElement{constructor(){super();const e=Ue(this,{cssFile:"ui/closeButton.css",enableLegacyPatching:!0,delegatesFocus:void 0});this._buttonElement=e.createChild("div","close-button"),de(this._buttonElement,ls`Close`),O(this._buttonElement);const t=Ee.create("smallicon-cross","default-icon");this._hoverIcon=Ee.create("mediumicon-red-cross-hover","hover-icon"),this._activeIcon=Ee.create("mediumicon-red-cross-active","active-icon"),this._buttonElement.appendChild(t),this._buttonElement.appendChild(this._hoverIcon),this._buttonElement.appendChild(this._activeIcon)}set gray(e){e?(this._hoverIcon.setIconType("mediumicon-gray-cross-hover"),this._activeIcon.setIconType("mediumicon-gray-cross-active")):(this._hoverIcon.setIconType("mediumicon-red-cross-hover"),this._activeIcon.setIconType("mediumicon-red-cross-active"))}setAccessibleName(e){de(this._buttonElement,e)}setTabbable(e){this._buttonElement.tabIndex=e?0:-1}}function vi(e,t,i,s){if(i<=10)return"";t.length>200&&(t=s(t,200));const n=wi(e,t);if(n<=i)return t;let o=0,r=t.length,a=0,l=n;for(;o<r&&a!==l&&a!==i;){const n=Math.ceil(o+(r-o)*(i-a)/(l-a)),h=wi(e,s(t,n));h<=i?(o=n,a=h):(r=n-1,l=h)}return"…"!==(t=s(t,o))?t:""}function wi(e,t){if(t.length>200)return e.measureText(t).width;let i=wi._textWidthCache;i||(i=new Map,wi._textWidthCache=i);const s=e.font;let n=i.get(s);n||(n=new Map,i.set(s,n));let o=n.get(t);return o||(o=e.measureText(t).width,n.set(t,o)),o}function Ei(e){return/(\?|&)utm_source=devtools/.test(e)?e:-1===e.indexOf("?")?e.replace(/^([^#]*)(#.*)?$/g,"$1?utm_source=devtools$2"):e.replace(/^([^#]*)(#.*)?$/g,"$1&utm_source=devtools$2")}function Si(e){return/(\/\/developers.google.com\/|\/\/web.dev\/)/.test(e)?Ei(e):e}function yi(e){return new Promise(t=>{const i=new Image;i.addEventListener("load",()=>t(i)),i.addEventListener("error",()=>t(null)),i.src=e})}ve("div","dt-close-button",fi);const xi=150;class Ci{render(e,t){}}Ci.render=async function(e,t){if(!e)throw new Error("Can't render "+e);const i=await o.Runtime.instance().extension(Ci,e).instance();return i?i.render(e,t||{}):null};var Ti=Object.freeze({__proto__:null,highlightedSearchResultClassName:"highlighted-search-result",highlightedCurrentSearchResultClassName:"current-search-result",installDragHandle:Dt,elementDragStart:At,isBeingEdited:function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;let t=e;if(t.classList.contains("text-prompt")||"INPUT"===t.nodeName||"TEXTAREA"===t.nodeName)return!0;if(!UI.__editingCount)return!1;for(;t;){if(t.__editing)return!0;t=t.parentElementOrShadowHost()}return!1},isEditing:Ot,markBeingEdited:Ft,StyleValueDelimiters:"  \t\n\"':;,/()",createReplacementString:Nt,handleElementValueModifications:function(e,t,i,s,n){const o="ArrowUp"===e.key||"ArrowDown"===e.key||"mousewheel"===e.type,r="PageUp"===e.key||"PageDown"===e.key;if(!o&&!r)return!1;const a=t.getComponentSelection();if(!a.rangeCount)return!1;const l=a.getRangeAt(0);if(!l.commonAncestorContainer.isSelfOrDescendant(t))return!1;const h=t.textContent,d=l.startContainer.rangeOfWord(l.startOffset,"  \t\n\"':;,/()",t),c=d.toString();if(s&&s(c))return!1;const u=Nt(c,e,n);if(u){const t=createTextNode(u);d.deleteContents(),d.insertNode(t);const s=document.createRange();return s.setStart(t,0),s.setEnd(t,u.length),a.removeAllRanges(),a.addRange(s),e.handled=!0,e.preventDefault(),i&&i(h,u),!0}return!1},_microsFormat:Ht,_subMillisFormat:Vt,_millisFormat:Ut,_secondsFormat:Kt,_minutesFormat:jt,_hoursFormat:qt,_daysFormat:Gt,formatLocalized:Xt,openLinkExternallyLabel:$t,copyLinkAddressLabel:Yt,anotherProfilerActiveLabel:function(){return t.UIString("Another profiler is already active")},asyncStackTraceLabel:function(e){return e?"Promise.resolve"===e?ls`Promise resolved (async)`:"Promise.reject"===e?ls`Promise rejected (async)`:ls`${e} (async)`:t.UIString("Async Call")},installComponentRootStyles:function(e){Ve(e),e.classList.add("platform-"+r.platform()),r.isMac()||0!==Ie(e.ownerDocument)||e.classList.add("overlay-scrollbar-enabled")},ElementFocusRestorer:Jt,highlightSearchResult:function(e,t,i,s){const n=ei(e,[new g.SourceRange(t,i)],s);return n.length?n[0]:null},highlightSearchResults:ei,runCSSAnimationOnce:function(e,t){e.classList.contains(t)&&e.classList.remove(t),e.addEventListener("webkitAnimationEnd",(function i(){e.classList.remove(t),e.removeEventListener("webkitAnimationEnd",i,!1)}),!1),e.classList.add(t)},highlightRangesWithStyleClass:ti,applyDomChanges:function(e){for(let t=0,i=e.length;t<i;++t){const i=e[t];switch(i.type){case"added":i.parent.insertBefore(i.node,i.nextSibling);break;case"changed":i.node.textContent=i.newText}}},revertDomChanges:function(e){for(let t=e.length-1;t>=0;--t){const i=e[t];switch(i.type){case"added":i.node.remove();break;case"changed":i.node.textContent=i.oldText}}},measurePreferredSize:ii,startBatchUpdate:function(){ni++||(oi=new si(!1))},endBatchUpdate:function(){--ni||(oi.scheduleInvoke(),oi=null)},invokeOnceAfterBatchUpdate:ri,animateFunction:function(e,t,i,s,n){const o=e.performance.now();let r=e.requestAnimationFrame((function a(l){const h=c.clamp((l-o)/s,0,1);t(...i.map(e=>e.from+(e.to-e.from)*h)),h<1?r=e.requestAnimationFrame(a):n&&n()}));return()=>e.cancelAnimationFrame(r)},LongClickController:ai,initializeUIUtils:function(e,t){e.body.classList.toggle("inactive",!e.hasFocus()),e.defaultView.addEventListener("focus",Qt.bind(UI,e),!1),e.defaultView.addEventListener("blur",Zt.bind(UI,e),!1),e.addEventListener("focus",He.bind(UI),!0),p.hasInstance()||p.instance({forceNew:!0,setting:t}),p.instance().applyTheme(e),Ne(e.body,"ui/inspectorStyle.css",{enableLegacyPatching:!0}),ot.setContainer(e.body)},beautifyFunctionName:function(e){return e||t.UIString("(anonymous)")},createTextChild:li,createTextChildren:(e,...t)=>{for(const i of t)li(e,i)},createTextButton:hi,createInput:di,createLabel:function(e,t,i){const s=document.createElement("label");return t&&(s.className=t),s.textContent=e,i&&A(s,i),s},createRadioLabel:function(e,t,i){const s=createElement("span","dt-radio");return s.radioElement.name=e,s.radioElement.checked=!!i,li(s.labelElement,t),s},createIconLabel:function(e,t){const i=createElement("span","dt-icon-label");return i.createChild("span").textContent=e,i.type=t,i},createSlider:function(e,t,i){const s=createElement("span","dt-slider");return s.sliderElement.min=e,s.sliderElement.max=t,s.sliderElement.step=1,s.sliderElement.tabIndex=i,s},CheckboxLabel:ci,DevToolsIconLabel:ui,DevToolsRadioButton:_i,DevToolsSmallBubble:bi,DevToolsCloseButton:fi,bindInput:function(e,t,i,s,n){return e.addEventListener("change",(function(){const{valid:s}=i(e.value);e.classList.toggle("error-input",!s),s&&t(e.value)}),!1),e.addEventListener("input",(function(){e.classList.toggle("error-input",!i(e.value))}),!1),e.addEventListener("keydown",(function(o){if(isEnterKey(o)){const{valid:s}=i(e.value);return s&&t(e.value),void o.preventDefault()}if(!s)return;const r=Wt(parseFloat(e.value),o,n),a=r?String(r):"",{valid:l}=i(a);if(!l||!r)return;e.value=a,t(e.value),o.preventDefault()}),!1),e.addEventListener("focus",e.select.bind(e),!1),function(t){if(t===e.value)return;const{valid:s}=i(t);e.classList.toggle("error-input",!s),e.value=t}},trimText:vi,trimTextMiddle:function(e,t,i){return vi(e,t,i,(e,t)=>e.trimMiddle(t))},trimTextEnd:function(e,t,i){return vi(e,t,i,(e,t)=>e.trimEndWithMaxLength(t))},measureTextWidth:wi,createDocumentationLink:function(e,t){return Mt.create("https://developers.google.com/web/tools/chrome-devtools/"+e,t)},createWebDevLink:function(e,t){return Mt.create("https://web.dev/"+e,t)},addReferrerToURL:Ei,addReferrerToURLIfNecessary:Si,loadImage:yi,loadImageFromData:function(e){return e?yi("data:image/jpg;base64,"+e):Promise.resolve(null)},createFileSelectorElement:function(e){const t=createElement("input");return t.type="file",t.style.display="none",t.setAttribute("tabindex",-1),t.onchange=function(i){e(t.files[0])},t},MaxLengthForDisplayedURLs:xi,MessageDialog:class{static async show(e,i){const s=new rn;s.setSizeBehavior(lt.MeasureContent),s.setDimmed(!0);const n=Ue(s.contentElement,{cssFile:"ui/confirmDialog.css",enableLegacyPatching:!0,delegatesFocus:void 0}).createChild("div","widget");await new Promise(o=>{const r=hi(t.UIString("OK"),o,"",!0);n.createChild("div","message").createChild("span").textContent=e,n.createChild("div","button").appendChild(r),s.setOutsideClickCallback(e=>{e.consume(),o()}),s.show(i),r.focus()}),s.hide()}},ConfirmDialog:class{static async show(e,t){const i=new rn;i.setSizeBehavior(lt.MeasureContent),i.setDimmed(!0),de(i.contentElement,e);const s=Ue(i.contentElement,{cssFile:"ui/confirmDialog.css",enableLegacyPatching:!0,delegatesFocus:void 0}).createChild("div","widget");s.createChild("div","message").createChild("span").textContent=e;const n=s.createChild("div","button"),o=await new Promise(e=>{const s=hi(ls`OK`,()=>e(!0),"",!0);n.appendChild(s),n.appendChild(hi(ls`Cancel`,()=>e(!1))),i.setOutsideClickCallback(t=>{t.consume(),e(!1)}),i.show(t),s.focus()});return i.hide(),o}},createInlineButton:function(e){const t=createElement("span"),i=Ue(t,{cssFile:"ui/inlineButton.css",enableLegacyPatching:!0,delegatesFocus:void 0});t.classList.add("inline-button");const s=new Ji("");return s.appendToolbarItem(e),i.appendChild(s.element),t},Renderer:Ci,formatTimestamp:function(e,t){const i=new Date(e),s=i.getFullYear()+"-"+o(i.getMonth()+1,2)+"-"+o(i.getDate(),2),n=o(i.getHours(),2)+":"+o(i.getMinutes(),2)+":"+o(i.getSeconds(),2)+"."+o(i.getMilliseconds(),3);return t?s+" "+n:n;function o(e,t){return String(e).padStart(t,"0")}},Options:void 0,HighlightChange:void 0,isScrolledToBottom:e=>Math.abs(e.scrollTop+e.clientHeight-e.scrollHeight)<=2,createSVGChild:function(e,t,i){const s=e.ownerDocument.createSVGElement(t,i);return e.appendChild(s),s}});const Ii=function(e,t,i,s){const n=ci.create(e);s&&(n.title=s);const o=n.checkboxElement;if(o.name=e,ki(o,t),i)return n;const r=document.createElement("p");return r.appendChild(n),r},ki=function(e,t){const i=e;function s(){i.checked!==t.get()&&(i.checked=t.get())}t.addChangeListener(s),s(),i.addEventListener("change",(function(){t.get()!==i.checked&&t.set(i.checked)}),!1)};o.RuntimeExtensionDescriptor;var Li=Object.freeze({__proto__:null,createSettingCheckbox:Ii,bindCheckbox:ki,createCustomSetting:function(e,t){const i=document.createElement("p"),s=i.createChild("fieldset"),n=s.createChild("label");return n.textContent=e,A(n,t),s.appendChild(t),i},createControlForSetting:function(e,i){const s=e.extension();if(!s)return null;const n=s.descriptor(),o=t.UIString(e.title()||"");switch(n.settingType){case"boolean":return Ii(o,e);case"enum":return Array.isArray(n.options)?function(e,i,s,n,o){const r=document.createElement("p"),a=r.createChild("label"),l=r.createChild("select","chrome-select");a.textContent=e,o&&(r.classList.add("chrome-select-label"),a.createChild("p").textContent=o),A(a,l);for(const e of i){const i=e.raw?e.text:t.UIString(e.text);l.add(new Option(i,e.value))}let h=null;return s&&(h=r.createChild("span","reload-warning hidden"),h.textContent=ls`${"*"}Requires reload`,R(h)),n.addChangeListener(d),d(),l.addEventListener("change",(function(){n.set(i[l.selectedIndex].value),h&&(h.classList.remove("hidden"),tn.instance().displayReloadRequiredWarning(ls`One or more settings have changed which requires a reload to take effect.`))}),!1),r;function d(){const e=n.get();for(let t=0;t<i.length;t++)i[t].value===e&&(l.selectedIndex=t)}}(o,n.options,n.reloadRequired,e,i):(console.error("Enum setting defined without options"),null);default:return console.error("Invalid setting type: "+n.settingType),null}},SettingUI:class{settingElement(){throw new Error("not implemented")}}});class Mi extends e.ObjectWrapper{constructor(e){super(),this._items=e||[]}[Symbol.iterator](){return this._items[Symbol.iterator]()}get length(){return this._items.length}at(e){return this._items[e]}every(e){return this._items.every(e)}filter(e){return this._items.filter(e)}find(e){return this._items.find(e)}findIndex(e){return this._items.findIndex(e)}indexOf(e,t){return this._items.indexOf(e,t)}insert(e,t){this._items.splice(e,0,t),this._replaced(e,[],1)}insertWithComparator(e,t){this.insert(this._items.lowerBound(e,t),e)}join(e){return this._items.join(e)}remove(e){const t=this._items[e];return this._items.splice(e,1),this._replaced(e,[t],0),t}replace(e,t){const i=this._items[e];return this._items[e]=t,this._replaced(e,[i],1),i}replaceRange(e,t,i){let s;if(i.length<1e4)s=this._items.splice(e,t-e,...i);else{s=this._items.slice(e,t);const n=this._items.slice(0,e),o=this._items.slice(t);this._items=[...n,...i,...o]}return this._replaced(e,s,i.length),s}replaceAll(e){const t=this._items.slice();return this._items=e,this._replaced(0,t,e.length),t}slice(e,t){return this._items.slice(e,t)}some(e){return this._items.some(e)}_replaced(e,t,i){this.dispatchEventToListeners(Pi.ItemsReplaced,{index:e,removed:t,inserted:i})}}const Pi={ItemsReplaced:Symbol("ItemsReplaced")};var Di=Object.freeze({__proto__:null,ListModel:Mi,Events:Pi});const Ai={NonViewport:Symbol("UI.ListMode.NonViewport"),EqualHeightItems:Symbol("UI.ListMode.EqualHeightItems"),VariousHeightItems:Symbol("UI.ListMode.VariousHeightItems")};class Ri{constructor(e,t,i){this.element=document.createElement("div"),this.element.style.overflowY="auto",this._topElement=this.element.createChild("div"),this._bottomElement=this.element.createChild("div"),this._firstIndex=0,this._lastIndex=0,this._renderedHeight=0,this._topHeight=0,this._bottomHeight=0,this._model=e,this._model.addEventListener(Pi.ItemsReplaced,this._replacedItemsInRange,this),this._itemToElement=new Map,this._selectedIndex=-1,this._selectedItem=null,this.element.tabIndex=-1,this.element.addEventListener("click",this._onClick.bind(this),!1),this.element.addEventListener("keydown",this._onKeyDown.bind(this),!1),X(this.element),this._delegate=t,this._mode=i||Ai.EqualHeightItems,this._fixedHeight=0,this._variableOffsets=new Int32Array(0),this._clearContents(),this._mode!==Ai.NonViewport&&this.element.addEventListener("scroll",()=>{this._updateViewport(this.element.scrollTop,this.element.offsetHeight)},!1)}setModel(e){this._itemToElement.clear();const t=this._model.length;this._model.removeEventListener(Pi.ItemsReplaced,this._replacedItemsInRange,this),this._model=e,this._model.addEventListener(Pi.ItemsReplaced,this._replacedItemsInRange,this),this.invalidateRange(0,t)}_replacedItemsInRange(e){const t=e.data,i=t.index,s=i+t.removed.length,n=this._selectedItem,o=n&&this._itemToElement.get(n)||null;for(let e=0;e<t.removed.length;e++)this._itemToElement.delete(t.removed[e]);if(this._invalidate(i,s,t.inserted),this._selectedIndex>=s)this._selectedIndex+=t.inserted-(s-i),this._selectedItem=this._model.at(this._selectedIndex);else if(this._selectedIndex>=i){let e=this._findFirstSelectable(i+t.inserted,1,!1);-1===e&&(e=this._findFirstSelectable(i-1,-1,!1)),this._select(e,n,o)}}refreshItem(e){const t=this._model.indexOf(e);-1!==t?this.refreshItemByIndex(t):console.error("Item to refresh is not present")}refreshItemByIndex(e){const t=this._model.at(e);this._itemToElement.delete(t),this.invalidateRange(e,e+1),-1!==this._selectedIndex&&this._select(this._selectedIndex,null,null)}refreshAllItems(){this._itemToElement.clear(),this.invalidateRange(0,this._model.length),-1!==this._selectedIndex&&this._select(this._selectedIndex,null,null)}invalidateRange(e,t){this._invalidate(e,t,t-e)}viewportResized(){if(this._mode===Ai.NonViewport)return;const e=this.element.scrollTop,t=this.element.offsetHeight;this._clearViewport(),this._updateViewport(c.clamp(e,0,this._totalHeight()-t),t)}invalidateItemHeight(){this._mode===Ai.EqualHeightItems?(this._fixedHeight=0,this._model.length&&(this._itemToElement.clear(),this._invalidate(0,this._model.length,this._model.length))):console.error("Only supported in equal height items mode")}itemForNode(e){for(;e&&e.parentNodeOrShadowHost()!==this.element;)e=e.parentNodeOrShadowHost();if(!e)return null;const t=e,i=this._model.findIndex(e=>this._itemToElement.get(e)===t);return-1!==i?this._model.at(i):null}scrollItemIntoView(e,t){const i=this._model.indexOf(e);-1!==i?this._scrollIntoView(i,t):console.error("Attempt to scroll onto missing item")}selectedItem(){return this._selectedItem}selectedIndex(){return this._selectedIndex}selectItem(e,t,i){let s=-1;if(null!==e){if(s=this._model.indexOf(e),-1===s)return void console.error("Attempt to select missing item");if(!this._delegate.isItemSelectable(e))return void console.error("Attempt to select non-selectable item")}-1===s||i||this._scrollIntoView(s,t),this._selectedIndex!==s&&this._select(s)}selectPreviousItem(e,t){if(-1===this._selectedIndex&&!e)return!1;let i=-1===this._selectedIndex?this._model.length-1:this._selectedIndex-1;return i=this._findFirstSelectable(i,-1,!!e),-1!==i&&(this._scrollIntoView(i,t),this._select(i),!0)}selectNextItem(e,t){if(-1===this._selectedIndex&&!e)return!1;let i=-1===this._selectedIndex?0:this._selectedIndex+1;return i=this._findFirstSelectable(i,1,!!e),-1!==i&&(this._scrollIntoView(i,t),this._select(i),!0)}selectItemPreviousPage(e){if(this._mode===Ai.NonViewport)return!1;let t=-1===this._selectedIndex?this._model.length-1:this._selectedIndex;return t=this._findPageSelectable(t,-1),-1!==t&&(this._scrollIntoView(t,e),this._select(t),!0)}selectItemNextPage(e){if(this._mode===Ai.NonViewport)return!1;let t=-1===this._selectedIndex?0:this._selectedIndex;return t=this._findPageSelectable(t,1),-1!==t&&(this._scrollIntoView(t,e),this._select(t),!0)}_scrollIntoView(e,t){if(this._mode===Ai.NonViewport)return void this._elementAtIndex(e).scrollIntoViewIfNeeded(!!t);const i=this._offsetAtIndex(e),s=this._offsetAtIndex(e+1),n=this.element.offsetHeight;if(t){const e=(i+s)/2-n/2;return void this._updateViewport(c.clamp(e,0,this._totalHeight()-n),n)}const o=this.element.scrollTop;i<o?this._updateViewport(i,n):s>o+n&&this._updateViewport(s-n,n)}_onClick(e){const t=this.itemForNode(e.target);t&&this._delegate.isItemSelectable(t)&&this.selectItem(t)}_onKeyDown(e){const t=e;let i=!1;switch(t.key){case"ArrowUp":i=this.selectPreviousItem(!0,!1);break;case"ArrowDown":i=this.selectNextItem(!0,!1);break;case"PageUp":i=this.selectItemPreviousPage(!1);break;case"PageDown":i=this.selectItemNextPage(!1)}i&&t.consume(!0)}_totalHeight(){return this._offsetAtIndex(this._model.length)}_indexAtOffset(e){if(this._mode===Ai.NonViewport)throw"There should be no offset conversions in non-viewport mode";return!this._model.length||e<0?0:this._mode===Ai.VariousHeightItems?Math.min(this._model.length-1,this._variableOffsets.lowerBound(e,void 0,0,this._model.length)):(this._fixedHeight||this._measureHeight(),Math.min(this._model.length-1,Math.floor(e/this._fixedHeight)))}_elementAtIndex(e){const t=this._model.at(e);let i=this._itemToElement.get(t);return i||(i=this._delegate.createElementForItem(t),this._itemToElement.set(t,i),this._updateElementARIA(i,e)),i}_refreshARIA(){for(let e=this._firstIndex;e<=this._lastIndex;e++){const t=this._model.at(e),i=this._itemToElement.get(t);i&&this._updateElementARIA(i,e)}}_updateElementARIA(e,t){J(e)||Y(e),_e(e,this._model.length),pe(e,t+1)}_offsetAtIndex(e){if(this._mode===Ai.NonViewport)throw new Error("There should be no offset conversions in non-viewport mode");return this._model.length?this._mode===Ai.VariousHeightItems?this._variableOffsets[e]:(this._fixedHeight||this._measureHeight(),e*this._fixedHeight):0}_measureHeight(){this._fixedHeight=this._delegate.heightForItem(this._model.at(0)),this._fixedHeight||(this._fixedHeight=ii(this._elementAtIndex(0),this.element).height)}_select(e,t,i){void 0===t&&(t=this._selectedItem),void 0===i&&(i=this._itemToElement.get(t)||null),this._selectedIndex=e,this._selectedItem=-1===e?null:this._model.at(e);const s=this._selectedItem,n=-1!==this._selectedIndex?this._elementAtIndex(e):null;this._delegate.selectedItemChanged(t,s,i,n),this._delegate.updateSelectedItemARIA(i,n)||(i&&re(i,!1),n&&re(n,!0),me(this.element,n))}_findFirstSelectable(e,t,i){const s=this._model.length;if(!s)return-1;for(let n=0;n<=s;n++){if(e<0||e>=s){if(!i)return-1;e=(e+s)%s}if(this._delegate.isItemSelectable(this._model.at(e)))return e;e+=t}return-1}_findPageSelectable(e,t){let i=-1;const s=this._offsetAtIndex(e),n=this.element.offsetHeight-1;for(;e>=0&&e<this._model.length;){if(this._delegate.isItemSelectable(this._model.at(e))){if(Math.abs(this._offsetAtIndex(e)-s)>=n)return e;i=e}e+=t}return i}_reallocateVariableOffsets(e,t){if(this._variableOffsets.length<e){const i=new Int32Array(Math.max(e,2*this._variableOffsets.length));i.set(this._variableOffsets.slice(0,t),0),this._variableOffsets=i}else if(this._variableOffsets.length>=2*e){const i=new Int32Array(e);i.set(this._variableOffsets.slice(0,t),0),this._variableOffsets=i}}_invalidate(e,t,i){if(this._mode===Ai.NonViewport)return void this._invalidateNonViewportMode(e,t-e,i);if(this._mode===Ai.VariousHeightItems){this._reallocateVariableOffsets(this._model.length+1,e+1);for(let t=e+1;t<=this._model.length;t++)this._variableOffsets[t]=this._variableOffsets[t-1]+this._delegate.heightForItem(this._model.at(t-1))}const s=this.element.offsetHeight,n=this._totalHeight(),o=this.element.scrollTop;if(this._renderedHeight<s||n<s)return this._clearViewport(),void this._updateViewport(c.clamp(o,0,n-s),s);const r=n-this._renderedHeight;if(t<=this._firstIndex){const s=this._topHeight+r;this._topElement.style.height=s+"px",this.element.scrollTop=o+r,this._topHeight=s,this._renderedHeight=n;const a=i-(t-e);return this._firstIndex+=a,void(this._lastIndex+=a)}if(e>=this._lastIndex){const e=this._bottomHeight+r;return this._bottomElement.style.height=e+"px",this._bottomHeight=e,void(this._renderedHeight=n)}this._clearViewport(),this._updateViewport(c.clamp(o,0,n-s),s),this._refreshARIA()}_invalidateNonViewportMode(e,t,i){let s=this._topElement;for(let t=0;t<e;t++)s=s.nextElementSibling;for(;t--;)s.nextElementSibling.remove();for(;i--;)this.element.insertBefore(this._elementAtIndex(e+i),s.nextElementSibling)}_clearViewport(){this._mode!==Ai.NonViewport?(this._firstIndex=0,this._lastIndex=0,this._renderedHeight=0,this._topHeight=0,this._bottomHeight=0,this._clearContents()):console.error("There should be no viewport updates in non-viewport mode")}_clearContents(){this._topElement.style.height="0",this._bottomElement.style.height="0",this.element.removeChildren(),this.element.appendChild(this._topElement),this.element.appendChild(this._bottomElement)}_updateViewport(e,t){if(this._mode===Ai.NonViewport)return void console.error("There should be no viewport updates in non-viewport mode");const i=this._totalHeight();if(!i)return this._firstIndex=0,this._lastIndex=0,this._topHeight=0,this._bottomHeight=0,this._renderedHeight=0,this._topElement.style.height="0",void(this._bottomElement.style.height="0");const s=this._indexAtOffset(e-t),n=this._indexAtOffset(e+2*t)+1;for(;this._firstIndex<Math.min(s,this._lastIndex);)this._elementAtIndex(this._firstIndex).remove(),this._firstIndex++;for(;this._lastIndex>Math.max(n,this._firstIndex);)this._elementAtIndex(this._lastIndex-1).remove(),this._lastIndex--;this._firstIndex=Math.min(this._firstIndex,n),this._lastIndex=Math.max(this._lastIndex,s);for(let e=this._firstIndex-1;e>=s;e--){const t=this._elementAtIndex(e);this.element.insertBefore(t,this._topElement.nextSibling)}for(let e=this._lastIndex;e<n;e++){const t=this._elementAtIndex(e);this.element.insertBefore(t,this._bottomElement)}this._firstIndex=s,this._lastIndex=n,this._topHeight=this._offsetAtIndex(s),this._topElement.style.height=this._topHeight+"px",this._bottomHeight=i-this._offsetAtIndex(n),this._bottomElement.style.height=this._bottomHeight+"px",this._renderedHeight=i,this.element.scrollTop=e}}var Oi=Object.freeze({__proto__:null,ListDelegate:class{createElementForItem(e){throw new Error("not implemented yet")}heightForItem(e){throw new Error("not implemented yet")}isItemSelectable(e){throw new Error("not implemented yet")}selectedItemChanged(e,t,i,s){}updateSelectedItemARIA(e,t){throw new Error("not implemented yet")}},ListMode:Ai,ListControl:Ri});class Fi{constructor(e,t){this._suggestBoxDelegate=e,this._maxItemsHeight=t,this._rowHeight=17,this._userEnteredText="",this._defaultSelectionIsDimmed=!1,this._onlyCompletion=null,this._items=new Mi,this._list=new Ri(this._items,this,Ai.EqualHeightItems),this._element=this._list.element,this._element.classList.add("suggest-box"),this._element.addEventListener("mousedown",e=>e.preventDefault(),!0),this._element.addEventListener("click",this._onClick.bind(this),!1),this._glassPane=new ot,this._glassPane.setAnchorBehavior(at.PreferBottom),this._glassPane.setOutsideClickCallback(this.hide.bind(this));Ue(this._glassPane.contentElement,{cssFile:"ui/suggestBox.css",enableLegacyPatching:!0,delegatesFocus:void 0}).appendChild(this._element)}visible(){return this._glassPane.isShowing()}setPosition(e){this._glassPane.setContentAnchorBox(e)}setAnchorBehavior(e){this._glassPane.setAnchorBehavior(e)}_updateMaxSize(e){const t=this._maxWidth(e),i=(this._maxItemsHeight?Math.min(this._maxItemsHeight,e.length):e.length)*this._rowHeight;this._glassPane.setMaxContentSize(new Fe(t,i))}_maxWidth(e){if(!e.length)return 300;let t,i=-1/0;for(let s=0;s<e.length;s++){const n=(e[s].title||e[s].text).length+(e[s].subtitle||"").length;n>i&&(i=n,t=e[s])}const s=ii(this.createElementForItem(t),this._element).width+Ie(this._element.ownerDocument);return Math.min(300,s)}_show(){if(this.visible())return;this._glassPane.show(document);this._rowHeight=ii(this.createElementForItem({text:"1",subtitle:"12"}),this._element).height}hide(){this.visible()&&this._glassPane.hide()}_applySuggestion(e){if(this._onlyCompletion)return be(ls`${this._onlyCompletion.text}, suggestion`,this._element),this._suggestBoxDelegate.applySuggestion(this._onlyCompletion,e),!0;const t=this._list.selectedItem();return t&&t.text&&be(ls`${t.title||t.text}, suggestion`,this._element),this._suggestBoxDelegate.applySuggestion(t,e),this.visible()&&!!t}acceptSuggestion(){const e=this._applySuggestion();return this.hide(),!!e&&(this._suggestBoxDelegate.acceptSuggestion(),!0)}createElementForItem(e){const t=this._userEnteredText,i=document.createElement("div");if(i.classList.add("suggest-box-content-item"),i.classList.add("source-code"),e.iconType){const t=Ee.create(e.iconType,"suggestion-icon");i.appendChild(t)}e.isSecondary&&i.classList.add("secondary"),i.tabIndex=-1;const s=50+t.length,n=(e.title||e.text).trim().trimEndWithMaxLength(s).replace(/\n/g,"↵"),o=i.createChild("span","suggestion-title"),r=n.toLowerCase().indexOf(t.toLowerCase());if(r>0&&(o.createChild("span").textContent=n.substring(0,r)),r>-1&&(o.createChild("span","query").textContent=n.substring(r,r+t.length)),o.createChild("span").textContent=n.substring(r>-1?r+t.length:0),o.createChild("span","spacer"),e.subtitleRenderer){const t=e.subtitleRenderer.call(null);t.classList.add("suggestion-subtitle"),i.appendChild(t)}else if(e.subtitle){i.createChild("span","suggestion-subtitle").textContent=e.subtitle.trimEndWithMaxLength(s-n.length)}return e.iconElement&&i.appendChild(e.iconElement),i}heightForItem(e){return this._rowHeight}isItemSelectable(e){return!0}selectedItemChanged(e,t,i,s){i&&i.classList.remove("selected","force-white-icons"),s&&(s.classList.add("selected"),s.classList.add("force-white-icons")),this._applySuggestion(!0)}updateSelectedItemARIA(e,t){return!1}_onClick(e){const t=this._list.itemForNode(e.target);t&&(this._list.selectItem(t),this.acceptSuggestion(),e.consume(!0))}_canShowBox(e,t,i,s){return!(!e||!e.length)&&(e.length>1||(!(t&&!t.isSecondary&&t.text.startsWith(s))||i&&t.text!==s))}updateSuggestions(e,t,i,s,n){this._onlyCompletion=null;const o=i?t.reduce((e,t)=>(e.priority||0)>=(t.priority||0)?e:t):null;this._canShowBox(t,o,s,n)?(this._userEnteredText=n,this._show(),this._updateMaxSize(t),this._glassPane.setContentAnchorBox(e),this._list.invalidateItemHeight(),this._items.replaceAll(t),o&&!o.isSecondary?this._list.selectItem(o,!0):this._list.selectItem(null)):(1===t.length&&(this._onlyCompletion=t[0],this._applySuggestion(!0)),this.hide())}keyPressed(e){switch(e.key){case"Enter":return this.enterKeyPressed();case"ArrowUp":return this._list.selectPreviousItem(!0,!1);case"ArrowDown":return this._list.selectNextItem(!0,!1);case"PageUp":return this._list.selectItemPreviousPage(!1);case"PageDown":return this._list.selectItemNextPage(!1)}return!1}enterKeyPressed(){const e=!!this._list.selectedItem()||!!this._onlyCompletion;return this.acceptSuggestion(),e}}var Bi=Object.freeze({__proto__:null,SuggestBoxDelegate:class{applySuggestion(e,t){}acceptSuggestion(){}},SuggestBox:Fi,Suggestion:void 0,Suggestions:void 0,AutocompleteConfig:void 0});class zi extends e.ObjectWrapper{constructor(){super(),this._proxyElement,this._proxyElementDisplay="inline-block",this._autocompletionTimeout=Wi,this._title="",this._queryRange=null,this._previousText="",this._currentSuggestion=null,this._completionRequestId=0,this._ghostTextElement=document.createElement("span"),this._ghostTextElement.classList.add("auto-complete-text"),this._ghostTextElement.setAttribute("contenteditable","false"),this._leftParenthesesIndices=[],Q(this._ghostTextElement)}initialize(e,t){this._loadCompletions=e,this._completionStopCharacters=t||" =:[({;,!+-*/&|^<>."}setAutocompletionTimeout(e){this._autocompletionTimeout=e}renderAsBlock(){this._proxyElementDisplay="block"}attach(e){return this._attachInternal(e)}attachAndStartEditing(e,t){const i=this._attachInternal(e);return this._startEditing(t),i}_attachInternal(e){if(this._proxyElement)throw"Cannot attach an attached TextPrompt";return this._element=e,this._boundOnKeyDown=this.onKeyDown.bind(this),this._boundOnInput=this.onInput.bind(this),this._boundOnMouseWheel=this.onMouseWheel.bind(this),this._boundClearAutocomplete=this.clearAutocomplete.bind(this),this._proxyElement=e.ownerDocument.createElement("span"),Ne(this._proxyElement,"ui/textPrompt.css",{enableLegacyPatching:!0}),this._contentElement=this._proxyElement.createChild("div","text-prompt-root"),this._proxyElement.style.display=this._proxyElementDisplay,e.parentElement.insertBefore(this._proxyElement,e),this._contentElement.appendChild(e),this._element.classList.add("text-prompt"),K(this._element),this._element.setAttribute("contenteditable","plaintext-only"),this._element.addEventListener("keydown",this._boundOnKeyDown,!1),this._element.addEventListener("input",this._boundOnInput,!1),this._element.addEventListener("mousewheel",this._boundOnMouseWheel,!1),this._element.addEventListener("selectstart",this._boundClearAutocomplete,!1),this._element.addEventListener("blur",this._boundClearAutocomplete,!1),this._suggestBox=new Fi(this,20),this._title&&(this._proxyElement.title=this._title),this._proxyElement}detach(){this._removeFromElement(),this._focusRestorer.restore(),this._proxyElement.parentElement.insertBefore(this._element,this._proxyElement),this._proxyElement.remove(),delete this._proxyElement,this._element.classList.remove("text-prompt"),this._element.removeAttribute("contenteditable"),this._element.removeAttribute("role")}textWithCurrentSuggestion(){const e=this.text();if(!this._queryRange||!this._currentSuggestion)return e;const t=this._currentSuggestion.text;return e.substring(0,this._queryRange.startColumn)+t+e.substring(this._queryRange.endColumn)}text(){let e=this._element.textContent;if(this._ghostTextElement.parentNode){const t=this._ghostTextElement.textContent;e=e.substring(0,e.length-t.length)}return e}setText(e){this.clearAutocomplete(),this._element.textContent=e,this._previousText=this.text(),this._element.hasFocus()&&(this.moveCaretToEndOfPrompt(),this._element.scrollIntoView())}setSelectedRange(e,t){if(e<0)throw new RangeError("Selected range start must be a nonnegative integer");t>this._element.textContent.length&&(t=this._element.textContent.length),t<e&&(t=e);const i=this._element.childNodes[0],s=new Range;s.setStart(i,e),s.setEnd(i,t);const n=window.getSelection();n.removeAllRanges(),n.addRange(s)}focus(){this._element.focus()}title(){return this._title}setTitle(e){this._title=e,this._proxyElement&&(this._proxyElement.title=e)}setPlaceholder(e,t){e?(this._element.setAttribute("data-placeholder",e),ee(this._element,t||e)):(this._element.removeAttribute("data-placeholder"),ee(this._element,null))}setEnabled(e){e?this._element.setAttribute("contenteditable","plaintext-only"):this._element.removeAttribute("contenteditable"),this._element.classList.toggle("disabled",!e)}_removeFromElement(){this.clearAutocomplete(),this._element.removeEventListener("keydown",this._boundOnKeyDown,!1),this._element.removeEventListener("input",this._boundOnInput,!1),this._element.removeEventListener("selectstart",this._boundClearAutocomplete,!1),this._element.removeEventListener("blur",this._boundClearAutocomplete,!1),this._isEditing&&this._stopEditing(),this._suggestBox&&this._suggestBox.hide()}_startEditing(e){this._isEditing=!0,this._contentElement.classList.add("text-prompt-editing"),this._focusRestorer=new Jt(this._element),e&&(this._blurListener=e,this._element.addEventListener("blur",this._blurListener,!1)),this._oldTabIndex=this._element.tabIndex,this._element.tabIndex<0&&(this._element.tabIndex=0),this.text()||this.autoCompleteSoon()}_stopEditing(){this._element.tabIndex=this._oldTabIndex,this._blurListener&&this._element.removeEventListener("blur",this._blurListener,!1),this._contentElement.classList.remove("text-prompt-editing"),delete this._isEditing}onMouseWheel(e){}onKeyDown(e){let t=!1;if(this.isSuggestBoxVisible()&&this._suggestBox.keyPressed(e))e.consume(!0);else{switch(e.key){case"Tab":t=this.tabKeyPressed(e);break;case"ArrowLeft":case"ArrowUp":case"PageUp":case"Home":this.clearAutocomplete();break;case"PageDown":case"ArrowRight":case"ArrowDown":case"End":this._isCaretAtEndOfPrompt()?t=this.acceptAutoComplete():this.clearAutocomplete();break;case"Escape":this.isSuggestBoxVisible()&&(this.clearAutocomplete(),t=!0);break;case" ":!e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||(this.autoCompleteSoon(!0),t=!0)}isEnterKey(e)&&e.preventDefault(),t&&e.consume(!0)}}_acceptSuggestionOnStopCharacters(e){if(!this._currentSuggestion||!this._queryRange||1!==e.length||!this._completionStopCharacters.includes(e))return!1;const t=this.text().substring(this._queryRange.startColumn,this._queryRange.endColumn);return!(!t||!this._currentSuggestion.text.startsWith(t+e))&&(this._queryRange.endColumn+=1,this.acceptAutoComplete())}onInput(e){let t=this.text();const i=e.data;"insertFromPaste"===e.inputType&&t.includes("\n")&&(t=u.stripLineBreaks(t),this.setText(t));const s=this._getCaretPosition();if(")"===i&&s>=0&&this._leftParenthesesIndices.length>0){if(")"===t[s]&&this._tryMatchingLeftParenthesis(s))return t=t.substring(0,s)+t.substring(s+1),void this.setText(t)}if(i&&!this._acceptSuggestionOnStopCharacters(i)){const e=t.startsWith(this._previousText)||this._previousText.startsWith(t);this._queryRange&&e&&(this._queryRange.endColumn+=t.length-this._previousText.length)}this._refreshGhostText(),this._previousText=t,this.dispatchEventToListeners(Ni.TextChanged),this.autoCompleteSoon()}acceptAutoComplete(){let e=!1;return this.isSuggestBoxVisible()&&(e=this._suggestBox.acceptSuggestion()),e||(e=this._acceptSuggestionInternal()),e&&this.autoCompleteSoon(),e}clearAutocomplete(){const e=this.textWithCurrentSuggestion();this.isSuggestBoxVisible()&&this._suggestBox.hide(),this._clearAutocompleteTimeout(),this._queryRange=null,this._refreshGhostText(),e!==this.textWithCurrentSuggestion()&&this.dispatchEventToListeners(Ni.TextChanged)}_refreshGhostText(){this._currentSuggestion&&this._currentSuggestion.hideGhostText?this._ghostTextElement.remove():this._queryRange&&this._currentSuggestion&&this._isCaretAtEndOfPrompt()&&this._currentSuggestion.text.startsWith(this.text().substring(this._queryRange.startColumn))?(this._ghostTextElement.textContent=this._currentSuggestion.text.substring(this._queryRange.endColumn-this._queryRange.startColumn),this._element.appendChild(this._ghostTextElement)):this._ghostTextElement.remove()}_clearAutocompleteTimeout(){this._completeTimeout&&(clearTimeout(this._completeTimeout),delete this._completeTimeout),this._completionRequestId++}autoCompleteSoon(e){const t=this.isSuggestBoxVisible()||e;this._completeTimeout||(this._completeTimeout=setTimeout(this.complete.bind(this,e),t?0:this._autocompletionTimeout))}async complete(e){this._clearAutocompleteTimeout();const t=this._element.getComponentSelection(),i=t&&t.rangeCount?t.getRangeAt(0):null;if(!i)return;let s;if((e||this._isCaretAtEndOfPrompt()||this.isSuggestBoxVisible())&&t.isCollapsed||(s=!0),s)return void this.clearAutocomplete();const n=i.startContainer.rangeOfWord(i.startOffset,this._completionStopCharacters,this._element,"backward"),o=n.cloneRange();o.collapse(!0),o.setStartBefore(this._element);const r=++this._completionRequestId,a=await this._loadCompletions(o.toString(),n.toString(),!!e);this._completionsReady(r,t,n,!!e,a)}disableDefaultSuggestionForEmptyInput(){this._disableDefaultSuggestionForEmptyInput=!0}_boxForAnchorAtStart(e,t){const i=e.getRangeAt(0).cloneRange(),s=createElement("span");s.textContent="​",t.insertNode(s);const n=s.boxInWindow(window);return s.remove(),e.removeAllRanges(),e.addRange(i),n}_createRange(){return document.createRange()}additionalCompletions(e){return[]}_completionsReady(e,t,i,s,n){if(this._completionRequestId!==e)return;const o=i.toString(),r=new Set;if(n=n.filter(e=>!r.has(e.text)&&!!r.add(e.text)),(o||s)&&(n=o?n.concat(this.additionalCompletions(o)):this.additionalCompletions(o).concat(n)),!n.length)return void this.clearAutocomplete();const a=t.getRangeAt(0),l=this._createRange();if(l.setStart(i.startContainer,i.startOffset),l.setEnd(a.endContainer,a.endOffset),o+a.toString()!==l.toString())return;const h=this._createRange();h.setStart(this._element,0),h.setEnd(l.startContainer,l.startOffset),this._queryRange=new TextUtils.TextRange(0,h.toString().length,0,h.toString().length+l.toString().length);const d=!this._disableDefaultSuggestionForEmptyInput||!!this.text();this._suggestBox&&this._suggestBox.updateSuggestions(this._boxForAnchorAtStart(t,l),n,d,!this._isCaretAtEndOfPrompt(),this.text())}applySuggestion(e,t){this._currentSuggestion=e,this._refreshGhostText(),t&&this.dispatchEventToListeners(Ni.TextChanged)}acceptSuggestion(){this._acceptSuggestionInternal()}_acceptSuggestionInternal(){if(!this._queryRange)return!1;const e=this._currentSuggestion?this._currentSuggestion.text.length:0,t=this._currentSuggestion?this._currentSuggestion.selectionRange:null,i=t?t.endColumn:e,s=t?t.startColumn:e;return this._element.textContent=this.textWithCurrentSuggestion(),this.setDOMSelection(this._queryRange.startColumn+s,this._queryRange.startColumn+i),this._updateLeftParenthesesIndices(),this.clearAutocomplete(),this.dispatchEventToListeners(Ni.TextChanged),!0}setDOMSelection(e,t){this._element.normalize();const i=this._element.childNodes[0];if(!i||i===this._ghostTextElement)return;const s=this._createRange();s.setStart(i,e),s.setEnd(i,t);const n=this._element.getComponentSelection();n.removeAllRanges(),n.addRange(s)}isSuggestBoxVisible(){return this._suggestBox&&this._suggestBox.visible()}isCaretInsidePrompt(){const e=this._element.getComponentSelection(),t=e&&e.rangeCount?e.getRangeAt(0):null;return!(!t||!e.isCollapsed)&&t.startContainer.isSelfOrDescendant(this._element)}_isCaretAtEndOfPrompt(){const e=this._element.getComponentSelection(),t=e&&e.rangeCount?e.getRangeAt(0):null;if(!t||!e.isCollapsed)return!1;let i=t.startContainer;if(!i.isSelfOrDescendant(this._element))return!1;if(this._ghostTextElement.isAncestor(i))return!0;if(i.nodeType===Node.TEXT_NODE&&t.startOffset<i.nodeValue.length)return!1;let s=!1;for(;i;){if(i.nodeType===Node.TEXT_NODE&&i.nodeValue.length){if(s&&!this._ghostTextElement.isAncestor(i))return!1;s=!0}i=i.traverseNextNode(this._element)}return!0}moveCaretToEndOfPrompt(){const e=this._element.getComponentSelection(),t=this._createRange();let i=this._element;for(;i.childNodes.length;)i=i.lastChild;const s=i.nodeType===Node.TEXT_NODE?i.textContent.length:0;t.setStart(i,s),t.setEnd(i,s),e.removeAllRanges(),e.addRange(t)}_getCaretPosition(){if(!this._element.hasFocus())return-1;const e=this._element.getComponentSelection(),t=e&&e.rangeCount?e.getRangeAt(0):null;return t&&e.isCollapsed?t.startOffset!==t.endOffset?-1:t.startOffset:-1}tabKeyPressed(e){return this.acceptAutoComplete()}proxyElementForTests(){return this._proxyElement||null}_tryMatchingLeftParenthesis(e){const t=this._leftParenthesesIndices;if(0===t.length||e<0)return!1;for(let i=t.length-1;i>=0;--i)if(t[i]<e)return t.splice(i,1),!0;return!1}_updateLeftParenthesesIndices(){const e=this.text(),t=this._leftParenthesesIndices=[];for(let i=0;i<e.length;++i)"("===e[i]&&t.push(i)}}const Wi=250,Ni={TextChanged:Symbol("TextChanged")};var Hi=Object.freeze({__proto__:null,TextPrompt:zi,Events:Ni});let Vi;class Ui extends e.ObjectWrapper{constructor(e,t){super(),this._frontendHost=t,this._zoomFactor=this._frontendHost.zoomFactor(),e.addEventListener("resize",this._onWindowResize.bind(this),!0)}static instance(e={forceNew:null,win:null,frontendHost:null}){const{forceNew:t,win:i,frontendHost:s}=e;if(!Vi||t){if(!i||!s)throw new Error("Unable to create zoom manager: window and frontendHost must be provided: "+(new Error).stack);Vi=new Ui(i,s)}return Vi}zoomFactor(){return this._zoomFactor}cssToDIP(e){return e*this._zoomFactor}dipToCSS(e){return e/this._zoomFactor}_onWindowResize(){const e=this._zoomFactor;this._zoomFactor=this._frontendHost.zoomFactor(),e!==this._zoomFactor&&this.dispatchEventToListeners(Ki.ZoomChanged,{from:e,to:this._zoomFactor})}}const Ki={ZoomChanged:Symbol("ZoomChanged")};var ji=Object.freeze({__proto__:null,ZoomManager:Ui,Events:Ki});class qi{constructor(e){this.element=e.body.createChild("div"),this._shadowRoot=Ue(this.element,{cssFile:"ui/tooltip.css",enableLegacyPatching:!0,delegatesFocus:void 0}),this._tooltipElement=this._shadowRoot.createChild("div","tooltip"),e.addEventListener("mousemove",this._mouseMove.bind(this),!0),e.addEventListener("mousedown",this._hide.bind(this,!0),!0),e.addEventListener("mouseleave",this._hide.bind(this,!1),!0),e.addEventListener("keydown",this._hide.bind(this,!0),!0),e[Xi]=this,Ui.instance().addEventListener(Ki.ZoomChanged,this._reset,this),e.defaultView.addEventListener("resize",this._reset.bind(this),!1)}static installHandler(e){new qi(e)}static install(e,t,i,s){if(!t)return void delete e[Xi];let n;e[Xi]={content:t,actionId:i,options:s||{}},e.addEventListener("focus",t=>{const i=e.ownerDocument[Xi];i&&(n=setTimeout(()=>{e.matches(":focus-visible")&&i._show(e,t),n=null},Gi.OpeningDelay))}),e.addEventListener("blur",()=>{n&&(clearTimeout(n),n=null);const t=e.ownerDocument[Xi];t&&t._hide()})}static addNativeOverrideContainer(e){Yi.push(e)}_mouseMove(e){const t=e,i=t.composedPath();if(i&&0===t.buttons&&(0!==t.movementX||0!==t.movementY)){this._anchorElement&&-1===i.indexOf(this._anchorElement)&&this._hide(!1);for(const e of i){if(e===this._anchorElement)return;if(e instanceof Element&&null!==e.offsetParent&&e[Xi])return void this._show(e,t)}}}_reposition(e,t){this._tooltipElement.positionAt(0,0);const i=ot.container(e.ownerDocument).boxInWindow(this.element.window()),s=this._anchorElement.boxInWindow(this.element.window());this._tooltipElement.classList.toggle("tooltip-breakword",!this._tooltipElement.textContent.match("\\s")),this._tooltipElement.style.maxWidth=i.width-4+"px",this._tooltipElement.style.maxHeight="";const n=this._tooltipElement.offsetWidth,o=this._tooltipElement.offsetHeight,r=this._anchorTooltipAtElement()||void 0===t.x;let a,l=r?s.x:t.x+10;if(l=c.clamp(l,i.x+2,i.x+i.width-n-2),r){a=s.y+2+s.height+o<i.y+i.height?s.y+s.height+2:s.y-o-2}else a=t.y+10+o<i.y+i.height?t.y+10:t.y-o-1;this._tooltipElement.positionAt(l,a)}_anchorTooltipAtElement(){const e=this._anchorElement[Xi];return void 0!==e.options.anchorTooltipAtElement?e.options.anchorTooltipAtElement:"BUTTON"===this._anchorElement.nodeName||"LABEL"===this._anchorElement.nodeName}_show(e,t){const i=e[Xi];if(this._anchorElement=e,this._tooltipElement.removeChildren(),this._shouldUseNativeTooltips())return Object.defineProperty(this._anchorElement,"title",Qi),void(this._anchorElement.title=i.content);if("string"==typeof i.content?this._tooltipElement.setTextContentTruncatedIfNeeded(i.content):this._tooltipElement.appendChild(i.content),i.actionId){const e=dn.instance().shortcutsForAction(i.actionId);for(const t of e){this._tooltipElement.createChild("div","tooltip-shortcut").textContent=t.title()}}const s=Date.now(),n=this._tooltipLastClosed&&s-this._tooltipLastClosed<Gi.InstantThreshold;this._tooltipElement.classList.toggle("instant",n),this._tooltipLastOpened=n?s:s+Gi.OpeningDelay,this._reposition(e,t),this._tooltipElement.classList.add("shown")}_shouldUseNativeTooltips(){for(const e of Yi)if(this._anchorElement.isSelfOrDescendant(e))return!0;return!1}_hide(e){delete this._anchorElement,this._tooltipElement.classList.remove("shown"),Date.now()>this._tooltipLastOpened&&(this._tooltipLastClosed=Date.now()),e&&delete this._tooltipLastClosed}_reset(){this._hide(!0),this._tooltipElement.positionAt(0,0),this._tooltipElement.style.maxWidth="0",this._tooltipElement.style.maxHeight="0"}}const Gi={InstantThreshold:300,OpeningDelay:600},Xi=Symbol("Tooltip"),$i=Xi,Yi=[],Qi=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"title");Object.defineProperty(HTMLElement.prototype,"title",{get:function(){const e=this[Xi];return e?e.content:""},set:function(e){qi.install(this,e)}});var Zi=Object.freeze({__proto__:null,Tooltip:qi,TooltipOptions:void 0,TooltipSymbol:$i});class Ji{constructor(e,t){this._items=[],this.element=t?t.createChild("div"):createElement("div"),this.element.className=e,this.element.classList.add("toolbar"),this._enabled=!0,this._shadowRoot=Ue(this.element,{cssFile:"ui/toolbar.css",enableLegacyPatching:!0,delegatesFocus:void 0}),this._contentElement=this._shadowRoot.createChild("div","toolbar-shadow"),this._insertionPoint=this._contentElement.createChild("slot")}static createLongPressActionButton(e,t,i){const s=Ji.createActionButton(e),n=Ji.createActionButton(e);let o=null,r=null,a=null;return e.addEventListener(C.Toggled,l),l(),s;function l(){const n=e.toggled()?t||null:i||null;n&&n.length?o||(o=new ai(s.element,h),a=Ee.create("largeicon-longclick-triangle","long-click-glyph"),s.element.appendChild(a),r=n):o&&(o.dispose(),o=null,a.remove(),a=null,r=null)}function h(){let e=r.slice();e.push(n);const t=s.element.ownerDocument;t.documentElement.addEventListener("mouseup",(function s(n){if(1!==n.which)return;i.hide(),t.documentElement.removeEventListener("mouseup",s,!1);for(let t=0;t<e.length;++t)if(e[t].element.classList.contains("emulate-active")){e[t].element.classList.remove("emulate-active"),e[t]._clicked(n);break}}),!1);const i=new ot;i.setPointerEventsBehavior(rt.BlockedByGlassPane),i.show(t);const o=new Ji("fill",i.contentElement);o._contentElement.classList.add("floating");const a=s.element.boxInWindow().relativeToElement(ot.container(t)),l=a.y+26*e.length<t.documentElement.offsetHeight;l&&(e=e.reverse()),o.element.style.height=26*e.length+"px",o.element.style.top=l?a.y-5+"px":a.y-26*(e.length-1)-6+"px",o.element.style.left=a.x-5+"px";for(let t=0;t<e.length;++t)e[t].element.addEventListener("mousemove",d,!1),e[t].element.addEventListener("mouseout",c,!1),o.appendToolbarItem(e[t]);const h=l?0:e.length-1;function d(e){if(1!==e.which)return;e.target.enclosingNodeOrSelfWithClass("toolbar-item").classList.add("emulate-active")}function c(e){if(1!==e.which)return;e.target.enclosingNodeOrSelfWithClass("toolbar-item").classList.remove("emulate-active")}e[h].element.classList.add("emulate-active")}}static createActionButton(e,t=es){const i=e.toggleable()?function(){const t=new os(e.title(),e.icon(),e.toggledIcon());return t.setToggleWithRedColor(e.toggleWithRedColor()),e.addEventListener(C.Toggled,i),i(),t;function i(){t.setToggled(e.toggled()),e.title()&&(t.setTitle(e.title()),qi.install(t.element,e.title(),e.id(),{anchorTooltipAtElement:!0}))}}():function(){const t=new ss(e.title(),e.icon());e.title()&&qi.install(t.element,e.title(),e.id(),{anchorTooltipAtElement:!0});return t}();t.showLabel&&i.setText(e.title());let s=t=>{e.execute()};if(t.userActionCode){const i=t.userActionCode;s=()=>{l.actionTaken(i),e.execute()}}return i.addEventListener(ss.Events.Click,s,e),e.addEventListener(C.Enabled,(function(e){i.setEnabled(e.data)})),i.setEnabled(e.enabled()),i}static createActionButtonForId(e,t=es){const i=L.instance().action(e);return Ji.createActionButton(i,t)}gripElementForResize(){return this._contentElement}makeWrappable(e){this._contentElement.classList.add("wrappable"),e&&this._contentElement.classList.add("toolbar-grow-vertical")}makeVertical(){this._contentElement.classList.add("vertical")}makeBlueOnHover(){this._contentElement.classList.add("toolbar-blue-on-hover")}makeToggledGray(){this._contentElement.classList.add("toolbar-toggled-gray")}renderAsLinks(){this._contentElement.classList.add("toolbar-render-as-links")}empty(){return!this._items.length}setEnabled(e){this._enabled=e;for(const e of this._items)e._applyEnabledState(this._enabled&&e._enabled)}appendToolbarItem(e){this._items.push(e),e._toolbar=this,this._enabled||e._applyEnabledState(!1),this._contentElement.insertBefore(e.element,this._insertionPoint),this._hideSeparatorDupes()}appendSeparator(){this.appendToolbarItem(new hs)}appendSpacer(){this.appendToolbarItem(new hs(!0))}appendText(e){this.appendToolbarItem(new is(e))}removeToolbarItems(){for(const e of this._items)delete e._toolbar;this._items=[],this._contentElement.removeChildren(),this._insertionPoint=this._contentElement.createChild("slot")}setColor(e){const t=createElement("style");t.textContent=".toolbar-glyph { background-color: "+e+" !important }",this._shadowRoot.appendChild(t)}setToggledColor(e){const t=createElement("style");t.textContent=".toolbar-button.toolbar-state-on .toolbar-glyph { background-color: "+e+" !important }",this._shadowRoot.appendChild(t)}_hideSeparatorDupes(){if(!this._items.length)return;let e,t=!1,i=!1;for(let s=0;s<this._items.length;++s)this._items[s]instanceof hs?(this._items[s].setVisible(!t),t=!0,e=this._items[s]):this._items[s].visible()&&(t=!1,e=null,i=!0);e&&e!==this._items.peekLast()&&e.setVisible(!1),this.element.classList.toggle("hidden",!!e&&e.visible()&&!i)}async appendItemsAtLocation(e){const t=o.Runtime.instance().extensions(ds).filter(t=>t.descriptor().location===e);(await Promise.all(t.map(e=>{const t=e.descriptor();return t.separator?new hs:t.actionId?Ji.createActionButtonForId(t.actionId,t.showLabel):e.instance().then(e=>e.item())}))).filter(e=>e).forEach(e=>this.appendToolbarItem(e))}}const es={showLabel:!1,userActionCode:void 0};class ts extends e.ObjectWrapper{constructor(e){super(),this.element=e,this.element.classList.add("toolbar-item"),this._visible=!0,this._enabled=!0}setTitle(e,t){this._title!==e&&(this._title=e,de(this.element,e),qi.install(this.element,e,t,{anchorTooltipAtElement:!0}))}setEnabled(e){this._enabled!==e&&(this._enabled=e,this._applyEnabledState(this._enabled&&(!this._toolbar||this._toolbar._enabled)))}_applyEnabledState(e){this.element.disabled=!e}visible(){return this._visible}setVisible(e){this._visible!==e&&(this.element.classList.toggle("hidden",!e),this._visible=e,!this._toolbar||this instanceof hs||this._toolbar._hideSeparatorDupes())}setRightAligned(e){this.element.classList.toggle("toolbar-item-right-aligned",e)}}class is extends ts{constructor(e){const t=document.createElement("div");t.classList.add("toolbar-text"),super(t),this.element.classList.add("toolbar-text"),this.setText(e||"")}text(){return this.element.textContent}setText(e){this.element.textContent=e}}class ss extends ts{constructor(e,t,i){const s=document.createElement("button");s.classList.add("toolbar-button"),super(s),this.element.addEventListener("click",this._clicked.bind(this),!1),this.element.addEventListener("mousedown",this._mouseDown.bind(this),!1),this._glyphElement=Ee.create("","toolbar-glyph hidden"),this.element.appendChild(this._glyphElement),this._textElement=this.element.createChild("div","toolbar-text hidden"),this.setTitle(e),t&&this.setGlyph(t),this.setText(i||""),this._title=""}focus(){this.element.focus()}setText(e){this._text!==e&&(this._textElement.textContent=e,this._textElement.classList.toggle("hidden",!e),this._text=e)}setGlyph(e){this._glyph!==e&&(this._glyphElement.setIconType(e),this._glyphElement.classList.toggle("hidden",!e),this.element.classList.toggle("toolbar-has-glyph",!!e),this._glyph=e)}setBackgroundImage(e){this.element.style.backgroundImage="url("+e+")"}setSecondary(){this.element.classList.add("toolbar-button-secondary")}setDarkText(){this.element.classList.add("dark-text")}turnIntoSelect(){this.element.classList.add("toolbar-has-dropdown");const e=Ee.create("smallicon-triangle-down","toolbar-dropdown-arrow");this.element.appendChild(e)}_clicked(e){this._enabled&&(this.dispatchEventToListeners(ss.Events.Click,e),e.consume())}_mouseDown(e){this._enabled&&this.dispatchEventToListeners(ss.Events.MouseDown,e)}}ss.Events={Click:Symbol("Click"),MouseDown:Symbol("MouseDown")};class ns extends ts{constructor(e,t,i,s,n,o){const r=document.createElement("div");r.classList.add("toolbar-input"),super(r);const a=this.element.createChild("div","toolbar-input-prompt");a.addEventListener("focus",()=>this.element.classList.add("focused")),a.addEventListener("blur",()=>this.element.classList.remove("focused")),Q(a),this._prompt=new zi,this._proxyElement=this._prompt.attach(a),this._proxyElement.classList.add("toolbar-prompt-proxy"),this._proxyElement.addEventListener("keydown",e=>this._onKeydownCallback(e)),this._prompt.initialize(o||(()=>Promise.resolve([]))," "),n&&this._prompt.setTitle(n),this._prompt.setPlaceholder(e,t),this._prompt.addEventListener(Ni.TextChanged,this._onChangeCallback.bind(this)),i&&(this.element.style.flexGrow=i),s&&(this.element.style.flexShrink=s);const l=this.element.createChild("div","toolbar-input-clear-button");l.appendChild(Ee.create("mediumicon-gray-cross-hover","search-cancel-button")),l.addEventListener("click",()=>{this.setValue("",!0),this._prompt.focus()}),this._updateEmptyStyles()}_applyEnabledState(e){this._prompt.setEnabled(e)}setValue(e,t){this._prompt.setText(e),t&&this._onChangeCallback(),this._updateEmptyStyles()}value(){return this._prompt.textWithCurrentSuggestion()}_onKeydownCallback(e){isEscKey(e)&&this._prompt.text()&&(this.setValue("",!0),e.consume(!0))}_onChangeCallback(){this._updateEmptyStyles(),this.dispatchEventToListeners(ns.Event.TextChanged,this._prompt.text())}_updateEmptyStyles(){this.element.classList.toggle("toolbar-input-empty",!this._prompt.text())}}ns.Event={TextChanged:Symbol("TextChanged")};class os extends ss{constructor(e,t,i){super(e,t,""),this._toggled=!1,this._untoggledGlyph=t,this._toggledGlyph=i,this.element.classList.add("toolbar-state-off"),he(this.element,!1)}toggled(){return this._toggled}setToggled(e){this._toggled!==e&&(this._toggled=e,this.element.classList.toggle("toolbar-state-on",e),this.element.classList.toggle("toolbar-state-off",!e),he(this.element,e),this._toggledGlyph&&this._untoggledGlyph&&this.setGlyph(e?this._toggledGlyph:this._untoggledGlyph))}setDefaultWithRedColor(e){this.element.classList.toggle("toolbar-default-with-red-color",e)}setToggleWithRedColor(e){this.element.classList.toggle("toolbar-toggle-with-red-color",e)}}class rs extends ss{constructor(e,t){super("","largeicon-menu"),this._contextMenuHandler=e,this._useSoftMenu=!!t,W(this.element)}_mouseDown(e){1===e.buttons?this._triggerTimeout||(this._triggerTimeout=setTimeout(this._trigger.bind(this,e),200)):super._mouseDown(e)}_trigger(e){if(delete this._triggerTimeout,this._lastTriggerTime&&Date.now()-this._lastTriggerTime<300)return;const t=new Sn(e,this._useSoftMenu,this.element.totalOffsetLeft(),this.element.totalOffsetTop()+this.element.offsetHeight);this._contextMenuHandler(t),t.show(),this._lastTriggerTime=Date.now()}_clicked(e){this._triggerTimeout&&clearTimeout(this._triggerTimeout),this._trigger(e)}}class as extends os{constructor(e,t,i){super(i,t),this._defaultTitle=i,this._setting=e,this._settingChanged(),this._setting.addChangeListener(this._settingChanged,this)}_settingChanged(){const e=this._setting.get();this.setToggled(e),this.setTitle(this._defaultTitle)}_clicked(e){this._setting.set(!this.toggled()),super._clicked(e)}}class hs extends ts{constructor(e){const t=document.createElement("div");t.classList.add(e?"toolbar-spacer":"toolbar-divider"),super(t)}}class ds{item(){}}class cs extends ts{constructor(e,t,i){const s=document.createElement("span");s.classList.add("toolbar-select-container"),super(s),this._selectElement=this.element.createChild("select","toolbar-item");const n=Ee.create("smallicon-triangle-down","toolbar-dropdown-arrow");this.element.appendChild(n),e&&this._selectElement.addEventListener("change",e,!1),de(this._selectElement,t),super.setTitle(t),i&&this._selectElement.classList.add(i)}selectElement(){return this._selectElement}size(){return this._selectElement.childElementCount}options(){return Array.prototype.slice.call(this._selectElement.children,0)}addOption(e){this._selectElement.appendChild(e)}createOption(e,t){const i=this._selectElement.createChild("option");return i.text=e,void 0!==t&&(i.value=t),i}_applyEnabledState(e){super._applyEnabledState(e),this._selectElement.disabled=!e}removeOption(e){this._selectElement.removeChild(e)}removeOptions(){this._selectElement.removeChildren()}selectedOption(){return this._selectElement.selectedIndex>=0?this._selectElement[this._selectElement.selectedIndex]:null}select(e){this._selectElement.selectedIndex=Array.prototype.indexOf.call(this._selectElement,e)}setSelectedIndex(e){this._selectElement.selectedIndex=e}selectedIndex(){return this._selectElement.selectedIndex}setMaxWidth(e){this._selectElement.style.maxWidth=e+"px"}setMinWidth(e){this._selectElement.style.minWidth=e+"px"}}class us extends ts{constructor(e,t,i){super(ci.create(e)),this.element.classList.add("checkbox"),this.inputElement=this.element.checkboxElement,t&&(qi.install(this.inputElement,t,void 0,{anchorTooltipAtElement:!0}),qi.install(this.element.textElement,t,void 0,{anchorTooltipAtElement:!0})),i&&this.inputElement.addEventListener("click",i,!1)}checked(){return this.inputElement.checked}setChecked(e){this.inputElement.checked=e}_applyEnabledState(e){super._applyEnabledState(e),this.inputElement.disabled=!e}}var ms=Object.freeze({__proto__:null,Toolbar:Ji,ToolbarButtonOptions:void 0,ToolbarItem:ts,ToolbarText:is,ToolbarButton:ss,ToolbarInput:ns,ToolbarToggle:os,ToolbarMenuButton:rs,ToolbarSettingToggle:as,ToolbarSeparator:hs,Provider:ds,ItemsProvider:class{toolbarItems(){}},ToolbarComboBox:cs,ToolbarSettingComboBox:class extends cs{constructor(e,t,i){super(null,i),this._options=e,this._setting=t,this._selectElement.addEventListener("change",this._valueChanged.bind(this),!1),this.setOptions(e),t.addChangeListener(this._settingChanged,this)}setOptions(e){this._options=e,this._selectElement.removeChildren();for(let t=0;t<e.length;++t){const i=e[t],s=this.createOption(i.label,i.value);this._selectElement.appendChild(s),this._setting.get()===i.value&&this.setSelectedIndex(t)}}value(){return this._options[this.selectedIndex()].value}_settingChanged(){if(this._muteSettingListener)return;const e=this._setting.get();for(let t=0;t<this._options.length;++t)if(e===this._options[t].value){this.setSelectedIndex(t);break}}_valueChanged(e){const t=this._options[this.selectedIndex()];this._muteSettingListener=!0,this._setting.set(t.value),this._muteSettingListener=!1}},ToolbarCheckbox:us,ToolbarSettingCheckbox:class extends us{constructor(e,t,i){super(i||e.title()||"",t),ki(this.inputElement,e)}}});let _s;class ps extends e.ObjectWrapper{constructor(e){if(super(),this._canDock=e,this._closeButton=new ss(t.UIString("Close"),"largeicon-delete"),this._closeButton.addEventListener(ss.Events.Click,a.InspectorFrontendHostInstance.closeWindow.bind(a.InspectorFrontendHostInstance)),this._currentDockStateSetting=i.Settings.instance().moduleSetting("currentDockState"),this._lastDockStateSetting=i.Settings.instance().createSetting("lastDockState","bottom"),this._dockSide,!e)return this._dockSide=gs.Undocked,void this._closeButton.setVisible(!1);this._currentDockStateSetting.addChangeListener(this._dockSideChanged,this),-1===bs.indexOf(this._currentDockStateSetting.get())&&this._currentDockStateSetting.set("right"),-1===bs.indexOf(this._lastDockStateSetting.get())&&this._currentDockStateSetting.set("bottom")}static instance(e={forceNew:null,canDock:!1}){const{forceNew:t,canDock:i}=e;return _s&&!t||(_s=new ps(i)),_s}initialize(){this._canDock&&(this._titles=[t.UIString("Dock to right"),t.UIString("Dock to bottom"),t.UIString("Dock to left"),t.UIString("Undock into separate window")],this._dockSideChanged())}_dockSideChanged(){this.setDockSide(this._currentDockStateSetting.get())}dockSide(){return this._dockSide}canDock(){return this._canDock}isVertical(){return this._dockSide===gs.DockedToRight||this._dockSide===gs.DockedToLeft}setDockSide(e){if(-1===bs.indexOf(e)&&(e=bs[0]),this._dockSide===e)return;this._dockSide&&this._lastDockStateSetting.set(this._dockSide),this._savedFocus=document.deepActiveElement();const t={from:this._dockSide,to:e};this.dispatchEventToListeners(fs.BeforeDockSideChanged,t),console.timeStamp("DockController.setIsDocked"),this._dockSide=e,this._currentDockStateSetting.set(e),a.InspectorFrontendHostInstance.setIsDocked(e!==gs.Undocked,this._setIsDockedResponse.bind(this,t)),this._closeButton.setVisible(this._dockSide!==gs.Undocked),this.dispatchEventToListeners(fs.DockSideChanged,t)}_setIsDockedResponse(e){this.dispatchEventToListeners(fs.AfterDockSideChanged,e),this._savedFocus&&(this._savedFocus.focus(),this._savedFocus=null)}_toggleDockSide(){if(this._lastDockStateSetting.get()===this._currentDockStateSetting.get()){const e=bs.indexOf(this._currentDockStateSetting.get())||0;this._lastDockStateSetting.set(bs[(e+1)%bs.length])}this.setDockSide(this._lastDockStateSetting.get())}}const gs={DockedToBottom:"bottom",DockedToRight:"right",DockedToLeft:"left",Undocked:"undocked"},bs=[gs.DockedToRight,gs.DockedToBottom,gs.DockedToLeft,gs.Undocked],fs={BeforeDockSideChanged:Symbol("BeforeDockSideChanged"),DockSideChanged:Symbol("DockSideChanged"),AfterDockSideChanged:Symbol("AfterDockSideChanged")};var vs=Object.freeze({__proto__:null,DockController:ps,State:gs,Events:fs,ToggleDockActionDelegate:class{handleAction(e,t){return ps.instance()._toggleDockSide(),!0}},CloseButtonProvider:class{item(){return ps.instance()._closeButton}}});class ws{constructor(e,t,i,s){if(this.element=document.createElement("div"),this.element.classList.add("flex-none"),this._shadowRoot=Ue(this.element,{cssFile:"ui/infobar.css",enableLegacyPatching:!0,delegatesFocus:void 0}),this._contentElement=this._shadowRoot.createChild("div","infobar infobar-"+e),this._mainRow=this._contentElement.createChild("div","infobar-main-row"),this._detailsRows=this._contentElement.createChild("div","infobar-details-rows hidden"),this._hasDetails=!1,this._infoContainer=this._mainRow.createChild("div","infobar-info-container"),this._infoMessage=this._infoContainer.createChild("div","infobar-info-message"),e===Es.Issue){const e=Ee.create("smallicon-issue-blue-text","icon");this._infoMessage.appendChild(e)}else this._infoMessage.createChild("div",e+"-icon icon");if(this._infoText=this._infoMessage.createChild("div","infobar-info-text"),this._infoText.textContent=t,R(this._infoText),this._actionContainer=this._infoContainer.createChild("div","infobar-info-actions"),i)for(const e of i){const t=this._actionCallbackFactory(e);let i="infobar-button";e.highlight&&(i+=" primary-button");const s=hi(e.text,t,i);this._actionContainer.appendChild(s)}if(this._disableSetting=s||null,s){const e=hi(ls`Don't show again`,this._onDisable.bind(this),"infobar-button");this._actionContainer.appendChild(e)}this._closeContainer=this._mainRow.createChild("div","infobar-close-container"),this._toggleElement=hi(ls`Learn more`,this._onToggleDetails.bind(this),"link-style devtools-link hidden"),this._closeContainer.appendChild(this._toggleElement),this._closeButton=this._closeContainer.createChild("div","close-button","dt-close-button"),this._closeButton.setTabbable(!0),ue(this._closeButton,ls`Close`),self.onInvokeElement(this._closeButton,this.dispose.bind(this)),e!==Es.Issue&&(this._contentElement.tabIndex=0),de(this._contentElement,t),this._contentElement.addEventListener("keydown",e=>e.keyCode===gt.Esc.code?(this.dispose(),void e.consume()):e.target===this._contentElement&&"Enter"===e.key&&this._hasDetails?(this._onToggleDetails(),void e.consume()):void 0),this._closeCallback=null}static create(e,t,i,s){return s&&s.get()?null:new ws(e,t,i,s)}dispose(){this.element.remove(),this._onResize(),this._closeCallback&&this._closeCallback.call(null)}setText(e){this._infoText.textContent=e,this._onResize()}setCloseCallback(e){this._closeCallback=e}setParentView(e){this._parentView=e}_actionCallbackFactory(e){return e.delegate?e.dismiss?(()=>{e.delegate&&e.delegate(),this.dispose()}).bind(this):e.delegate:e.dismiss?this.dispose.bind(this):()=>{}}_onResize(){this._parentView&&this._parentView.doResize()}_onDisable(){this._disableSetting&&this._disableSetting.set(!0),this.dispose()}_onToggleDetails(){this._detailsRows.classList.remove("hidden"),this._toggleElement.remove(),this._onResize()}createDetailsRowMessage(e){this._hasDetails=!0,this._toggleElement.classList.remove("hidden");const t=this._detailsRows.createChild("div","infobar-details-row").createChild("span","infobar-row-message");return t.textContent=e||"",t}}const Es={Warning:"warning",Info:"info",Issue:"issue"};var Ss=Object.freeze({__proto__:null,Infobar:ws,InfobarAction:void 0,Type:Es});class ys extends e.ObjectWrapper{constructor(){super(),this._isEnabled=!0,this._elements=new Set,this._installDragOnMouseDownBound=this._installDragOnMouseDown.bind(this),this._cursor="nwse-resize"}isEnabled(){return this._isEnabled}setEnabled(e){this._isEnabled=e,this.updateElementCursors()}elements(){return[...this._elements]}addElement(e){this._elements.has(e)||(this._elements.add(e),e.addEventListener("mousedown",this._installDragOnMouseDownBound,!1),this._updateElementCursor(e))}removeElement(e){this._elements.has(e)&&(this._elements.delete(e),e.removeEventListener("mousedown",this._installDragOnMouseDownBound,!1),e.style.removeProperty("cursor"))}updateElementCursors(){this._elements.forEach(this._updateElementCursor.bind(this))}_updateElementCursor(e){this._isEnabled?e.style.setProperty("cursor",this.cursor()):e.style.removeProperty("cursor")}cursor(){return this._cursor}setCursor(e){this._cursor=e,this.updateElementCursors()}_installDragOnMouseDown(e){const t=e.target;if(!this._elements.has(t))return!1;At(t,this._dragStart.bind(this),e=>{this._drag(e)},this._dragEnd.bind(this),this.cursor(),e)}_dragStart(e){return!!this._isEnabled&&(this._startX=e.pageX,this._startY=e.pageY,this.sendDragStart(this._startX,this._startY),!0)}sendDragStart(e,t){this.dispatchEventToListeners(xs.ResizeStart,{startX:e,currentX:e,startY:t,currentY:t})}_drag(e){return this._isEnabled?(this.sendDragMove(this._startX,e.pageX,this._startY,e.pageY,e.shiftKey),e.preventDefault(),!1):(this._dragEnd(e),!0)}sendDragMove(e,t,i,s,n){this.dispatchEventToListeners(xs.ResizeUpdate,{startX:e,currentX:t,startY:i,currentY:s,shiftKey:n})}_dragEnd(e){this.dispatchEventToListeners(xs.ResizeEnd),delete this._startX,delete this._startY}}const xs={ResizeStart:Symbol("ResizeStart"),ResizeUpdate:Symbol("ResizeUpdate"),ResizeEnd:Symbol("ResizeEnd")};class Cs extends ys{constructor(){super(),this._isVertical=!0}isVertical(){return this._isVertical}setVertical(e){this._isVertical=e,this.updateElementCursors()}cursor(){return this._isVertical?"ns-resize":"ew-resize"}sendDragStart(e,t){const i=this._isVertical?t:e;this.dispatchEventToListeners(xs.ResizeStart,{startPosition:i,currentPosition:i})}sendDragMove(e,t,i,s,n){this._isVertical?this.dispatchEventToListeners(xs.ResizeUpdate,{startPosition:i,currentPosition:s,shiftKey:n}):this.dispatchEventToListeners(xs.ResizeUpdate,{startPosition:e,currentPosition:t,shiftKey:n})}}var Ts=Object.freeze({__proto__:null,ResizerWidget:ys,Events:xs,SimpleResizerWidget:Cs});class Is extends Ze{constructor(e,t,s,n,o,r){super(!0),this.element.classList.add("split-widget"),this.registerRequiredCSS("ui/splitWidget.css",{enableLegacyPatching:!0}),this.contentElement.classList.add("shadow-split-widget"),this._sidebarElement=this.contentElement.createChild("div","shadow-split-widget-contents shadow-split-widget-sidebar vbox"),this._mainElement=this.contentElement.createChild("div","shadow-split-widget-contents shadow-split-widget-main vbox"),this._mainElement.createChild("slot").name="insertion-point-main",this._sidebarElement.createChild("slot").name="insertion-point-sidebar",this._resizerElement=this.contentElement.createChild("div","shadow-split-widget-resizer"),this._resizerElementSize=null,this._resizerWidget=new Cs,this._resizerWidget.setEnabled(!0),this._resizerWidget.addEventListener(xs.ResizeStart,this._onResizeStart,this),this._resizerWidget.addEventListener(xs.ResizeUpdate,this._onResizeUpdate,this),this._resizerWidget.addEventListener(xs.ResizeEnd,this._onResizeEnd,this),this._defaultSidebarWidth=n||200,this._defaultSidebarHeight=o||this._defaultSidebarWidth,this._constraintsInDip=!!r,this._resizeStartSizeDIP=0,this._setting=s?i.Settings.instance().createSetting(s,{}):null,this._totalSizeCSS=0,this._totalSizeOtherDimensionCSS=0,this._mainWidget=null,this._sidebarWidget=null,this._animationFrameHandle=0,this._animationCallback=null,this._showHideSidebarButtonTitle="",this._showHideSidebarButton=null,this._isVertical=!1,this._sidebarMinimized=!1,this._detaching=!1,this._sidebarSizeDIP=-1,this._savedSidebarSizeDIP=this._sidebarSizeDIP,this._secondIsSidebar=!1,this._shouldSaveShowMode=!1,this._savedVerticalMainSize=null,this._savedHorizontalMainSize=null,this.setSecondIsSidebar(t),this._innerSetVertical(e),this._showMode=ks.Both,this._savedShowMode=this._showMode,this.installResizer(this._resizerElement)}isVertical(){return this._isVertical}setVertical(e){this._isVertical!==e&&(this._innerSetVertical(e),this.isShowing()&&this._updateLayout())}_innerSetVertical(e){this.contentElement.classList.toggle("vbox",!e),this.contentElement.classList.toggle("hbox",e),this._isVertical=e,this._resizerElementSize=null,this._sidebarSizeDIP=-1,this._restoreSidebarSizeFromSettings(),this._shouldSaveShowMode&&this._restoreAndApplyShowModeFromSettings(),this._updateShowHideSidebarButton(),this._resizerWidget.setVertical(!e),this.invalidateConstraints()}_updateLayout(e){this._totalSizeCSS=0,this._totalSizeOtherDimensionCSS=0,this._mainElement.style.removeProperty("width"),this._mainElement.style.removeProperty("height"),this._sidebarElement.style.removeProperty("width"),this._sidebarElement.style.removeProperty("height"),this._innerSetSidebarSizeDIP(this._preferredSidebarSizeDIP(),!!e)}setMainWidget(e){this._mainWidget!==e&&(this.suspendInvalidations(),this._mainWidget&&this._mainWidget.detach(),this._mainWidget=e,e&&(e.element.slot="insertion-point-main",this._showMode!==ks.OnlyMain&&this._showMode!==ks.Both||e.show(this.element)),this.resumeInvalidations())}setSidebarWidget(e){this._sidebarWidget!==e&&(this.suspendInvalidations(),this._sidebarWidget&&this._sidebarWidget.detach(),this._sidebarWidget=e,e&&(e.element.slot="insertion-point-sidebar",this._showMode!==ks.OnlySidebar&&this._showMode!==ks.Both||e.show(this.element)),this.resumeInvalidations())}mainWidget(){return this._mainWidget}sidebarWidget(){return this._sidebarWidget}childWasDetached(e){this._detaching||(this._mainWidget===e&&(this._mainWidget=null),this._sidebarWidget===e&&(this._sidebarWidget=null),this.invalidateConstraints())}isSidebarSecond(){return this._secondIsSidebar}enableShowModeSaving(){this._shouldSaveShowMode=!0,this._restoreAndApplyShowModeFromSettings()}showMode(){return this._showMode}setSecondIsSidebar(e){e!==this._secondIsSidebar&&(this._secondIsSidebar=e,this._mainWidget&&this._mainWidget.shouldHideOnDetach()?this._sidebarWidget&&this._sidebarWidget.shouldHideOnDetach()?(console.error("Could not swap split widget side. Both children widgets contain iframes."),this._secondIsSidebar=!e):e?this.contentElement.insertBefore(this._sidebarElement,this._resizerElement):this.contentElement.insertBefore(this._sidebarElement,this._mainElement):e?this.contentElement.insertBefore(this._mainElement,this._sidebarElement):this.contentElement.insertBefore(this._mainElement,this._resizerElement))}sidebarSide(){return this._showMode!==ks.Both?null:this._isVertical?this._secondIsSidebar?"right":"left":this._secondIsSidebar?"bottom":"top"}resizerElement(){return this._resizerElement}hideMain(e){this._showOnly(this._sidebarWidget,this._mainWidget,this._sidebarElement,this._mainElement,e),this._updateShowMode(ks.OnlySidebar)}hideSidebar(e){this._showOnly(this._mainWidget,this._sidebarWidget,this._mainElement,this._sidebarElement,e),this._updateShowMode(ks.OnlyMain)}setSidebarMinimized(e){this._sidebarMinimized=e,this.invalidateConstraints()}isSidebarMinimized(){return this._sidebarMinimized}_showOnly(e,t,i,s,n){function o(){e&&(e===this._mainWidget?this._mainWidget.show(this.element,this._sidebarWidget?this._sidebarWidget.element:null):this._sidebarWidget.show(this.element)),t&&(this._detaching=!0,t.detach(),this._detaching=!1),this._resizerElement.classList.add("hidden"),i.classList.remove("hidden"),i.classList.add("maximized"),s.classList.add("hidden"),s.classList.remove("maximized"),this._removeAllLayoutProperties(),this.doResize(),this._showFinishedForTest()}this._cancelAnimation(),n?this._animate(!0,o.bind(this)):o.call(this),this._sidebarSizeDIP=-1,this.setResizable(!1)}_showFinishedForTest(){}_removeAllLayoutProperties(){this._sidebarElement.style.removeProperty("flexBasis"),this._mainElement.style.removeProperty("width"),this._mainElement.style.removeProperty("height"),this._sidebarElement.style.removeProperty("width"),this._sidebarElement.style.removeProperty("height"),this._resizerElement.style.removeProperty("left"),this._resizerElement.style.removeProperty("right"),this._resizerElement.style.removeProperty("top"),this._resizerElement.style.removeProperty("bottom"),this._resizerElement.style.removeProperty("margin-left"),this._resizerElement.style.removeProperty("margin-right"),this._resizerElement.style.removeProperty("margin-top"),this._resizerElement.style.removeProperty("margin-bottom")}showBoth(e){this._showMode===ks.Both&&(e=!1),this._cancelAnimation(),this._mainElement.classList.remove("maximized","hidden"),this._sidebarElement.classList.remove("maximized","hidden"),this._resizerElement.classList.remove("hidden"),this.setResizable(!0),this.suspendInvalidations(),this._sidebarWidget&&this._sidebarWidget.show(this.element),this._mainWidget&&this._mainWidget.show(this.element,this._sidebarWidget?this._sidebarWidget.element:null),this.resumeInvalidations(),this.setSecondIsSidebar(this._secondIsSidebar),this._sidebarSizeDIP=-1,this._updateShowMode(ks.Both),this._updateLayout(e)}setResizable(e){this._resizerWidget.setEnabled(e)}isResizable(){return this._resizerWidget.isEnabled()}setSidebarSize(e){const t=Ui.instance().cssToDIP(e);this._savedSidebarSizeDIP=t,this._saveSetting(),this._innerSetSidebarSizeDIP(t,!1,!0)}sidebarSize(){const e=Math.max(0,this._sidebarSizeDIP);return Ui.instance().dipToCSS(e)}_totalSizeDIP(){return this._totalSizeCSS||(this._totalSizeCSS=this._isVertical?this.contentElement.offsetWidth:this.contentElement.offsetHeight,this._totalSizeOtherDimensionCSS=this._isVertical?this.contentElement.offsetHeight:this.contentElement.offsetWidth),Ui.instance().cssToDIP(this._totalSizeCSS)}_updateShowMode(e){this._showMode=e,this._saveShowModeToSettings(),this._updateShowHideSidebarButton(),this.dispatchEventToListeners(Ls.ShowModeChanged,e),this.invalidateConstraints()}_innerSetSidebarSizeDIP(e,t,i){if(this._showMode!==ks.Both||!this.isShowing())return;if(e=this._applyConstraints(e,i),this._sidebarSizeDIP===e)return;this._resizerElementSize||(this._resizerElementSize=this._isVertical?this._resizerElement.offsetWidth:this._resizerElement.offsetHeight),this._removeAllLayoutProperties();const s=Math.round(Ui.instance().dipToCSS(e)),n=s+"px",o=this._totalSizeCSS-s+"px";this._sidebarElement.style.flexBasis=n,this._isVertical?(this._sidebarElement.style.width=n,this._mainElement.style.width=o,this._sidebarElement.style.height=this._totalSizeOtherDimensionCSS+"px",this._mainElement.style.height=this._totalSizeOtherDimensionCSS+"px"):(this._sidebarElement.style.height=n,this._mainElement.style.height=o,this._sidebarElement.style.width=this._totalSizeOtherDimensionCSS+"px",this._mainElement.style.width=this._totalSizeOtherDimensionCSS+"px"),this._isVertical?this._secondIsSidebar?(this._resizerElement.style.right=n,this._resizerElement.style.marginRight=-this._resizerElementSize/2+"px"):(this._resizerElement.style.left=n,this._resizerElement.style.marginLeft=-this._resizerElementSize/2+"px"):this._secondIsSidebar?(this._resizerElement.style.bottom=n,this._resizerElement.style.marginBottom=-this._resizerElementSize/2+"px"):(this._resizerElement.style.top=n,this._resizerElement.style.marginTop=-this._resizerElementSize/2+"px"),this._sidebarSizeDIP=e,t?this._animate(!1):(this.doResize(),this.dispatchEventToListeners(Ls.SidebarSizeChanged,this.sidebarSize()))}_animate(e,t){let i;this._animationCallback=t||null,i=this._isVertical?this._secondIsSidebar?"margin-right":"margin-left":this._secondIsSidebar?"margin-bottom":"margin-top";const s=e?"0":"-"+Ui.instance().dipToCSS(this._sidebarSizeDIP)+"px",n=e?"-"+Ui.instance().dipToCSS(this._sidebarSizeDIP)+"px":"0";this.contentElement.style.setProperty(i,s),e||(suppressUnused(this._mainElement.offsetWidth),suppressUnused(this._sidebarElement.offsetWidth)),e||this._sidebarWidget.doResize(),this.contentElement.style.setProperty("transition",i+" 50ms linear");const o=function(){if(this._animationFrameHandle=0,r){if(!(window.performance.now()<r+50))return this._cancelAnimation(),this._mainWidget&&this._mainWidget.doResize(),void this.dispatchEventToListeners(Ls.SidebarSizeChanged,this.sidebarSize());this._mainWidget&&this._mainWidget.doResize()}else this.contentElement.style.setProperty(i,n),r=window.performance.now();this._animationFrameHandle=this.contentElement.window().requestAnimationFrame(o)}.bind(this);let r;this._animationFrameHandle=this.contentElement.window().requestAnimationFrame(o)}_cancelAnimation(){this.contentElement.style.removeProperty("margin-top"),this.contentElement.style.removeProperty("margin-right"),this.contentElement.style.removeProperty("margin-bottom"),this.contentElement.style.removeProperty("margin-left"),this.contentElement.style.removeProperty("transition"),this._animationFrameHandle&&(this.contentElement.window().cancelAnimationFrame(this._animationFrameHandle),this._animationFrameHandle=0),this._animationCallback&&(this._animationCallback(),this._animationCallback=null)}_applyConstraints(e,t){const i=this._totalSizeDIP(),s=this._constraintsInDip?1:Ui.instance().zoomFactor();let n=this._sidebarWidget?this._sidebarWidget.constraints():new ze,o=this.isVertical()?n.minimum.width:n.minimum.height;o||(o=Ms),o*=s,this._sidebarMinimized&&(e=o);let r=this.isVertical()?n.preferred.width:n.preferred.height;r||(r=Ms),r*=s,e<r&&(r=Math.max(e,o)),r+=s,n=this._mainWidget?this._mainWidget.constraints():new ze;let a=this.isVertical()?n.minimum.width:n.minimum.height;a||(a=Ms),a*=s;let l=this.isVertical()?n.preferred.width:n.preferred.height;l||(l=Ms),l*=s;const h=this.isVertical()?this._savedVerticalMainSize:this._savedHorizontalMainSize;null!==h&&(l=Math.min(l,h*s)),t&&(l=a);const d=l+r;if(d<=i)return c.clamp(e,r,i-l);if(a+o<=i){return e=r-(d-i)*r/d,c.clamp(e,o,i-a)}return Math.max(0,i-a)}wasShown(){this._forceUpdateLayout(),Ui.instance().addEventListener(Ki.ZoomChanged,this._onZoomChanged,this)}willHide(){Ui.instance().removeEventListener(Ki.ZoomChanged,this._onZoomChanged,this)}onResize(){this._updateLayout()}onLayout(){this._updateLayout()}calculateConstraints(){if(this._showMode===ks.OnlyMain)return this._mainWidget?this._mainWidget.constraints():new ze;if(this._showMode===ks.OnlySidebar)return this._sidebarWidget?this._sidebarWidget.constraints():new ze;let e=this._mainWidget?this._mainWidget.constraints():new ze,t=this._sidebarWidget?this._sidebarWidget.constraints():new ze;const i=Ms;return this._isVertical?(e=e.widthToMax(i).addWidth(1),t=t.widthToMax(i),e.addWidth(t).heightToMax(t)):(e=e.heightToMax(i).addHeight(1),t=t.heightToMax(i),e.widthToMax(t).addHeight(t))}_onResizeStart(e){this._resizeStartSizeDIP=this._sidebarSizeDIP}_onResizeUpdate(e){const t=e.data.currentPosition-e.data.startPosition,i=Ui.instance().cssToDIP(t),s=this._secondIsSidebar?this._resizeStartSizeDIP-i:this._resizeStartSizeDIP+i,n=this._applyConstraints(s,!0);this._savedSidebarSizeDIP=n,this._saveSetting(),this._innerSetSidebarSizeDIP(n,!1,!0),this.isVertical()?this._savedVerticalMainSize=this._totalSizeDIP()-this._sidebarSizeDIP:this._savedHorizontalMainSize=this._totalSizeDIP()-this._sidebarSizeDIP}_onResizeEnd(e){this._resizeStartSizeDIP=0}hideDefaultResizer(e){this.uninstallResizer(this._resizerElement),this._sidebarElement.classList.toggle("no-default-splitter",!!e)}installResizer(e){this._resizerWidget.addElement(e)}uninstallResizer(e){this._resizerWidget.removeElement(e)}hasCustomResizer(){const e=this._resizerWidget.elements();return e.length>1||1===e.length&&e[0]!==this._resizerElement}toggleResizer(e,t){t?this.installResizer(e):this.uninstallResizer(e)}_settingForOrientation(){const e=this._setting?this._setting.get():{};return this._isVertical?e.vertical:e.horizontal}_preferredSidebarSizeDIP(){let e=this._savedSidebarSizeDIP;return e||(e=this._isVertical?this._defaultSidebarWidth:this._defaultSidebarHeight,0<e&&e<1&&(e*=this._totalSizeDIP())),e}_restoreSidebarSizeFromSettings(){const e=this._settingForOrientation();this._savedSidebarSizeDIP=e?e.size:0}_restoreAndApplyShowModeFromSettings(){const e=this._settingForOrientation();switch(this._savedShowMode=e&&e.showMode?e.showMode:this._showMode,this._showMode=this._savedShowMode,this._savedShowMode){case ks.Both:this.showBoth();break;case ks.OnlyMain:this.hideSidebar();break;case ks.OnlySidebar:this.hideMain()}}_saveShowModeToSettings(){this._savedShowMode=this._showMode,this._saveSetting()}_saveSetting(){if(!this._setting)return;const e=this._setting.get(),t=(this._isVertical?e.vertical:e.horizontal)||{};t.size=this._savedSidebarSizeDIP,this._shouldSaveShowMode&&(t.showMode=this._savedShowMode),this._isVertical?e.vertical=t:e.horizontal=t,this._setting.set(e)}_forceUpdateLayout(){this._sidebarSizeDIP=-1,this._updateLayout()}_onZoomChanged(e){this._forceUpdateLayout()}createShowHideSidebarButton(e){return this._showHideSidebarButtonTitle=e,this._showHideSidebarButton=new ss("",""),this._showHideSidebarButton.addEventListener(ss.Events.Click,(function(e){this._showMode!==ks.Both?this.showBoth(!0):this.hideSidebar(!0)}),this),this._updateShowHideSidebarButton(),this._showHideSidebarButton}_updateShowHideSidebarButton(){if(!this._showHideSidebarButton)return;const e=this._showMode===ks.OnlyMain;let i="";i=e?this.isVertical()?this.isSidebarSecond()?"largeicon-show-right-sidebar":"largeicon-show-left-sidebar":this.isSidebarSecond()?"largeicon-show-bottom-sidebar":"largeicon-show-top-sidebar":this.isVertical()?this.isSidebarSecond()?"largeicon-hide-right-sidebar":"largeicon-hide-left-sidebar":this.isSidebarSecond()?"largeicon-hide-bottom-sidebar":"largeicon-hide-top-sidebar",this._showHideSidebarButton.setGlyph(i),this._showHideSidebarButton.setTitle(e?t.UIString("Show %s",this._showHideSidebarButtonTitle):t.UIString("Hide %s",this._showHideSidebarButtonTitle))}}const ks={Both:"Both",OnlyMain:"OnlyMain",OnlySidebar:"OnlySidebar"},Ls={SidebarSizeChanged:Symbol("SidebarSizeChanged"),ShowModeChanged:Symbol("ShowModeChanged")},Ms=20;var Ps=Object.freeze({__proto__:null,SplitWidget:Is,ShowMode:ks,Events:Ls,SettingForOrientation:void 0});class Ds extends et{constructor(){super(!0),this.registerRequiredCSS("ui/tabbedPane.css",{enableLegacyPatching:!0}),this.element.classList.add("tabbed-pane"),this.contentElement.classList.add("tabbed-pane-shadow"),this.contentElement.tabIndex=-1,this.setDefaultFocusedElement(this.contentElement),this._headerElement=this.contentElement.createChild("div","tabbed-pane-header"),this._headerContentsElement=this._headerElement.createChild("div","tabbed-pane-header-contents"),this._tabSlider=document.createElement("div"),this._tabSlider.classList.add("tabbed-pane-tab-slider"),this._tabsElement=this._headerContentsElement.createChild("div","tabbed-pane-header-tabs"),this._tabsElement.setAttribute("role","tablist"),this._tabsElement.addEventListener("keydown",this._keyDown.bind(this),!1),this._contentElement=this.contentElement.createChild("div","tabbed-pane-content"),this._contentElement.createChild("slot"),this._tabs=[],this._tabsHistory=[],this._tabsById=new Map,this._currentTabLocked=!1,this._autoSelectFirstItemOnShow=!0,this._triggerDropDownTimeout=null,this._dropDownButton=this._createDropDownButton(),this._currentDevicePixelRatio=window.devicePixelRatio,Ui.instance().addEventListener(Ki.ZoomChanged,this._zoomChanged,this),this.makeTabSlider()}setAccessibleName(e){de(this._tabsElement,e)}setCurrentTabLocked(e){this._currentTabLocked=e,this._headerElement.classList.toggle("locked",this._currentTabLocked)}setAutoSelectFirstItemOnShow(e){this._autoSelectFirstItemOnShow=e}get visibleView(){return this._currentTab?this._currentTab.view:null}tabIds(){return this._tabs.map(e=>e._id)}tabIndex(e){return this._tabs.findIndex(t=>t.id===e)}tabViews(){return this._tabs.map(e=>e.view)}tabView(e){const t=this._tabsById.get(e);return t?t.view:null}get selectedTabId(){return this._currentTab?this._currentTab.id:null}setShrinkableTabs(e){this._shrinkableTabs=e}makeVerticalTabLayout(){this._verticalTabLayout=!0,this._setTabSlider(!1),this.contentElement.classList.add("vertical-tab-layout"),this.invalidateConstraints()}setCloseableTabs(e){this._closeableTabs=e}focus(){this.visibleView?this.visibleView.focus():this.contentElement.focus()}focusSelectedTabHeader(){const e=this._currentTab;e&&e.tabElement.focus()}headerElement(){return this._headerElement}isTabCloseable(e){const t=this._tabsById.get(e);return!!t&&t.isCloseable()}setTabDelegate(e){const t=this._tabs.slice();for(let i=0;i<t.length;++i)t[i].setDelegate(e);this._delegate=e}appendTab(e,t,i,s,n,o,r){const a="boolean"==typeof o?o:!!this._closeableTabs,l=new Rs(this,e,t,a,i,s);l.setDelegate(this._delegate),console.assert(!this._tabsById.has(e),`Tabbed pane already contains a tab with id '${e}'`),this._tabsById.set(e,l),void 0!==r?this._tabs.splice(r,0,l):this._tabs.push(l),this._tabsHistory.push(l),this._tabsHistory[0]===l&&this.isShowing()&&this.selectTab(l.id,n),this._updateTabElements()}closeTab(e,t){this.closeTabs([e],t)}closeTabs(e,t){const i=this.hasFocus();for(let i=0;i<e.length;++i)this._innerCloseTab(e[i],t);this._updateTabElements(),this._tabsHistory.length&&this.selectTab(this._tabsHistory[0].id,!1),i&&this.focus()}_innerCloseTab(e,t){const i=this._tabsById.get(e);if(!i)return;if(t&&!i._closeable)return;this._currentTab&&this._currentTab.id===e&&this._hideCurrentTab(),this._tabsById.delete(e),this._tabsHistory.splice(this._tabsHistory.indexOf(i),1),this._tabs.splice(this._tabs.indexOf(i),1),i._shown&&this._hideTabElement(i);const s={prevTabId:void 0,tabId:e,view:i.view,isUserGesture:t};return this.dispatchEventToListeners(As.TabClosed,s),!0}hasTab(e){return this._tabsById.has(e)}otherTabs(e){const t=[];for(let i=0;i<this._tabs.length;++i)this._tabs[i].id!==e&&t.push(this._tabs[i].id);return t}_tabsToTheRight(e){let t=-1;for(let i=0;i<this._tabs.length;++i)if(this._tabs[i].id===e){t=i;break}return-1===t?[]:this._tabs.slice(t+1).map((function(e){return e.id}))}_viewHasFocus(){if(this.visibleView&&this.visibleView.hasFocus())return!0;const e=this.contentElement.getComponentRoot();return e instanceof Document&&this.contentElement===e.activeElement}selectTab(e,t,i){if(this._currentTabLocked)return!1;const s=this._viewHasFocus(),n=this._tabsById.get(e);if(!n)return!1;const o={prevTabId:this._currentTab?this._currentTab.id:void 0,tabId:e,view:n.view,isUserGesture:t};return this.dispatchEventToListeners(As.TabInvoked,o),this._currentTab&&this._currentTab.id===e||(this.suspendInvalidations(),this._hideCurrentTab(),this._showTab(n),this.resumeInvalidations(),this._currentTab=n,this._tabsHistory.splice(this._tabsHistory.indexOf(n),1),this._tabsHistory.splice(0,0,n),this._updateTabElements(),(s||i)&&this.focus(),this.dispatchEventToListeners(As.TabSelected,o)),!0}selectNextTab(){const e=this._tabs.indexOf(this._currentTab),t=c.mod(e+1,this._tabs.length);this.selectTab(this._tabs[t].id,!0)}selectPrevTab(){const e=this._tabs.indexOf(this._currentTab),t=c.mod(e-1,this._tabs.length);this.selectTab(this._tabs[t].id,!0)}lastOpenedTabIds(e){return this._tabsHistory.slice(0,e).map((function(e){return e.id}))}setTabIcon(e,t){const i=this._tabsById.get(e);i&&(i._setIcon(t),this._updateTabElements())}setTabEnabled(e,t){const i=this._tabsById.get(e);i&&i.tabElement.classList.toggle("disabled",!t)}toggleTabClass(e,t,i){const s=this._tabsById.get(e);s&&s._toggleClass(t,i)&&this._updateTabElements()}_zoomChanged(e){this._clearMeasuredWidths(),this.isShowing()&&this._updateTabElements()}_clearMeasuredWidths(){for(let e=0;e<this._tabs.length;++e)delete this._tabs[e]._measuredWidth}changeTabTitle(e,t,i){const s=this._tabsById.get(e);s&&void 0!==i&&(s.tooltip=i),s&&s.title!==t&&(s.title=t,de(s.tabElement,t),this._updateTabElements())}changeTabView(e,t){const i=this._tabsById.get(e);if(!i||i.view===t)return;this.suspendInvalidations();const s=this._currentTab&&this._currentTab.id===e,n=i.view.hasFocus();s&&this._hideTab(i),i.view=t,s&&this._showTab(i),n&&i.view.focus(),this.resumeInvalidations()}onResize(){this._currentDevicePixelRatio!==window.devicePixelRatio&&(this._clearMeasuredWidths(),this._currentDevicePixelRatio=window.devicePixelRatio),this._updateTabElements()}headerResized(){this._updateTabElements()}wasShown(){const e=this._currentTab||this._tabsHistory[0];e&&this._autoSelectFirstItemOnShow&&this.selectTab(e.id)}makeTabSlider(){this._verticalTabLayout||this._setTabSlider(!0)}_setTabSlider(e){this._sliderEnabled=e,this._tabSlider.classList.toggle("enabled",e)}calculateConstraints(){let e=super.calculateConstraints();const t=new ze(new Fe(0,0),new Fe(50,50));return e=e.widthToMax(t).heightToMax(t),e=this._verticalTabLayout?e.addWidth(new ze(new Fe(120,0))):e.addHeight(new ze(new Fe(0,30))),e}_updateTabElements(){ri(this,this._innerUpdateTabElements)}setPlaceholderElement(e,t){this._placeholderElement=e,t&&(this._focusedPlaceholderElement=t),this._placeholderContainerElement&&(this._placeholderContainerElement.removeChildren(),this._placeholderContainerElement.appendChild(e))}async waitForTabElementUpdate(){this._innerUpdateTabElements()}_innerUpdateTabElements(){this.isShowing()&&(this._tabs.length?(this._contentElement.classList.remove("has-no-tabs"),this._placeholderContainerElement&&(this._placeholderContainerElement.remove(),this.setDefaultFocusedElement(this.contentElement),delete this._placeholderContainerElement)):(this._contentElement.classList.add("has-no-tabs"),this._placeholderElement&&!this._placeholderContainerElement&&(this._placeholderContainerElement=this._contentElement.createChild("div","tabbed-pane-placeholder fill"),this._placeholderContainerElement.appendChild(this._placeholderElement),this._focusedPlaceholderElement&&this.setDefaultFocusedElement(this._focusedPlaceholderElement))),this._measureDropDownButton(),this._updateWidths(),this._updateTabsDropDown(),this._updateTabSlider())}_showTabElement(e,t){e>=this._tabsElement.children.length?this._tabsElement.appendChild(t.tabElement):this._tabsElement.insertBefore(t.tabElement,this._tabsElement.children[e]),t._shown=!0}_hideTabElement(e){this._tabsElement.removeChild(e.tabElement),e._shown=!1}_createDropDownButton(){const e=document.createElement("div");e.classList.add("tabbed-pane-header-tabs-drop-down-container");const t=Ee.create("largeicon-chevron","chevron-icon");return W(e),de(e,ls`More tabs`),e.tabIndex=0,e.appendChild(t),e.addEventListener("click",this._dropDownClicked.bind(this)),e.addEventListener("keydown",this._dropDownKeydown.bind(this)),e.addEventListener("mousedown",e=>{1!==e.which||this._triggerDropDownTimeout||(this._triggerDropDownTimeout=setTimeout(this._dropDownClicked.bind(this,e),200))}),e}_dropDownClicked(e){const t=e;if(1!==t.which)return;this._triggerDropDownTimeout&&(clearTimeout(this._triggerDropDownTimeout),this._triggerDropDownTimeout=null);const i=this._dropDownButton.getBoundingClientRect(),s=new Sn(t,!1,i.left,i.bottom);for(const e of this._tabs)e._shown||(0===this._numberOfTabsShown()&&this._tabsHistory[0]===e?s.defaultSection().appendCheckboxItem(e.title,this._dropDownMenuItemSelected.bind(this,e),!0):s.defaultSection().appendItem(e.title,this._dropDownMenuItemSelected.bind(this,e)));s.show()}_dropDownKeydown(e){isEnterOrSpaceKey(e)&&(this._dropDownButton.click(),e.consume(!0))}_dropDownMenuItemSelected(e){this._lastSelectedOverflowTab=e,this.selectTab(e.id,!0,!0)}_totalWidth(){return this._headerContentsElement.getBoundingClientRect().width}_numberOfTabsShown(){let e=0;for(const t of this._tabs)t._shown&&e++;return e}disableOverflowMenu(){this._overflowDisabled=!0}_updateTabsDropDown(){const e=this._tabsToShowIndexes(this._tabs,this._tabsHistory,this._totalWidth(),this._measuredDropDownButtonWidth||0);if(this._lastSelectedOverflowTab&&this._numberOfTabsShown()!==e.length)return delete this._lastSelectedOverflowTab,void this._updateTabsDropDown();for(let t=0;t<this._tabs.length;++t)this._tabs[t]._shown&&-1===e.indexOf(t)&&this._hideTabElement(this._tabs[t]);for(let t=0;t<e.length;++t){const i=this._tabs[e[t]];i._shown||this._showTabElement(t,i)}this._overflowDisabled||this._maybeShowDropDown(e.length!==this._tabs.length)}_maybeShowDropDown(e){e&&!this._dropDownButton.parentElement?this._headerContentsElement.appendChild(this._dropDownButton):!e&&this._dropDownButton.parentElement&&this._headerContentsElement.removeChild(this._dropDownButton)}_measureDropDownButton(){this._overflowDisabled||this._measuredDropDownButtonWidth||(this._dropDownButton.classList.add("measuring"),this._headerContentsElement.appendChild(this._dropDownButton),this._measuredDropDownButtonWidth=this._dropDownButton.getBoundingClientRect().width,this._headerContentsElement.removeChild(this._dropDownButton),this._dropDownButton.classList.remove("measuring"))}_updateWidths(){const e=this._measureWidths(),t=this._shrinkableTabs?this._calculateMaxWidth(e.slice(),this._totalWidth()):Number.MAX_VALUE;let i=0;for(const s of this._tabs)s.setWidth(this._verticalTabLayout?-1:Math.min(t,e[i++]))}_measureWidths(){this._tabsElement.style.setProperty("width","2000px");const e=new Map;for(const t of this._tabs){if("number"==typeof t._measuredWidth)continue;const i=t._createTabElement(!0);e.set(i,t),this._tabsElement.appendChild(i)}for(const[t,i]of e){const e=t.getBoundingClientRect().width;i._measuredWidth=Math.ceil(e)}for(const t of e.keys())t.remove();const t=[];for(const e of this._tabs)t.push(e._measuredWidth||0);return this._tabsElement.style.removeProperty("width"),t}_calculateMaxWidth(e,t){if(!e.length)return 0;e.sort((function(e,t){return e-t}));let i=0;for(let t=0;t<e.length;++t)i+=e[t];if(t>=i)return e[e.length-1];let s=0;for(let n=e.length-1;n>0;--n){const o=e[n]-e[n-1];if(s+=(e.length-n)*o,t+s>=i)return e[n-1]+(t+s-i)/(e.length-n)}return t/e.length}_tabsToShowIndexes(e,t,i,s){const n=[];let o=0;const r=e.length,a=e.slice(0);void 0!==this._currentTab&&a.unshift(a.splice(a.indexOf(this._currentTab),1)[0]),void 0!==this._lastSelectedOverflowTab&&a.unshift(a.splice(a.indexOf(this._lastSelectedOverflowTab),1)[0]);for(let l=0;l<r;++l){const h=this._automaticReorder?t[l]:a[l];o+=h.width();let d=o;if(l!==r-1&&(d+=s),!this._verticalTabLayout&&d>i)break;n.push(e.indexOf(h))}return n.sort((function(e,t){return e-t})),n}_hideCurrentTab(){this._currentTab&&(this._hideTab(this._currentTab),delete this._currentTab)}_showTab(e){e.tabElement.tabIndex=0,e.tabElement.classList.add("selected"),re(e.tabElement,!0),e.view.show(this.element),this._updateTabSlider()}_updateTabSlider(){if(!this._sliderEnabled)return;if(!this._currentTab)return void(this._tabSlider.style.width="0");let e=0;for(let t=0;t<this._tabs.length&&this._currentTab!==this._tabs[t];t++)this._tabs[t]._shown&&(e+=this._tabs[t]._measuredWidth||0);const t=this._currentTab._shown?this._currentTab._measuredWidth:this._dropDownButton.offsetWidth,i=window.devicePixelRatio>=1.5?" scaleY(0.75)":"";this._tabSlider.style.transform="translateX("+e+"px)"+i,this._tabSlider.style.width=t+"px",this._tabSlider.parentElement!==this._headerContentsElement&&this._headerContentsElement.appendChild(this._tabSlider)}_hideTab(e){e.tabElement.removeAttribute("tabIndex"),e.tabElement.classList.remove("selected"),e.tabElement.setAttribute("aria-selected","false"),e.view.detach()}elementsToRestoreScrollPositionsFor(){return[this._contentElement]}_insertBefore(e,t){this._tabsElement.insertBefore(e.tabElement,this._tabsElement.childNodes[t]);const i=this._tabs.indexOf(e);this._tabs.splice(i,1),i<t&&--t,this._tabs.splice(t,0,e);const s={prevTabId:void 0,tabId:e.id,view:e.view,isUserGesture:void 0};this.dispatchEventToListeners(As.TabOrderChanged,s)}leftToolbar(){return this._leftToolbar||(this._leftToolbar=new Ji("tabbed-pane-left-toolbar"),this._headerElement.insertBefore(this._leftToolbar.element,this._headerElement.firstChild)),this._leftToolbar}rightToolbar(){return this._rightToolbar||(this._rightToolbar=new Ji("tabbed-pane-right-toolbar"),this._headerElement.appendChild(this._rightToolbar.element)),this._rightToolbar}setAllowTabReorder(e,t){this._allowTabReorder=e,this._automaticReorder=t}_keyDown(e){if(!this._currentTab)return;let t=null;switch(e.key){case"ArrowUp":case"ArrowLeft":t=this._currentTab.tabElement.previousElementSibling,t||this._dropDownButton.parentElement||(t=this._currentTab.tabElement.parentElement?this._currentTab.tabElement.parentElement.lastElementChild:null);break;case"ArrowDown":case"ArrowRight":t=this._currentTab.tabElement.nextElementSibling,t||this._dropDownButton.parentElement||(t=this._currentTab.tabElement.parentElement?this._currentTab.tabElement.parentElement.firstElementChild:null);break;case"Enter":case" ":return void this._currentTab.view.focus();default:return}if(!t)return void this._dropDownButton.click();const i=this._tabs.find(e=>e.tabElement===t);i&&this.selectTab(i.id,!0),t.focus()}}const As={TabInvoked:Symbol("TabInvoked"),TabSelected:Symbol("TabSelected"),TabClosed:Symbol("TabClosed"),TabOrderChanged:Symbol("TabOrderChanged")};class Rs{constructor(e,t,i,s,n,o){this._closeable=s,this._tabbedPane=e,this._id=t,this._title=i,this._tooltip=o,this._view=n,this._shown=!1,this._measuredWidth,this._tabElement,this._iconContainer=null}get id(){return this._id}get title(){return this._title}set title(e){e!==this._title&&(this._title=e,this._titleElement&&(this._titleElement.textContent=e),delete this._measuredWidth)}isCloseable(){return this._closeable}_setIcon(e){this._icon=e,this._tabElement&&this._titleElement&&this._createIconElement(this._tabElement,this._titleElement,!1),delete this._measuredWidth}_toggleClass(e,t){const i=this.tabElement;return i.classList.contains(e)!==t&&(i.classList.toggle(e,t),delete this._measuredWidth,!0)}get view(){return this._view}set view(e){this._view=e}get tooltip(){return this._tooltip}set tooltip(e){this._tooltip=e,this._titleElement&&(this._titleElement.title=e||"")}get tabElement(){return this._tabElement||(this._tabElement=this._createTabElement(!1)),this._tabElement}width(){return this._width||0}setWidth(e){this.tabElement.style.width=-1===e?"":e+"px",this._width=e}setDelegate(e){this._delegate=e}_createIconElement(e,t,i){const s=Os.get(e);if(s&&(s.remove(),Os.delete(e)),!this._icon)return;const n=document.createElement("span");n.classList.add("tabbed-pane-header-tab-icon");const o=i?this._icon.cloneNode(!0):this._icon;n.appendChild(o),e.insertBefore(n,t),Os.set(e,n)}_createTabElement(e){const t=document.createElement("div");t.classList.add("tabbed-pane-header-tab"),t.id="tab-"+this._id,N(t),re(t,!1),de(t,this.title);const i=t.createChild("span","tabbed-pane-header-tab-title");if(i.textContent=this.title,i.title=this.tooltip||"",this._createIconElement(t,i,e),e||(this._titleElement=i),this._closeable){const e=t.createChild("div","tabbed-pane-close-button","dt-close-button");e.gray=!0,e.setAccessibleName(ls`Close ${this.title}`),t.classList.add("closeable")}return e?t.classList.add("measuring"):(t.addEventListener("click",this._tabClicked.bind(this),!1),t.addEventListener("auxclick",this._tabClicked.bind(this),!1),t.addEventListener("mousedown",this._tabMouseDown.bind(this),!1),t.addEventListener("mouseup",this._tabMouseUp.bind(this),!1),t.addEventListener("contextmenu",this._tabContextMenu.bind(this),!1),this._tabbedPane._allowTabReorder&&Dt(t,this._startTabDragging.bind(this),this._tabDragging.bind(this),this._endTabDragging.bind(this),"-webkit-grabbing","pointer",200)),t}_tabClicked(e){const t=e,i=1===t.button;this._closeable&&(i||t.target.classList.contains("tabbed-pane-close-button"))?(this._closeTabs([this.id]),t.consume(!0)):this._tabbedPane.focus()}_tabMouseDown(e){const t=e;t.target.classList.contains("tabbed-pane-close-button")||1===t.button||this._tabbedPane.selectTab(this.id,!0)}_tabMouseUp(e){const t=e;1===t.button&&t.consume(!0)}_closeTabs(e){this._delegate?this._delegate.closeTabs(this._tabbedPane,e):this._tabbedPane.closeTabs(e,!0)}_tabContextMenu(e){const i=new Sn(e);this._closeable&&(i.defaultSection().appendItem(t.UIString("Close"),function(){this._closeTabs([this.id])}.bind(this)),i.defaultSection().appendItem(t.UIString("Close others"),function(){this._closeTabs(this._tabbedPane.otherTabs(this.id))}.bind(this)),i.defaultSection().appendItem(t.UIString("Close tabs to the right"),function(){this._closeTabs(this._tabbedPane._tabsToTheRight(this.id))}.bind(this)),i.defaultSection().appendItem(t.UIString("Close all"),function(){this._closeTabs(this._tabbedPane.tabIds())}.bind(this))),this._delegate&&this._delegate.onContextMenu(this.id,i),i.show()}_startTabDragging(e){const t=e;return!t.target.classList.contains("tabbed-pane-close-button")&&(this._dragStartX=t.pageX,this._tabElement&&this._tabElement.classList.add("dragging"),this._tabbedPane._tabSlider.remove(),!0)}_tabDragging(e){const t=e,i=this._tabbedPane._tabsElement.childNodes;for(let e=0;e<i.length;++e){let s=i[e];if(!this._tabElement||s===this._tabElement)continue;if(!(s.offsetLeft+s.clientWidth>this._tabElement.offsetLeft&&this._tabElement.offsetLeft+this._tabElement.clientWidth>s.offsetLeft))continue;const n=this._dragStartX;if(Math.abs(t.pageX-n)<s.clientWidth/2+5)break;t.pageX-n>0&&(s=s.nextSibling,++e);const o=this._tabElement.offsetLeft;this._tabbedPane._insertBefore(this,e),this._dragStartX=n+this._tabElement.offsetLeft-o;break}const s=this._dragStartX,n=this._tabElement;!n.previousSibling&&t.pageX-s<0||!n.nextSibling&&t.pageX-s>0?n.style.setProperty("left","0px"):n.style.setProperty("left",t.pageX-s+"px")}_endTabDragging(e){const t=this._tabElement;t.classList.remove("dragging"),t.style.removeProperty("left"),delete this._dragStartX,this._tabbedPane._updateTabSlider()}}const Os=new WeakMap;var Fs=Object.freeze({__proto__:null,TabbedPane:Ds,EventData:void 0,Events:As,TabbedPaneTab:Rs,TabbedPaneTabDelegate:class{closeTabs(e,t){}onContextMenu(e,t){}}});const Bs=Symbol("widget"),zs=Bs;o.RuntimeExtensionDescriptor;class Ws{constructor(e){this._extension=e}viewId(){return this._descriptor().id}title(){return this._extension.title()}order(){return this._descriptor().order}isCloseable(){return"closeable"===this._descriptor().persistence}isTransient(){return"transient"===this._descriptor().persistence}toolbarItems(){const e=this._descriptor().actionIds;if(e){const t=e.split(",").map(e=>Ji.createActionButtonForId(e.trim()));return Promise.resolve(t)}return this._descriptor().hasToolbar?this.widget().then(e=>e.toolbarItems()):Promise.resolve([])}async widget(){this._widgetRequested=!0;const e=await this._extension.instance();if(!(e instanceof Ze))throw new Error("view className should point to a UI.Widget");return e}async disposeView(){if(!this._widgetRequested)return;(await this.widget()).ownerViewDisposed()}_descriptor(){return this._extension.descriptor()}}class Ns{appendApplicableItems(e){}appendView(e,t){}showView(e,t,i){throw new Error("not implemented")}removeView(e){}widget(){throw new Error("not implemented")}}class Hs{resolveLocation(e){throw new Error("not implemented")}}var Vs=Object.freeze({__proto__:null,View:class{viewId(){throw new Error("not implemented")}title(){throw new Error("not implemented")}isCloseable(){throw new Error("not implemented")}isTransient(){throw new Error("not implemented")}toolbarItems(){throw new Error("not implemented")}widget(){throw new Error("not implemented")}disposeView(){}},_widgetSymbol:Bs,widgetSymbol:zs,SimpleView:class extends et{constructor(e,t){super(t),this._title=e}viewId(){return this._title}title(){return this._title}isCloseable(){return!1}isTransient(){return!1}toolbarItems(){return Promise.resolve([])}widget(){return Promise.resolve(this)}revealView(){return Gs.instance().revealView(this)}disposeView(){}},ProvidedView:Ws,ViewLocation:Ns,TabbedViewLocation:class extends Ns{tabbedPane(){throw new Error("not implemented")}enableMoreTabsButton(){throw new Error("not implemented")}},ViewLocationResolver:Hs});const Us=[],Ks={CLOSEABLE:"closeable",PERMANENT:"permanent",TRANSIENT:"transient"};let js;class qs{constructor(e){this._viewRegistration=e,this._widgetRequested=!1}title(){return this._viewRegistration.title}isCloseable(){return this._viewRegistration.persistence===Ks.CLOSEABLE}isTransient(){return this._viewRegistration.persistence===Ks.TRANSIENT}viewId(){return this._viewRegistration.id}location(){return this._viewRegistration.location}order(){return this._viewRegistration.order}settings(){return this._viewRegistration.settings}tags(){return this._viewRegistration.tags}async toolbarItems(){return[]}async widget(){return this._widgetRequested=!0,this._viewRegistration.loadView()}async disposeView(){if(!this._widgetRequested)return;(await this.widget()).ownerViewDisposed()}}class Gs{constructor(){this._views=new Map,this._locationNameByViewId=new Map,this._locationOverrideSetting=i.Settings.instance().createSetting("viewsLocationOverride",{});const e=this._locationOverrideSetting.get(),t=[...o.Runtime.instance().extensions("view").map(e=>({viewId:e.descriptor().id,location:e.descriptor().location,view:new Ws(e)})),...Us.map(e=>({viewId:e.viewId(),location:e.location(),view:e}))];t.sort((e,t)=>e.view.order()-t.view.order());for(const{viewId:i,view:s,location:n}of t){this._views.set(i,s);const t=e[i]||n;this._locationNameByViewId.set(i,t)}}static instance(e={forceNew:null}){const{forceNew:t}=e;return js&&!t||(js=new Gs),js}static _createToolbar(e){if(!e.length)return null;const t=new Ji("");for(const i of e)t.appendToolbarItem(i);return t.element}locationNameForViewId(e){return this._locationNameByViewId.get(e)}moveView(e,t,i){const{shouldSelectTab:s,overrideSaving:n}=i||{shouldSelectTab:!0,overrideSaving:!1};if(!e||!t)return;const o=this.view(e);if(o){if(!n){this._locationNameByViewId.set(e,t);const i=this._locationOverrideSetting.get();i[e]=t,this._locationOverrideSetting.set(i)}this.resolveLocation(t).then(t=>{if(!t)throw new Error("Move view: Could not resolve location for view: "+e);return t._reveal(),t.showView(o,void 0,!0,!1,s)})}}revealView(e){const t=e[Ys.symbol];return t?(t._reveal(),t.showView(e)):Promise.resolve()}showViewInLocation(e,t,i=!0){this.moveView(e,t,{shouldSelectTab:i,overrideSaving:!0})}view(e){return this._views.get(e)}materializedWidget(e){const t=this.view(e);return t?t[zs]:null}showView(e,t,i){const s=this._views.get(e);if(!s)return console.error("Could not find view for id: '"+e+"' "+(new Error).stack),Promise.resolve();const n=this._locationNameByViewId.get(e),o=s[Ys.symbol];return o?(o._reveal(),o.showView(s,void 0,t,i)):this.resolveLocation(n).then(n=>{if(!n)throw new Error("Could not resolve location for view: "+e);return n._reveal(),n.showView(s,void 0,t,i)})}resolveLocation(e){if(!e)return Promise.resolve(null);const t=o.Runtime.instance().extensions(Hs).filter(t=>t.descriptor().name===e);if(!t.length)throw new Error("Unresolved location: "+e);return t[0].instance().then(t=>t.resolveLocation(e))}createTabbedLocation(e,t,i,s,n){return new Qs(this,e,t,i,s,n)}createStackLocation(e,t){return new Zs(this,e,t)}hasViewsForLocation(e){return!!this._viewsForLocation(e).length}_viewsForLocation(e){const t=[];for(const i of this._views.keys())this._locationNameByViewId.get(i)===e&&t.push(this._views.get(i));return t}}class Xs extends et{constructor(e){super(),this.element.classList.add("flex-auto","view-container","overflow-auto"),this._view=e,this.element.tabIndex=-1,H(this.element),de(this.element,ls`${e.title()} panel`),this.setDefaultFocusedElement(this.element)}_materialize(){if(this._materializePromise)return this._materializePromise;const e=[];return e.push(this._view.toolbarItems().then(e=>{const t=Gs._createToolbar(e);t&&this.element.insertBefore(t,this.element.firstChild)})),e.push(this._view.widget().then(e=>{const t=this.element.hasFocus();this.setDefaultFocusedElement(null),this._view[zs]=e,e.show(this.element),t&&e.focus()})),this._materializePromise=Promise.all(e),this._materializePromise}wasShown(){this._materialize().then(()=>{this._view[zs].show(this.element),this._wasShownForTest()})}_wasShownForTest(){}}class $s extends et{constructor(e){super(!0),this.element.classList.add("flex-none"),this.registerRequiredCSS("ui/viewContainers.css",{enableLegacyPatching:!0}),this._titleElement=document.createElement("div"),this._titleElement.classList.add("expandable-view-title"),O(this._titleElement),this._titleExpandIcon=Ee.create("smallicon-triangle-right","title-expand-icon"),this._titleElement.appendChild(this._titleExpandIcon);const t=e.title();li(this._titleElement,t),de(this._titleElement,t),se(this._titleElement,!1),this._titleElement.tabIndex=0,self.onInvokeElement(this._titleElement,this._toggleExpanded.bind(this)),this._titleElement.addEventListener("keydown",this._onTitleKeyDown.bind(this),!1),this.contentElement.insertBefore(this._titleElement,this.contentElement.firstChild),ie(this._titleElement,this.contentElement.createChild("slot")),this._view=e,e[$s._symbol]=this}wasShown(){this._widget&&this._materializePromise.then(()=>{this._titleElement.classList.contains("expanded")&&this._widget.show(this.element)})}_materialize(){if(this._materializePromise)return this._materializePromise;const e=[];return e.push(this._view.toolbarItems().then(e=>{const t=Gs._createToolbar(e);t&&this._titleElement.appendChild(t)})),e.push(this._view.widget().then(e=>{this._widget=e,this._view[zs]=e,e.show(this.element)})),this._materializePromise=Promise.all(e),this._materializePromise}_expand(){return this._titleElement.classList.contains("expanded")?this._materialize():(this._titleElement.classList.add("expanded"),se(this._titleElement,!0),this._titleExpandIcon.setIconType("smallicon-triangle-down"),this._materialize().then(()=>this._widget.show(this.element)))}_collapse(){this._titleElement.classList.contains("expanded")&&(this._titleElement.classList.remove("expanded"),se(this._titleElement,!1),this._titleExpandIcon.setIconType("smallicon-triangle-right"),this._materialize().then(()=>this._widget.detach()))}_toggleExpanded(e){"keydown"===e.type&&e.target!==this._titleElement||(this._titleElement.classList.contains("expanded")?this._collapse():this._expand())}_onTitleKeyDown(e){e.target===this._titleElement&&("ArrowLeft"===e.key?this._collapse():"ArrowRight"===e.key&&(this._titleElement.classList.contains("expanded")?this._widget&&this._widget.focus():this._expand()))}}$s._symbol=Symbol("container");class Ys{constructor(e,t,i){this._manager=e,this._revealCallback=i,this._widget=t}widget(){return this._widget}_reveal(){this._revealCallback&&this._revealCallback()}}Ys.symbol=Symbol("location");class Qs extends Ys{constructor(e,t,s,n,o,r){const a=new Ds;o&&a.setAllowTabReorder(!0),super(e,a,t),this._tabbedPane=a,this._allowReorder=o,this._tabbedPane.addEventListener(As.TabSelected,this._tabSelected,this),this._tabbedPane.addEventListener(As.TabClosed,this._tabClosed,this),this._closeableTabSetting=i.Settings.instance().createSetting("closeableTabs",{}),this._setOrUpdateCloseableTabsSetting(),this._tabOrderSetting=i.Settings.instance().createSetting(s+"-tabOrder",{}),this._tabbedPane.addEventListener(As.TabOrderChanged,this._persistTabOrder,this),n&&(this._lastSelectedTabSetting=i.Settings.instance().createSetting(s+"-selectedTab","")),this._defaultTab=r,this._views=new Map,s&&this.appendApplicableItems(s)}_setOrUpdateCloseableTabsSetting(){const e=this._closeableTabSetting.get(),t=Object.assign({security:!0},e);this._closeableTabSetting.set(t)}widget(){return this._tabbedPane}tabbedPane(){return this._tabbedPane}enableMoreTabsButton(){const e=new rs(this._appendTabsToMenu.bind(this));return this._tabbedPane.leftToolbar().appendToolbarItem(e),this._tabbedPane.disableOverflowMenu(),e}appendApplicableItems(e){const t=this._manager._viewsForLocation(e);if(this._allowReorder){let e=0;const i=this._tabOrderSetting.get(),s=new Map;for(const n of t)s.set(n.viewId(),i[n.viewId()]||++e*Qs.orderStep);t.sort((e,t)=>s.get(e.viewId())-s.get(t.viewId()))}for(const e of t){const t=e.viewId();this._views.set(t,e),e[Ys.symbol]=this,e.isTransient()||(e.isCloseable()?this._closeableTabSetting.get()[t]&&this._appendTab(e):this._appendTab(e))}if(this._defaultTab)if(this._tabbedPane.hasTab(this._defaultTab))this._tabbedPane.selectTab(this._defaultTab);else{const e=Array.from(this._views.values()).find(e=>e.viewId()===this._defaultTab);e&&this.showView(e)}else this._lastSelectedTabSetting&&this._tabbedPane.hasTab(this._lastSelectedTabSetting.get())&&this._tabbedPane.selectTab(this._lastSelectedTabSetting.get())}_appendTabsToMenu(e){const i=Array.from(this._views.values());i.sort((e,t)=>e.title().localeCompare(t.title()));for(const s of i){const i=t.UIString(s.title());"issues-pane"!==s.viewId()?e.defaultSection().appendItem(i,this.showView.bind(this,s,void 0,!0)):e.defaultSection().appendItem(i,()=>{l.issuesPanelOpenedFrom(h.IssueOpener.HamburgerMenu),this.showView(s,void 0,!0)})}}_appendTab(e,t){this._tabbedPane.appendTab(e.viewId(),e.title(),new Xs(e),void 0,!1,e.isCloseable()||e.isTransient(),t)}appendView(e,t){if(this._tabbedPane.hasTab(e.viewId()))return;const i=e[Ys.symbol];i&&i!==this&&i.removeView(e),e[Ys.symbol]=this,this._manager._views.set(e.viewId(),e),this._views.set(e.viewId(),e);let s=void 0;const n=this._tabbedPane.tabIds();if(this._allowReorder){const t=this._tabOrderSetting.get(),i=t[e.viewId()];for(let e=0;i&&e<n.length;++e)if(t[n[e]]&&t[n[e]]>i){s=e;break}}else if(t)for(let e=0;e<n.length;++e)if(n[e]===t.viewId()){s=e;break}if(this._appendTab(e,s),e.isCloseable()){const t=this._closeableTabSetting.get(),i=e.viewId();t[i]||(t[i]=!0,this._closeableTabSetting.set(t))}this._persistTabOrder()}showView(e,t,i,s,n=!0){this.appendView(e,t),n&&this._tabbedPane.selectTab(e.viewId(),i),s||this._tabbedPane.focus();return this._tabbedPane.tabView(e.viewId())._materialize()}removeView(e){this._tabbedPane.hasTab(e.viewId())&&(delete e[Ys.symbol],this._manager._views.delete(e.viewId()),this._tabbedPane.closeTab(e.viewId()),this._views.delete(e.viewId()))}_tabSelected(e){const t=e.data.tabId;this._lastSelectedTabSetting&&e.data.isUserGesture&&this._lastSelectedTabSetting.set(t)}_tabClosed(e){const t=e.data.tabId,i=this._closeableTabSetting.get();i[t]&&(i[t]=!1,this._closeableTabSetting.set(i)),this._views.get(t).disposeView()}_persistTabOrder(){const e=this._tabbedPane.tabIds(),t={};for(let i=0;i<e.length;i++)t[e[i]]=(i+1)*Qs.orderStep;const i=this._tabOrderSetting.get(),s=Object.keys(i);s.sort((e,t)=>i[e]-i[t]);let n=0;for(const e of s)e in t?n=t[e]:t[e]=++n;this._tabOrderSetting.set(t)}}Qs.orderStep=10;class Zs extends Ys{constructor(e,t,i){const s=new et;super(e,s,t),this._vbox=s,this._expandableContainers=new Map,i&&this.appendApplicableItems(i)}appendView(e,t){const i=e[Ys.symbol];i&&i!==this&&i.removeView(e);let s=this._expandableContainers.get(e.viewId());if(!s){e[Ys.symbol]=this,this._manager._views.set(e.viewId(),e),s=new $s(e);let i=null;if(t){const e=t[$s._symbol];i=e?e.element:null}s.show(this._vbox.contentElement,i),this._expandableContainers.set(e.viewId(),s)}}showView(e,t){this.appendView(e,t);return this._expandableContainers.get(e.viewId())._expand()}removeView(e){const t=this._expandableContainers.get(e.viewId());t&&(t.detach(),this._expandableContainers.delete(e.viewId()),delete e[Ys.symbol],this._manager._views.delete(e.viewId()))}appendApplicableItems(e){for(const t of this._manager._viewsForLocation(e))this.appendView(t)}}var Js=Object.freeze({__proto__:null,ViewPersistence:Ks,ViewLocationValues:{PANEL:"panel",SETTINGS_VIEW:"settings-view"},ViewRegistration:void 0,registerViewExtension:function(e){Us.push(new qs(e))},getRegisteredViewExtensions:function(){return Us},ViewManager:Gs,ContainerWidget:Xs,_ExpandableContainerWidget:$s,_TabbedLocation:Qs});let en;class tn extends et{constructor(){super(),ot.setContainer(this.element),this.setMinimumSize(240,72),this._drawerSplitWidget=new Is(!1,!0,"Inspector.drawerSplitViewState",200,200),this._drawerSplitWidget.hideSidebar(),this._drawerSplitWidget.enableShowModeSaving(),this._drawerSplitWidget.show(this.element),this._tabDelegate=new sn,this._drawerTabbedLocation=Gs.instance().createTabbedLocation(this._showDrawer.bind(this,!1),"drawer-view",!0,!0);this._drawerTabbedLocation.enableMoreTabsButton().setTitle(ls`More Tools`),this._drawerTabbedPane=this._drawerTabbedLocation.tabbedPane(),this._drawerTabbedPane.setMinimumSize(0,27),this._drawerTabbedPane.element.classList.add("drawer-tabbed-pane");const e=new ss(t.UIString("Close drawer"),"largeicon-delete");e.addEventListener(ss.Events.Click,this._closeDrawer,this),this._drawerTabbedPane.addEventListener(As.TabSelected,this._tabSelected,this),this._drawerTabbedPane.setTabDelegate(this._tabDelegate),this._drawerSplitWidget.installResizer(this._drawerTabbedPane.headerElement()),this._drawerSplitWidget.setSidebarWidget(this._drawerTabbedPane),this._drawerTabbedPane.rightToolbar().appendToolbarItem(e),this._infoBarDiv,this._tabbedLocation=Gs.instance().createTabbedLocation(a.InspectorFrontendHostInstance.bringToFront.bind(a.InspectorFrontendHostInstance),"panel",!0,!0,Root.Runtime.queryParam("panel")),this._tabbedPane=this._tabbedLocation.tabbedPane(),this._tabbedPane.element.classList.add("main-tabbed-pane"),this._tabbedPane.registerRequiredCSS("ui/inspectorViewTabbedPane.css",{enableLegacyPatching:!0}),this._tabbedPane.addEventListener(As.TabSelected,this._tabSelected,this),this._tabbedPane.setAccessibleName(t.UIString("Panels")),this._tabbedPane.setTabDelegate(this._tabDelegate),l.setLaunchPanel(this._tabbedPane.selectedTabId),a.isUnderTest()&&this._tabbedPane.setAutoSelectFirstItemOnShow(!1),this._drawerSplitWidget.setMainWidget(this._tabbedPane),this._keyDownBound=this._keyDown.bind(this),a.InspectorFrontendHostInstance.events.addEventListener(d.Events.ShowPanel,function(e){const t=e.data;this.showPanel(t)}.bind(this))}static instance(e={forceNew:null}){const{forceNew:t}=e;return en&&!t||(en=new tn),en}wasShown(){this.element.ownerDocument.addEventListener("keydown",this._keyDownBound,!1)}willHide(){this.element.ownerDocument.removeEventListener("keydown",this._keyDownBound,!1)}resolveLocation(e){return"drawer-view"===e?this._drawerTabbedLocation:"panel"===e?this._tabbedLocation:null}createToolbars(){this._tabbedPane.leftToolbar().appendItemsAtLocation("main-toolbar-left"),this._tabbedPane.rightToolbar().appendItemsAtLocation("main-toolbar-right")}addPanel(e){this._tabbedLocation.appendView(e)}hasPanel(e){return this._tabbedPane.hasTab(e)}panel(e){return Gs.instance().view(e).widget()}onSuspendStateChanged(e){this._currentPanelLocked=e,this._tabbedPane.setCurrentTabLocked(this._currentPanelLocked),this._tabbedPane.leftToolbar().setEnabled(!this._currentPanelLocked),this._tabbedPane.rightToolbar().setEnabled(!this._currentPanelLocked)}canSelectPanel(e){return!this._currentPanelLocked||this._tabbedPane.selectedTabId===e}showPanel(e){return Gs.instance().showView(e)}setPanelIcon(e,t){const i=this._getTabbedPaneForTabId(e);i&&i.setTabIcon(e,t)}_emitDrawerChangeEvent(e){const t=new CustomEvent(nn.DrawerChange,{bubbles:!0,cancelable:!0,detail:{isDrawerOpen:e}});document.body.dispatchEvent(t)}_getTabbedPaneForTabId(e){return this._tabbedPane.hasTab(e)?this._tabbedPane:this._drawerTabbedPane.hasTab(e)?this._drawerTabbedPane:null}currentPanelDeprecated(){return Gs.instance().materializedWidget(this._tabbedPane.selectedTabId||"")}_showDrawer(e){this._drawerTabbedPane.isShowing()||(this._drawerSplitWidget.showBoth(),this._focusRestorer=e?new it(this._drawerTabbedPane):null,this._emitDrawerChangeEvent(!0))}drawerVisible(){return this._drawerTabbedPane.isShowing()}_closeDrawer(){this._drawerTabbedPane.isShowing()&&(this._focusRestorer&&this._focusRestorer.restore(),this._drawerSplitWidget.hideSidebar(!0),this._emitDrawerChangeEvent(!1))}setDrawerMinimized(e){this._drawerSplitWidget.setSidebarMinimized(e),this._drawerSplitWidget.setResizable(!e)}isDrawerMinimized(){return this._drawerSplitWidget.isSidebarMinimized()}closeDrawerTab(e,t){this._drawerTabbedPane.closeTab(e,t),l.panelClosed(e)}_keyDown(e){const t=e;if(!_t.eventHasCtrlOrMeta(t)||e.altKey||e.shiftKey)return;if(i.moduleSetting("shortcutPanelSwitch").get()){let i=-1;if(e.keyCode>48&&e.keyCode<58?i=e.keyCode-49:e.keyCode>96&&e.keyCode<106&&t.location===KeyboardEvent.DOM_KEY_LOCATION_NUMPAD&&(i=e.keyCode-97),-1!==i){const t=this._tabbedPane.tabIds()[i];t&&(rn.hasInstance()||this._currentPanelLocked||this.showPanel(t),e.consume(!0))}}}onResize(){ot.containerMoved(this.element)}topResizerElement(){return this._tabbedPane.headerElement()}toolbarItemResized(){this._tabbedPane.headerResized()}_tabSelected(e){const t=e.data.tabId;l.panelShown(t)}setOwnerSplit(e){this._ownerSplitWidget=e}ownerSplit(){return this._ownerSplitWidget}minimize(){this._ownerSplitWidget&&this._ownerSplitWidget.setSidebarMinimized(!0)}restore(){this._ownerSplitWidget&&this._ownerSplitWidget.setSidebarMinimized(!1)}displayReloadRequiredWarning(e){if(!this._reloadRequiredInfobar){const t=new ws(Es.Info,e,[{text:ls`Reload DevTools`,highlight:!0,delegate:()=>{ps.instance().canDock()&&ps.instance().dockSide()===ps.State.Undocked&&a.InspectorFrontendHostInstance.setIsDocked(!0,(function(){})),a.InspectorFrontendHostInstance.reattach(()=>window.location.reload())},dismiss:!1}]);t.setParentView(this),this._attachReloadRequiredInfobar(t),this._reloadRequiredInfobar=t,t.setCloseCallback(()=>{delete this._reloadRequiredInfobar})}}_attachReloadRequiredInfobar(e){this._infoBarDiv||(this._infoBarDiv=document.createElement("div"),this._infoBarDiv.classList.add("flex-none"),this.contentElement.insertBefore(this._infoBarDiv,this.contentElement.firstChild)),this._infoBarDiv.appendChild(e.element)}}class sn{closeTabs(e,t){e.closeTabs(t,!0),t.forEach(e=>{l.panelClosed(e)})}moveToDrawer(e){l.actionTaken(h.Action.TabMovedToDrawer),Gs.instance().moveView(e,"drawer-view")}moveToMainPanel(e){l.actionTaken(h.Action.TabMovedToMainPanel),Gs.instance().moveView(e,"panel")}onContextMenu(e,i){if("console"===e||"console-view"===e)return;"drawer-view"===Gs.instance().locationNameForViewId(e)?i.defaultSection().appendItem(t.UIString("Move to top"),this.moveToMainPanel.bind(this,e)):i.defaultSection().appendItem(t.UIString("Move to bottom"),this.moveToDrawer.bind(this,e))}}const nn={DrawerChange:"drawerchange"};var on=Object.freeze({__proto__:null,InspectorView:tn,ActionDelegate:class{handleAction(e,t){switch(t){case"main.toggle-drawer":return tn.instance().drawerVisible()?tn.instance()._closeDrawer():tn.instance()._showDrawer(!0),!0;case"main.next-tab":return tn.instance()._tabbedPane.selectNextTab(),tn.instance()._tabbedPane.focus(),!0;case"main.previous-tab":return tn.instance()._tabbedPane.selectPrevTab(),tn.instance()._tabbedPane.focus(),!0}return!1}},InspectorViewTabDelegate:sn,Events:nn});class rn extends ot{constructor(){super(),this.registerRequiredCSS("ui/dialog.css",{enableLegacyPatching:!0}),this.contentElement.tabIndex=0,this.contentElement.addEventListener("focus",()=>this.widget().focus(),!1),this.widget().setDefaultFocusedElement(this.contentElement),this.setPointerEventsBehavior(rt.BlockedByGlassPane),this.setOutsideClickCallback(e=>{this.hide(),e.consume(!0)}),F(this.contentElement),this._tabIndexBehavior=an.DisableAllOutsideTabIndex,this._tabIndexMap=new Map,this._focusRestorer=null,this._closeOnEscape=!0,this._targetDocument,this._targetDocumentKeyDownHandler=this._onKeyDown.bind(this),this._escapeKeyCallback=null}static hasInstance(){return!!rn._instance}show(e){const t=e instanceof Document?e:(e||tn.instance().element).ownerDocument;this._targetDocument=t,this._targetDocument.addEventListener("keydown",this._targetDocumentKeyDownHandler,!0),rn._instance&&rn._instance.hide(),rn._instance=this,this._disableTabIndexOnElements(t),super.show(t),this._focusRestorer=new it(this.widget())}hide(){this._focusRestorer.restore(),super.hide(),this._targetDocument&&this._targetDocument.removeEventListener("keydown",this._targetDocumentKeyDownHandler,!0),this._restoreTabIndexOnElements(),this.dispatchEventToListeners("hidden"),delete rn._instance}setCloseOnEscape(e){this._closeOnEscape=e}setEscapeKeyCallback(e){this._escapeKeyCallback=e}addCloseButton(){const e=this.contentElement.createChild("div","dialog-close-button","dt-close-button");e.gray=!0,e.addEventListener("click",()=>this.hide(),!1)}setOutsideTabIndexBehavior(e){this._tabIndexBehavior=e}_disableTabIndexOnElements(e){if(this._tabIndexBehavior===an.PreserveTabIndex)return;let t=null;this._tabIndexBehavior===an.PreserveMainViewTabIndex&&(t=this._getMainWidgetTabIndexElements(tn.instance().ownerSplit())),this._tabIndexMap.clear();for(let i=e;i;i=i.traverseNextNode(e))if(i instanceof HTMLElement){const e=i,s=e.tabIndex;!(s>=0)||t&&t.has(e)||(this._tabIndexMap.set(e,s),e.tabIndex=-1)}}_getMainWidgetTabIndexElements(e){const t=new Set;if(!e)return t;const i=e.mainWidget();if(!i||!i.element)return t;for(let e=i.element;e;e=e.traverseNextNode(i.element)){if(!(e instanceof HTMLElement))continue;const i=e;i.tabIndex<0||t.add(i)}return t}_restoreTabIndexOnElements(){for(const e of this._tabIndexMap.keys())e.tabIndex=this._tabIndexMap.get(e);this._tabIndexMap.clear()}_onKeyDown(e){if(e.keyCode===gt.Esc.code&&_t.hasNoModifiers(e)){if(this._escapeKeyCallback&&this._escapeKeyCallback(e),e.handled)return;this._closeOnEscape&&(e.consume(!0),this.hide())}}}const an={DisableAllOutsideTabIndex:Symbol("DisableAllTabIndex"),PreserveMainViewTabIndex:Symbol("PreserveMainViewTabIndex"),PreserveTabIndex:Symbol("PreserveTabIndex")};var ln=Object.freeze({__proto__:null,Dialog:rn,OutsideTabIndexBehavior:an});let hn;class dn{constructor(e){this._actionRegistry=e,this._actionToShortcut=new m,this._keyMap=new cn(0,0),this._activePrefixKey=null,this._activePrefixTimeout=null,this._consumePrefix=null,this._devToolsDefaultShortcutActions=new Set,this._disabledDefaultShortcutsForAction=new m,this._keybindSetSetting=i.Settings.instance().moduleSetting("activeKeybindSet"),this._keybindSetSetting.addChangeListener(e=>{l.keybindSetSettingChanged(e.data),this._registerBindings()}),this._userShortcutsSetting=i.Settings.instance().moduleSetting("userShortcuts"),this._userShortcutsSetting.addChangeListener(this._registerBindings,this),this._registerBindings()}static instance(e={forceNew:null,actionRegistry:null}){const{forceNew:t,actionRegistry:i}=e;if(!hn||t){if(!i)throw new Error("Missing actionRegistry for shortcutRegistry");hn=new dn(i)}return hn}_applicableActions(e,t={}){let i=[];const s=(this._activePrefixKey||this._keyMap).getNode(e);s&&(i=s.actions());const n=this._actionRegistry.applicableActions(i,E.instance());if(s)for(const e of Object.keys(t))if(s.actions().indexOf(e)>=0){const t=this._actionRegistry.action(e);t&&n.push(t)}return n}shortcutsForAction(e){return[...this._actionToShortcut.get(e)]}actionsForDescriptors(e){let t=this._keyMap;for(const{key:i}of e){if(!t)return[];t=t.getNode(i)}return t?t.actions():[]}globalShortcutKeys(){const e=[];for(const t of this._keyMap.chords().values()){const i=t.actions();(this._actionRegistry.applicableActions(i,E.instance()).length||t.hasChords())&&e.push(t.key())}return e}keysForActions(e){const t=e.flatMap(e=>[...this._actionToShortcut.get(e)].flatMap(e=>e.descriptors.map(e=>e.key)));return[...new Set(t)]}shortcutTitleForAction(e){for(const t of this._actionToShortcut.get(e))return t.title()}handleShortcut(e,t){this.handleKey(_t.makeKeyFromEvent(e),e.key,e,t)}actionHasDefaultShortcut(e){return this._devToolsDefaultShortcutActions.has(e)}addShortcutListener(e,t){const i=new cn(0,0);Object.keys(t).flatMap(e=>[...this._actionToShortcut.get(e)]).forEach(e=>{i.addKeyMapping(e.descriptors.map(e=>e.key),e.action)});const s=e=>{const s=_t.makeKeyFromEvent(e),n=this._activePrefixKey?i.getNode(this._activePrefixKey.key()):i;n&&n.getNode(s)&&this.handleShortcut(e,t)};return e.addEventListener("keydown",s),s}async handleKey(e,t,i,s){const n=e>>8,o=!!s||!!this._activePrefixKey,a=this._keyMap.getNode(e),h=this._applicableActions(e,s).length>0||a&&a.hasChords();if((o||!function(){if(!i||!Ot()||/^F\d+|Control|Shift|Alt|Meta|Escape|Win|U\+001B$/.test(t))return!1;if(!n)return!0;const s=pt;if(r.isMac()){if(_t.makeKey("z",s.Meta)===e)return!0;if(_t.makeKey("z",s.Meta|s.Shift)===e)return!0}else{if(_t.makeKey("z",s.Ctrl)===e)return!0;if(_t.makeKey("y",s.Ctrl)===e)return!0;if(!r.isWin()&&_t.makeKey("z",s.Ctrl|s.Shift)===e)return!0}if((n&(s.Ctrl|s.Alt))==(s.Ctrl|s.Alt))return r.isWin();return!d(s.Ctrl)&&!d(s.Alt)&&!d(s.Meta)}())&&h&&!_t.isModifier(_t.keyCodeAndModifiersFromKey(e).keyCode)&&(i&&i.consume(!0),o||!rn.hasInstance())){if(this._activePrefixTimeout){clearTimeout(this._activePrefixTimeout);const e=await c.call(this);if(this._activePrefixKey=null,this._activePrefixTimeout=null,e)return;this._consumePrefix&&await this._consumePrefix()}a&&a.hasChords()?(this._activePrefixKey=a,this._consumePrefix=async()=>{this._activePrefixKey=null,this._activePrefixTimeout=null,await c.call(this)},this._activePrefixTimeout=window.setTimeout(this._consumePrefix,_n)):await c.call(this)}function d(e){return!!(n&e)}async function c(){const t=this._applicableActions(e,s);if(!t.length)return!1;for(const e of t){let t;if(s&&s[e.id()]&&(t=await s[e.id()]()),s||(t=await e.execute()),t)return l.keyboardShortcutFired(e.id()),!0}return!1}}registerUserShortcut(e){for(const t of this._disabledDefaultShortcutsForAction.get(e.action))if(t.descriptorsMatch(e.descriptors)&&t.hasKeybindSet(this._keybindSetSetting.get()))return void this.removeShortcut(t);for(const t of this._actionToShortcut.get(e.action))if(t.descriptorsMatch(e.descriptors)&&t.hasKeybindSet(this._keybindSetSetting.get()))return;this._addShortcutToSetting(e)}removeShortcut(e){e.type===bt.DefaultShortcut||e.type===bt.KeybindSetShortcut?this._addShortcutToSetting(e.changeType(bt.DisabledDefault)):this._removeShortcutFromSetting(e)}disabledDefaultsForAction(e){return this._disabledDefaultShortcutsForAction.get(e)}_addShortcutToSetting(e){const t=this._userShortcutsSetting.get();t.push(e),this._userShortcutsSetting.set(t)}_removeShortcutFromSetting(e){const t=this._userShortcutsSetting.get(),i=t.findIndex(e.equals,e);-1!==i&&(t.splice(i,1),this._userShortcutsSetting.set(t))}_registerShortcut(e){this._actionToShortcut.set(e.action,e),this._keyMap.addKeyMapping(e.descriptors.map(e=>e.key),e.action)}_registerBindings(){this._actionToShortcut.clear(),this._keyMap.clear();const e=this._keybindSetSetting.get(),t=o.Runtime.instance().extensions("action");this._disabledDefaultShortcutsForAction.clear(),this._devToolsDefaultShortcutActions.clear();const i=[];if(o.experiments.isEnabled("keyboardShortcutEditor")){const e=this._userShortcutsSetting.get();for(const t of e){const e=_t.createShortcutFromSettingObject(t);e.type===bt.DisabledDefault?this._disabledDefaultShortcutsForAction.set(e.action,e):(mn.has(e.action)&&i.push(...e.descriptors.map(e=>_t.keyCodeAndModifiersFromKey(e.key))),this._registerShortcut(e))}}function s(e){if(!e)return!0;const t=e.split(",");let i=!1;const s=r.platform();for(let e=0;!i&&e<t.length;++e)i=t[e]===s;return i}function n(t){return!t||t.includes(e)}t.forEach((function(e){const t=e.descriptor(),o=t.bindings;for(let e=0;o&&e<o.length;++e){const r=o[e].keybindSets;if(!s(o[e].platform)||!n(r))continue;const a=o[e].shortcut.split(/\s+/).map(_t.makeDescriptorFromBindingShortcut);if(a.length>0){const e=t.actionId;if(this._isDisabledDefault(a,e)){this._devToolsDefaultShortcutActions.add(e);continue}mn.has(e)&&i.push(...a.map(e=>_t.keyCodeAndModifiersFromKey(e.key))),r?(r.includes(pn)&&this._devToolsDefaultShortcutActions.add(e),this._registerShortcut(new _t(a,e,bt.KeybindSetShortcut,new Set(r)))):(this._devToolsDefaultShortcutActions.add(e),this._registerShortcut(new _t(a,e,bt.DefaultShortcut)))}}}),this),a.InspectorFrontendHostInstance.setWhitelistedShortcuts(JSON.stringify(i))}_isDisabledDefault(e,t){const i=this._disabledDefaultShortcutsForAction.get(t);for(const t of i)if(t.descriptorsMatch(e))return!0;return!1}}class cn{constructor(e,t=0){this._key=e,this._actions=[],this._chords=new Map,this._depth=t}addAction(e){this._actions.push(e)}key(){return this._key}chords(){return this._chords}hasChords(){return this._chords.size>0}addKeyMapping(e,t){if(!(e.length<this._depth))if(e.length===this._depth)this.addAction(t);else{const i=e[this._depth];this._chords.has(i)||this._chords.set(i,new cn(i,this._depth+1)),this._chords.get(i).addKeyMapping(e,t)}}getNode(e){return this._chords.get(e)||null}actions(){return this._actions}clear(){this._actions=[],this._chords=new Map}}class un{}un.instance=new un;const mn=new Set(["main.toggle-dock","debugger.toggle-breakpoints-active","debugger.toggle-pause","commandMenu.show","console.show"]),_n=1e3,pn="devToolsDefault";var gn=Object.freeze({__proto__:null,ShortcutRegistry:dn,ShortcutTreeNode:cn,ForwardedShortcut:un,ForwardedActions:mn,KeyTimeout:_n,DefaultShortcutSetting:pn});class bn{constructor(e,t,i){this._items=e,this._itemSelectedCallback=t,this._parentMenu=i,this._highlightedMenuItemElement=null}show(e,t){if(this._items.length){this._document=e,this._glassPane=new ot,this._glassPane.setPointerEventsBehavior(this._parentMenu?rt.PierceGlassPane:rt.BlockedByGlassPane),this._glassPane.registerRequiredCSS("ui/softContextMenu.css",{enableLegacyPatching:!0}),this._glassPane.setContentAnchorBox(t),this._glassPane.setSizeBehavior(lt.MeasureContent),this._glassPane.setMarginBehavior(ht.NoMargin),this._glassPane.setAnchorBehavior(this._parentMenu?at.PreferRight:at.PreferBottom),this._contextMenuElement=this._glassPane.contentElement.createChild("div","soft-context-menu"),this._contextMenuElement.tabIndex=-1,j(this._contextMenuElement),this._contextMenuElement.addEventListener("mouseup",e=>e.consume(),!1),this._contextMenuElement.addEventListener("keydown",this._menuKeyDown.bind(this),!1);for(let e=0;e<this._items.length;++e)this._contextMenuElement.appendChild(this._createMenuItem(this._items[e]));this._glassPane.show(e),this._focusRestorer=new Jt(this._contextMenuElement),this._parentMenu||(this._hideOnUserGesture=e=>{let t=this._subMenu;for(;t;){if(t._contextMenuElement===e.composedPath()[0])return;t=t._subMenu}this.discard(),e.consume(!0)},this._document.body.addEventListener("mousedown",this._hideOnUserGesture,!1),this._document.defaultView&&this._document.defaultView.addEventListener("resize",this._hideOnUserGesture,!1))}}discard(){this._subMenu&&this._subMenu.discard(),this._focusRestorer&&this._focusRestorer.restore(),this._glassPane&&(this._glassPane.hide(),delete this._glassPane,this._hideOnUserGesture&&(this._document&&(this._document.body.removeEventListener("mousedown",this._hideOnUserGesture,!1),this._document.defaultView&&this._document.defaultView.removeEventListener("resize",this._hideOnUserGesture,!1)),delete this._hideOnUserGesture)),this._parentMenu&&(delete this._parentMenu._subMenu,this._parentMenu._activeSubMenuElement&&(se(this._parentMenu._activeSubMenuElement,!1),delete this._parentMenu._activeSubMenuElement))}_createMenuItem(e){if("separator"===e.type)return this._createSeparator();if("subMenu"===e.type)return this._createSubMenu(e);const t=document.createElement("div");t.classList.add("soft-context-menu-item"),t.tabIndex=-1,q(t);const i=Ee.create("smallicon-checkmark","checkmark");if(t.appendChild(i),e.checked||(i.style.opacity="0"),e.element){return t.createChild("div","soft-context-menu-custom-item").appendChild(e.element),t._customElement=e.element,t}e.enabled||t.classList.add("soft-context-menu-disabled"),li(t,e.label||""),t.createChild("span","soft-context-menu-shortcut").textContent=e.shortcut,t.addEventListener("mousedown",this._menuItemMouseDown.bind(this),!1),t.addEventListener("mouseup",this._menuItemMouseUp.bind(this),!1),t.addEventListener("mouseover",this._menuItemMouseOver.bind(this),!1),t.addEventListener("mouseleave",this._menuItemMouseLeave.bind(this),!1),t._actionId=e.id;let s=e.label||"";if("checkbox"===e.type){const t=e.checked?ls`checked`:ls`unchecked`;s=e.shortcut?ls`${e.label}, ${e.shortcut}, ${t}`:ls`${e.label}, ${t}`}else e.shortcut&&(s=ls`${e.label}, ${e.shortcut}`);return de(t,s),t}_createSubMenu(e){const t=document.createElement("div");t.classList.add("soft-context-menu-item"),t._subItems=e.subItems,t.tabIndex=-1,G(t);const i=Ee.create("smallicon-checkmark","soft-context-menu-item-checkmark");if(i.classList.add("checkmark"),t.appendChild(i),i.style.opacity="0",li(t,e.label||""),se(t,!1),r.isMac()&&!p.instance().hasTheme()){const e=t.createChild("span","soft-context-menu-item-submenu-arrow");Q(e),e.textContent="▶"}else{const e=Ee.create("smallicon-triangle-right","soft-context-menu-item-submenu-arrow");t.appendChild(e)}return t.addEventListener("mousedown",this._menuItemMouseDown.bind(this),!1),t.addEventListener("mouseup",this._menuItemMouseUp.bind(this),!1),t.addEventListener("mouseover",this._menuItemMouseOver.bind(this),!1),t.addEventListener("mouseleave",this._menuItemMouseLeave.bind(this),!1),t}_createSeparator(){const e=document.createElement("div");return e.classList.add("soft-context-menu-separator"),e._isSeparator=!0,e.createChild("div","separator-line"),e}_menuItemMouseDown(e){e.consume(!0)}_menuItemMouseUp(e){this._triggerAction(e.target,e),e.consume()}_root(){let e=this;for(;e._parentMenu;)e=e._parentMenu;return e}_triggerAction(e,t){if(!e._subItems)return this._root().discard(),t.consume(!0),void(void 0!==e._actionId&&(this._itemSelectedCallback(e._actionId),delete e._actionId));this._showSubMenu(e),t.consume()}_showSubMenu(e){if(e._subMenuTimer&&(clearTimeout(e._subMenuTimer),delete e._subMenuTimer),this._subMenu||!this._document)return;this._activeSubMenuElement=e,se(e,!0),this._subMenu=new bn(e._subItems,this._itemSelectedCallback,this);const t=e.boxInWindow();t.y-=5,t.x+=3,t.width-=6,t.height+=10,this._subMenu.show(this._document,t)}_menuItemMouseOver(e){this._highlightMenuItem(e.target,!0)}_menuItemMouseLeave(e){if(!this._subMenu||!e.relatedTarget)return void this._highlightMenuItem(null,!0);e.relatedTarget===this._contextMenuElement&&this._highlightMenuItem(null,!0)}_highlightMenuItem(e,t){this._highlightedMenuItemElement!==e&&(this._subMenu&&this._subMenu.discard(),this._highlightedMenuItemElement&&(this._highlightedMenuItemElement.classList.remove("force-white-icons"),this._highlightedMenuItemElement.classList.remove("soft-context-menu-item-mouse-over"),this._highlightedMenuItemElement._subItems&&this._highlightedMenuItemElement._subMenuTimer&&(clearTimeout(this._highlightedMenuItemElement._subMenuTimer),delete this._highlightedMenuItemElement._subMenuTimer)),this._highlightedMenuItemElement=e,this._highlightedMenuItemElement&&((p.instance().hasTheme()||r.isMac())&&this._highlightedMenuItemElement.classList.add("force-white-icons"),this._highlightedMenuItemElement.classList.add("soft-context-menu-item-mouse-over"),this._highlightedMenuItemElement._customElement?this._highlightedMenuItemElement._customElement.focus():this._highlightedMenuItemElement.focus(),t&&this._highlightedMenuItemElement._subItems&&!this._highlightedMenuItemElement._subMenuTimer&&(this._highlightedMenuItemElement._subMenuTimer=setTimeout(this._showSubMenu.bind(this,this._highlightedMenuItemElement),150))))}_highlightPrevious(){let e=this._highlightedMenuItemElement?this._highlightedMenuItemElement.previousSibling:this._contextMenuElement.lastChild;for(;e&&(e._isSeparator||e.classList.contains("soft-context-menu-disabled"));)e=e.previousSibling;e&&this._highlightMenuItem(e,!1)}_highlightNext(){let e=this._highlightedMenuItemElement?this._highlightedMenuItemElement.nextSibling:this._contextMenuElement.firstChild;for(;e&&(e._isSeparator||e.classList.contains("soft-context-menu-disabled"));)e=e.nextSibling;e&&this._highlightMenuItem(e,!1)}_menuKeyDown(e){switch(e.key){case"ArrowUp":this._highlightPrevious();break;case"ArrowDown":this._highlightNext();break;case"ArrowLeft":this._parentMenu&&(this._highlightMenuItem(null,!1),this.discard());break;case"ArrowRight":if(!this._highlightedMenuItemElement)break;this._highlightedMenuItemElement._subItems&&(this._showSubMenu(this._highlightedMenuItemElement),this._subMenu._highlightNext());break;case"Escape":this.discard();break;case"Enter":if(!isEnterKey(e))return;case" ":if(!this._highlightedMenuItemElement||this._highlightedMenuItemElement._customElement)return;this._triggerAction(this._highlightedMenuItemElement,e),this._highlightedMenuItemElement._subItems&&this._subMenu&&this._subMenu._highlightNext()}e.consume(!0)}}var fn=Object.freeze({__proto__:null,SoftContextMenu:bn,SoftContextMenuDescriptor:void 0});class vn{constructor(e,t,i,s,n){this._type=t,this._label=i,this._disabled=s,this._checked=n,this._contextMenu=e,"item"!==t&&"checkbox"!==t||(this._id=e?e._nextId():0)}id(){return this._id}type(){return this._type}isEnabled(){return!this._disabled}setEnabled(e){this._disabled=!e}_buildDescriptor(){switch(this._type){case"item":{const e={type:"item",id:this._id,label:this._label,enabled:!this._disabled};return this._customElement&&(e.element=this._customElement),this._shortcut&&(e.shortcut=this._shortcut),e}case"separator":return{type:"separator"};case"checkbox":return{type:"checkbox",id:this._id,label:this._label,checked:!!this._checked,enabled:!this._disabled}}throw new Error("Invalid item type:"+this._type)}setShortcut(e){this._shortcut=e}}class wn{constructor(e){this._contextMenu=e,this._items=[]}appendItem(e,t,i){const s=new vn(this._contextMenu,"item",e,i);return this._items.push(s),this._contextMenu._setHandler(s.id(),t),s}appendCustomItem(e){const t=new vn(this._contextMenu,"item","<custom>");return t._customElement=e,this._items.push(t),t}appendSeparator(){const e=new vn(this._contextMenu,"separator");return this._items.push(e),e}appendAction(e,t,i){const s=L.instance().action(e);if(!s)return void(i||console.error(`Action ${e} was not defined`));t||(t=s.title());const n=this.appendItem(t,s.execute.bind(s)),o=dn.instance().shortcutTitleForAction(e);o&&n.setShortcut(o)}appendSubMenuItem(e,t){const i=new En(this._contextMenu,e,t);return i._init(),this._items.push(i),i}appendCheckboxItem(e,t,i,s){const n=new vn(this._contextMenu,"checkbox",e,s,i);return this._items.push(n),this._contextMenu._setHandler(n.id(),t),n}}class En extends vn{constructor(e,t,i){super(e,"subMenu",t,i),this._sections=new Map,this._sectionList=[]}_init(){yn.forEach(e=>this.section(e))}section(e){let t=e?this._sections.get(e):null;return t||(t=new wn(this._contextMenu),e?(this._sections.set(e,t),this._sectionList.push(t)):this._sectionList.splice(Sn._groupWeights.indexOf("default"),0,t)),t}headerSection(){return this.section("header")}newSection(){return this.section("new")}revealSection(){return this.section("reveal")}clipboardSection(){return this.section("clipboard")}editSection(){return this.section("edit")}debugSection(){return this.section("debug")}viewSection(){return this.section("view")}defaultSection(){return this.section("default")}saveSection(){return this.section("save")}footerSection(){return this.section("footer")}_buildDescriptor(){const e={type:"subMenu",label:this._label,enabled:!this._disabled,subItems:[]},t=this._sectionList.filter(e=>!!e._items.length);for(const i of t){for(const t of i._items)e.subItems.push(t._buildDescriptor());i!==t.peekLast()&&e.subItems.push({type:"separator"})}return e}appendItemsAtLocation(e){for(const t of o.Runtime.instance().extensions("context-menu-item")){const i=t.descriptor().location||"";if(!i.startsWith(e+"/"))continue;const s=i.substr(e.length+1);s&&!s.includes("/")&&this.section(s).appendAction(t.descriptor().actionId)}}}vn._uniqueSectionName=0;class Sn extends En{constructor(e,t,i,s){super(null),this._contextMenu=this,super._init(),this._defaultSection=this.defaultSection(),this._pendingPromises=[],this._pendingTargets=[],this._event=e,this._useSoftMenu=!!t,this._x=void 0===i?e.x:i,this._y=void 0===s?e.y:s,this._handlers={},this._id=0;const n=e.deepElementFromPoint();n&&this.appendApplicableItems(n)}static initialize(){a.InspectorFrontendHostInstance.events.addEventListener(d.Events.SetUseSoftMenu,(function(e){Sn._useSoftMenu=e.data}))}static installHandler(e){e.body.addEventListener("contextmenu",(function(e){new Sn(e).show()}),!1)}_nextId(){return this._id++}show(){Promise.all(this._pendingPromises).then(function(e){if(Sn._pendingMenu!==this)return;delete Sn._pendingMenu;for(let t=0;t<e.length;++t){const i=e[t],s=this._pendingTargets[t];for(let e=0;e<i.length;++e){i[e].appendApplicableItems(this._event,this,s)}}this._pendingPromises=[],this._pendingTargets=[]}.bind(this)).then(this._innerShow.bind(this)),Sn._pendingMenu=this,this._event.consume(!0)}discard(){this._softMenu&&this._softMenu.discard()}_innerShow(){const e=this._buildMenuDescriptors();if(this._useSoftMenu||Sn._useSoftMenu||a.InspectorFrontendHostInstance.isHostedMode())this._softMenu=new bn(e,this._itemSelected.bind(this)),this._softMenu.show(this._event.target.ownerDocument,new AnchorBox(this._x,this._y,0,0));else{a.InspectorFrontendHostInstance.showContextMenuAtPoint(this._x,this._y,e,this._event.target.ownerDocument),setImmediate(function(){a.InspectorFrontendHostInstance.events.addEventListener(d.Events.ContextMenuCleared,this._menuCleared,this),a.InspectorFrontendHostInstance.events.addEventListener(d.Events.ContextMenuItemSelected,this._onItemSelected,this)}.bind(this))}}setX(e){this._x=e}setY(e){this._y=e}_setHandler(e,t){t&&(this._handlers[e]=t)}_buildMenuDescriptors(){return super._buildDescriptor().subItems}_onItemSelected(e){this._itemSelected(e.data)}_itemSelected(e){this._handlers[e]&&this._handlers[e].call(this),this._menuCleared()}_menuCleared(){a.InspectorFrontendHostInstance.events.removeEventListener(d.Events.ContextMenuCleared,this._menuCleared,this),a.InspectorFrontendHostInstance.events.removeEventListener(d.Events.ContextMenuItemSelected,this._onItemSelected,this)}containsTarget(e){return this._pendingTargets.indexOf(e)>=0}appendApplicableItems(e){this._pendingPromises.push(o.Runtime.instance().allInstances(xn,e)),this._pendingTargets.push(e)}}const yn=["header","new","reveal","edit","clipboard","debug","view","default","save","footer"];class xn{appendApplicableItems(e,t,i){}}Sn._groupWeights=yn;var Cn=Object.freeze({__proto__:null,Item:vn,Section:wn,SubMenu:En,ContextMenu:Sn,_groupWeights:yn,Provider:xn});var Tn=Object.freeze({__proto__:null,DropTarget:class{constructor(e,t,i,s){e.addEventListener("dragenter",this._onDragEnter.bind(this),!0),e.addEventListener("dragover",this._onDragOver.bind(this),!0),this._element=e,this._transferTypes=t,this._messageText=i,this._handleDrop=s,this._enabled=!0,this._dragMaskElement=null}setEnabled(e){this._enabled=e}_onDragEnter(e){this._enabled&&this._hasMatchingType(e)&&e.consume(!0)}_hasMatchingType(e){const t=e;if(!t.dataTransfer)return!1;for(const e of this._transferTypes){if(Array.from(t.dataTransfer.items).find(t=>e.kind===t.kind&&!!e.type.exec(t.type)))return!0}return!1}_onDragOver(e){const t=e;if(!this._enabled||!this._hasMatchingType(t))return;if(t.dataTransfer&&(t.dataTransfer.dropEffect="copy"),t.consume(!0),this._dragMaskElement)return;this._dragMaskElement=this._element.createChild("div","");Ue(this._dragMaskElement,{cssFile:"ui/dropTarget.css",enableLegacyPatching:!0,delegatesFocus:void 0}).createChild("div","drop-target-message").textContent=this._messageText,this._dragMaskElement.addEventListener("drop",this._onDrop.bind(this),!0),this._dragMaskElement.addEventListener("dragleave",this._onDragLeave.bind(this),!0)}_onDrop(e){const t=e;t.consume(!0),this._removeMask(),this._enabled&&t.dataTransfer&&this._handleDrop(t.dataTransfer)}_onDragLeave(e){e.consume(!0),this._removeMask()}_removeMask(){this._dragMaskElement&&(this._dragMaskElement.remove(),this._dragMaskElement=null)}},Type:{URI:{kind:"string",type:/text\/uri-list/},Folder:{kind:"file",type:/$^/},File:{kind:"file",type:/.*/},WebFile:{kind:"file",type:/[\w]+/},ImageFile:{kind:"file",type:/image\/.*/}}});var In=Object.freeze({__proto__:null,EmptyWidget:class extends et{constructor(e){super(),this.registerRequiredCSS("ui/emptyWidget.css",{enableLegacyPatching:!0}),this.element.classList.add("empty-view-scroller"),this._contentElement=this.element.createChild("div","empty-view"),this._textElement=this._contentElement.createChild("div","empty-bold-text"),this._textElement.textContent=e}appendParagraph(){return this._contentElement.createChild("p")}appendLink(e){return this._contentElement.appendChild(Mt.create(e,ls`Learn more`))}set text(e){this._textElement.textContent=e}}});class kn extends tt{constructor(e,s){super(),this.registerRequiredCSS("ui/filter.css",{enableLegacyPatching:!0}),this._enabled=!0,this.element.classList.add("filter-bar"),this._stateSetting=i.Settings.instance().createSetting("filterBar-"+e+"-toggled",!!s),this._filterButton=new as(this._stateSetting,"largeicon-filter",t.UIString("Filter")),this._filters=[],this._updateFilterBar(),this._stateSetting.addChangeListener(this._updateFilterBar.bind(this))}filterButton(){return this._filterButton}addFilter(e){this._filters.push(e),this.element.appendChild(e.element()),e.addEventListener(Ln.Events.FilterChanged,this._filterChanged,this),this._updateFilterButton()}setEnabled(e){this._enabled=e,this._filterButton.setEnabled(e),this._updateFilterBar()}forceShowFilterBar(){this._alwaysShowFilters=!0,this._updateFilterBar()}showOnce(){this._stateSetting.set(!0)}_filterChanged(e){this._updateFilterButton(),this.dispatchEventToListeners(kn.Events.Changed)}wasShown(){super.wasShown(),this._updateFilterBar()}_updateFilterBar(){this.parentWidget()&&!this._showingWidget&&(this.visible()?(this._showingWidget=!0,this.showWidget(),this._showingWidget=!1):this.hideWidget())}focus(){for(let e=0;e<this._filters.length;++e)if(this._filters[e]instanceof Mn){this._filters[e].focus();break}}_updateFilterButton(){let e=!1;for(const t of this._filters)e=e||t.isActive();this._filterButton.setDefaultWithRedColor(e),this._filterButton.setToggleWithRedColor(e)}clear(){this.element.removeChildren(),this._filters=[],this._updateFilterButton()}setting(){return this._stateSetting}visible(){return this._alwaysShowFilters||this._stateSetting.get()&&this._enabled}}kn.Events={Changed:Symbol("Changed")};class Ln extends s.EventTarget{isActive(){throw new Error("not implemented")}element(){throw new Error("not implemented")}}Ln.Events={FilterChanged:Symbol("FilterChanged")};class Mn extends e.ObjectWrapper{constructor(){super(),this._filterElement=document.createElement("div"),this._filterElement.className="filter-text-filter";const e=this._filterElement.createChild("div","filter-input-container");this._filterInputElement=e.createChild("span","filter-input-field"),this._prompt=new zi,this._prompt.initialize(this._completions.bind(this)," "),this._proxyElement=this._prompt.attach(this._filterInputElement),this._proxyElement.title=t.UIString("e.g. /small[\\d]+/ url:a.com/b"),this._prompt.setPlaceholder(t.UIString("Filter")),this._prompt.addEventListener(Ni.TextChanged,this._valueChanged.bind(this)),this._suggestionProvider=null;const i=e.createChild("div","filter-input-clear-button");i.appendChild(Ee.create("mediumicon-gray-cross-hover","filter-cancel-button")),i.addEventListener("click",()=>{this.clear(),this.focus()}),this._updateEmptyStyles()}_completions(e,t,i){return this._suggestionProvider?this._suggestionProvider(e,t,i):Promise.resolve([])}isActive(){return!!this._prompt.text()}element(){return this._filterElement}value(){return this._prompt.textWithCurrentSuggestion()}setValue(e){this._prompt.setText(e),this._valueChanged()}focus(){this._filterInputElement.focus()}setSuggestionProvider(e){this._prompt.clearAutocomplete(),this._suggestionProvider=e}_valueChanged(){this.dispatchEventToListeners(Ln.Events.FilterChanged,null),this._updateEmptyStyles()}_updateEmptyStyles(){this._filterElement.classList.toggle("filter-text-empty",!this._prompt.text())}clear(){this.setValue("")}}class Pn extends e.ObjectWrapper{constructor(e,i){super(),this._filtersElement=document.createElement("div"),this._filtersElement.classList.add("filter-bitset-filter"),X(this._filtersElement),$(this._filtersElement),this._filtersElement.title=t.UIString("%sClick to select multiple types",_t.shortcutToString("",pt.CtrlOrMeta)),this._typeFilterElementTypeNames=new WeakMap,this._allowedTypes=new Set,this._typeFilterElements=[],this._addBit(Pn.ALL_TYPES,t.UIString("All")),this._typeFilterElements[0].tabIndex=0,this._filtersElement.createChild("div","filter-bitset-filter-divider");for(let t=0;t<e.length;++t)this._addBit(e[t].name,e[t].label,e[t].title);i?(this._setting=i,i.addChangeListener(this._settingChanged.bind(this)),this._settingChanged()):this._toggleTypeFilter(Pn.ALL_TYPES,!1)}reset(){this._toggleTypeFilter(Pn.ALL_TYPES,!1)}isActive(){return!this._allowedTypes.has(Pn.ALL_TYPES)}element(){return this._filtersElement}accept(e){return this._allowedTypes.has(Pn.ALL_TYPES)||this._allowedTypes.has(e)}_settingChanged(){const e=this._setting.get();this._allowedTypes=new Set;for(const t of this._typeFilterElements){const i=this._typeFilterElementTypeNames.get(t);i&&e[i]&&this._allowedTypes.add(i)}this._update()}_update(){(0===this._allowedTypes.size||this._allowedTypes.has(Pn.ALL_TYPES))&&(this._allowedTypes=new Set,this._allowedTypes.add(Pn.ALL_TYPES));for(const e of this._typeFilterElements){const t=this._typeFilterElementTypeNames.get(e),i=this._allowedTypes.has(t||"");e.classList.toggle("selected",i),re(e,i)}this.dispatchEventToListeners(Ln.Events.FilterChanged,null)}_addBit(e,t,i){const s=this._filtersElement.createChild("span",e);s.tabIndex=-1,this._typeFilterElementTypeNames.set(s,e),li(s,t),Y(s),i&&(s.title=i),s.addEventListener("click",this._onTypeFilterClicked.bind(this),!1),s.addEventListener("keydown",this._onTypeFilterKeydown.bind(this),!1),this._typeFilterElements.push(s)}_onTypeFilterClicked(e){const t=e;let i;if(i=r.isMac()?t.metaKey&&!t.ctrlKey&&!t.altKey&&!t.shiftKey:t.ctrlKey&&!t.metaKey&&!t.altKey&&!t.shiftKey,t.target){const e=t.target,s=this._typeFilterElementTypeNames.get(e);this._toggleTypeFilter(s,i)}}_onTypeFilterKeydown(e){const t=e,i=t.target;i&&("ArrowLeft"===t.key||"ArrowUp"===t.key?this._keyFocusNextBit(i,!0)&&t.consume(!0):"ArrowRight"===t.key||"ArrowDown"===t.key?this._keyFocusNextBit(i,!1)&&t.consume(!0):isEnterOrSpaceKey(t)&&this._onTypeFilterClicked(t))}_keyFocusNextBit(e,t){const i=this._typeFilterElements.indexOf(e);if(-1===i)return!1;const s=t?i-1:i+1;if(s<0||s>=this._typeFilterElements.length)return!1;const n=this._typeFilterElements[s];return n.tabIndex=0,e.tabIndex=-1,n.focus(),!0}_toggleTypeFilter(e,t){if(t&&e!==Pn.ALL_TYPES?this._allowedTypes.delete(Pn.ALL_TYPES):this._allowedTypes=new Set,this._allowedTypes.has(e)?this._allowedTypes.delete(e):this._allowedTypes.add(e),this._setting){const e={};for(const t of this._allowedTypes)e[t]=!0;this._setting.set(e)}else this._update()}}Pn.ALL_TYPES="all";class Dn extends e.ObjectWrapper{constructor(e,t,i,s){super(),this._filterElement=document.createElement("div"),this._filterElement.classList.add("filter-checkbox-filter"),this._activeWhenChecked=!!i,this._label=ci.create(t),this._filterElement.appendChild(this._label),this._checkboxElement=this._label.checkboxElement,s?ki(this._checkboxElement,s):this._checkboxElement.checked=!0,this._checkboxElement.addEventListener("change",this._fireUpdated.bind(this),!1)}isActive(){return this._activeWhenChecked===this._checkboxElement.checked}checked(){return this._checkboxElement.checked}setChecked(e){this._checkboxElement.checked=e}element(){return this._filterElement}labelElement(){return this._label}_fireUpdated(){this.dispatchEventToListeners(Ln.Events.FilterChanged,null)}setColor(e,t){this._label.backgroundColor=e,this._label.borderColor=t}}var An=Object.freeze({__proto__:null,FilterBar:kn,FilterUI:Ln,TextFilterUI:Mn,NamedBitSetFilterUI:Pn,CheckboxFilterUI:Dn,Item:void 0});var Rn=Object.freeze({__proto__:null,FilterSuggestionBuilder:class{constructor(e,t){this._keys=e,this._valueSorter=t||((e,t)=>t.sort()),this._valuesMap=new Map}completions(e,t,i){if(!t&&!i)return Promise.resolve([]);const s=t.startsWith("-");s&&(t=t.substring(1));const n=s?"-":"",o=t.indexOf(":"),r=[];if(-1===o){const e=new RegExp("^"+t.escapeForRegExp(),"i");for(const t of this._keys)e.test(t)&&r.push({text:n+t+":"})}else{const e=t.substring(0,o).toLowerCase(),i=t.substring(o+1),s=new RegExp("^"+i.escapeForRegExp(),"i"),a=Array.from(this._valuesMap.get(e)||new Set);this._valueSorter(e,a);for(const t of a)s.test(t)&&t!==i&&r.push({text:n+e+":"+t})}return Promise.resolve(r)}addItem(e,t){if(!t)return;let i=this._valuesMap.get(e);i||(i=new Set,this._valuesMap.set(e,i)),i.add(t)}clear(){this._valuesMap.clear()}}});class On{constructor(){a.InspectorFrontendHostInstance.events.addEventListener(d.Events.KeyEventUnhandled,this._onKeyEventUnhandled,this)}_onKeyEventUnhandled(e){const t=e.data,i=t.type,s=t.key,n=t.keyCode,o=t.modifiers;if("keydown"!==i)return;const r=E.instance(),a=dn.instance();r.setFlavor(un,un.instance),a.handleKey(_t.makeKey(n,o),s),r.setFlavor(un,null)}}new On;var Fn=Object.freeze({__proto__:null,ForwardedInputEventHandler:On});let Bn=null;class zn extends HTMLInputElement{constructor(){super(),this._history=[""],this._historyPosition=0,this.addEventListener("keydown",this._onKeyDown.bind(this),!1),this.addEventListener("input",this._onInput.bind(this),!1)}static create(){return Bn||(Bn=ve("input","history-input",zn)),Bn()}_onInput(e){this._history.length===this._historyPosition+1&&(this._history[this._history.length-1]=this.value)}_onKeyDown(e){const t=e;t.keyCode===gt.Up.code?(this._historyPosition=Math.max(this._historyPosition-1,0),this.value=this._history[this._historyPosition],this.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),t.consume(!0)):t.keyCode===gt.Down.code?(this._historyPosition=Math.min(this._historyPosition+1,this._history.length-1),this.value=this._history[this._historyPosition],this.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),t.consume(!0)):t.keyCode===gt.Enter.code&&this._saveToHistory()}_saveToHistory(){this._history.length>1&&this._history[this._history.length-2]===this.value||(this._history[this._history.length-1]=this.value,this._historyPosition=this._history.length-1,this._history.push(""))}}var Wn=Object.freeze({__proto__:null,HistoryInput:zn});let Nn=null;class Hn{static startEditing(e,t){return Nn||(Nn=new Hn),Nn.startEditing(e,t)}editorContent(e){const t=e.element;return"INPUT"===t.tagName&&"text"===t.type?t.value:t.textContent||""}setUpEditor(e){const t=e.element;t.classList.add("editing"),t.setAttribute("contenteditable","plaintext-only");const i=t.getAttribute("role");K(t),e.oldRole=i;const s=t.tabIndex;("number"!=typeof s||s<0)&&(t.tabIndex=0),this._focusRestorer=new Jt(t),e.oldTabIndex=s}closeEditor(e){const t=e.element;t.classList.remove("editing"),t.removeAttribute("contenteditable"),"string"!=typeof e.oldRole?t.removeAttribute("role"):t.setAttribute("role",e.oldRole),"number"!=typeof e.oldTabIndex?t.removeAttribute("tabIndex"):t.tabIndex=e.oldTabIndex,t.scrollTop=0,t.scrollLeft=0}cancelEditing(e){const t=e.element;"INPUT"===t.tagName&&"text"===t.type?t.value=e.oldText||"":t.textContent=e.oldText}startEditing(e,t){if(!Ft(e,!0))return null;const i=t||new Vn((function(){}),(function(){})),s={element:e,config:i,oldRole:null,oldTabIndex:null,oldText:null},n=i.commitHandler,o=i.cancelHandler,r=i.pasteHandler,a=i.context;let l="";const h=this;function d(t){i.blurHandler&&!i.blurHandler(e,t)||m.call(e)}function c(){Ft(e,!1),e.removeEventListener("blur",d,!1),e.removeEventListener("keydown",g,!0),r&&e.removeEventListener("paste",p,!0),h._focusRestorer&&h._focusRestorer.restore(),h.closeEditor(s)}function u(){h.cancelEditing(s),c(),o(this,a)}function m(){c(),n(this,h.editorContent(s),s.oldText||"",a,l)}function _(t,i){"commit"===t?(m.call(e),i.consume(!0)):"cancel"===t?(u.call(e),i.consume(!0)):t&&t.startsWith("move-")&&(l=t.substring(5),"Tab"===i.key&&i.consume(!0),d())}function p(e){if(!r)return;_(r(e),e)}function g(e){let t=function(e){return isEnterKey(e)?"commit":e.keyCode===gt.Esc.code||"Escape"===e.key?"cancel":"Tab"===e.key?"move-"+(e.shiftKey?"backward":"forward"):""}(e);if(!t&&i.postKeydownFinishHandler){const s=i.postKeydownFinishHandler(e);s&&(t=s)}_(t,e)}this.setUpEditor(s),s.oldText=this.editorContent(s),e.addEventListener("blur",d,!1),e.addEventListener("keydown",g,!0),void 0!==r&&e.addEventListener("paste",p,!0);return{cancel:u.bind(e),commit:m.bind(e)}}}class Vn{constructor(e,t,i,s){this.commitHandler=e,this.cancelHandler=t,this.context=i,this.blurHandler=s,this.pasteHandler,this.postKeydownFinishHandler}setPasteHandler(e){this.pasteHandler=e}setPostKeydownFinishHandler(e){this.postKeydownFinishHandler=e}}var Un=Object.freeze({__proto__:null,InplaceEditor:Hn,Config:Vn,EventHandler:void 0,Controller:void 0,EditingContext:void 0});var Kn=Object.freeze({__proto__:null,ListWidget:class extends et{constructor(e,t=!0){super(!0,t),this.registerRequiredCSS("ui/listWidget.css",{enableLegacyPatching:!0}),this._delegate=e,this._list=this.contentElement.createChild("div","list"),this._lastSeparator=!1,this._focusRestorer=null,this._items=[],this._editable=[],this._elements=[],this._editor=null,this._editItem=null,this._editElement=null,this._emptyPlaceholder=null,this._updatePlaceholder()}clear(){this._items=[],this._editable=[],this._elements=[],this._lastSeparator=!1,this._list.removeChildren(),this._updatePlaceholder(),this._stopEditing()}appendItem(e,t){if(this._lastSeparator&&this._items.length){const e=document.createElement("div");e.classList.add("list-separator"),this._list.appendChild(e)}this._lastSeparator=!1,this._items.push(e),this._editable.push(t);const i=this._list.createChild("div","list-item");i.appendChild(this._delegate.renderItem(e,t)),t&&(i.classList.add("editable"),i.tabIndex=0,i.appendChild(this._createControls(e,i))),this._elements.push(i),this._updatePlaceholder()}appendSeparator(){this._lastSeparator=!0}removeItem(e){this._editItem===this._items[e]&&this._stopEditing();const t=this._elements[e],i=t.previousElementSibling,s=i&&i.classList.contains("list-separator"),n=t.nextElementSibling,o=n&&n.classList.contains("list-separator");!s||!o&&n||i.remove(),o&&!i&&n.remove(),t.remove(),this._elements.splice(e,1),this._items.splice(e,1),this._editable.splice(e,1),this._updatePlaceholder()}addNewItem(e,t){this._startEditing(t,null,this._elements[e]||null)}setEmptyPlaceholder(e){this._emptyPlaceholder=e,this._updatePlaceholder()}_createControls(e,i){const s=document.createElement("div");s.classList.add("controls-container"),s.classList.add("fill"),s.createChild("div","controls-gradient");const n=s.createChild("div","controls-buttons"),o=new Ji("",n),r=new ss(t.UIString("Edit"),"largeicon-edit");r.addEventListener(ss.Events.Click,function(){const t=this._elements.indexOf(i),s=this._elements[t+1]||null;this._startEditing(e,i,s)}.bind(this)),o.appendToolbarItem(r);const a=new ss(t.UIString("Remove"),"largeicon-trash-bin");return a.addEventListener(ss.Events.Click,function(){const e=this._elements.indexOf(i);this.element.focus(),this._delegate.removeItemRequested(this._items[e],e)}.bind(this)),o.appendToolbarItem(a),s}wasShown(){super.wasShown(),this._stopEditing()}_updatePlaceholder(){this._emptyPlaceholder&&(this._elements.length||this._editor?this._emptyPlaceholder.remove():this._list.appendChild(this._emptyPlaceholder))}_startEditing(e,i,s){if(i&&this._editElement===i)return;this._stopEditing(),this._focusRestorer=new Jt(this.element),this._list.classList.add("list-editing"),this._editItem=e,this._editElement=i,i&&i.classList.add("hidden");const n=i?this._elements.indexOf(i):-1;this._editor=this._delegate.beginEdit(e),this._updatePlaceholder(),this._list.insertBefore(this._editor.element,s),this._editor.beginEdit(e,n,i?t.UIString("Save"):t.UIString("Add"),this._commitEditing.bind(this),this._stopEditing.bind(this))}_commitEditing(){const e=this._editItem,t=!this._editElement,i=this._editor;this._stopEditing(),e&&this._delegate.commitEdit(e,i,t)}_stopEditing(){this._list.classList.remove("list-editing"),this._focusRestorer&&this._focusRestorer.restore(),this._editElement&&this._editElement.classList.remove("hidden"),this._editor&&this._editor.element.parentElement&&this._editor.element.remove(),this._editor=null,this._editItem=null,this._editElement=null,this._updatePlaceholder()}},Delegate:class{renderItem(e,t){throw new Error("not implemented yet")}removeItemRequested(e,t){}beginEdit(e){throw new Error("not implemented yet")}commitEdit(e,t,i){}},Editor:class{constructor(){this.element=document.createElement("div"),this.element.classList.add("editor-container"),this.element.addEventListener("keydown",i.bind(null,isEscKey,this._cancelClicked.bind(this)),!1),this.element.addEventListener("keydown",i.bind(null,isEnterKey,this._commitClicked.bind(this)),!1),this._contentElement=this.element.createChild("div","editor-content");const e=this.element.createChild("div","editor-buttons");function i(e,t,i){e(i)&&(i.consume(!0),t())}this._commitButton=hi("",this._commitClicked.bind(this),"",!0),e.appendChild(this._commitButton),this._cancelButton=hi(t.UIString("Cancel"),this._cancelClicked.bind(this),"",!0,"mousedown"),this._cancelButton.addEventListener("keydown",i.bind(null,isEnterKey,this._cancelClicked.bind(this)),!1),e.appendChild(this._cancelButton),this._errorMessageContainer=this.element.createChild("div","list-widget-input-validation-error"),R(this._errorMessageContainer),this._controls=[],this._controlByName=new Map,this._validators=[],this._commit=null,this._cancel=null,this._item=null,this._index=-1}contentElement(){return this._contentElement}createInput(e,t,i,s){const n=di("",t);return n.placeholder=i,n.addEventListener("input",this._validateControls.bind(this,!1),!1),n.addEventListener("blur",this._validateControls.bind(this,!1),!1),de(n,i),this._controlByName.set(e,n),this._controls.push(n),this._validators.push(s),n}createSelect(e,t,i,s){const n=document.createElement("select");n.classList.add("chrome-select");for(let e=0;e<t.length;++e){const i=n.createChild("option");i.value=t[e],i.textContent=t[e]}return s&&(n.title=s,de(n,s)),n.addEventListener("input",this._validateControls.bind(this,!1),!1),n.addEventListener("blur",this._validateControls.bind(this,!1),!1),this._controlByName.set(e,n),this._controls.push(n),this._validators.push(i),n}control(e){return this._controlByName.get(e)}_validateControls(e){let t=!0;this._errorMessageContainer.textContent="";for(let i=0;i<this._controls.length;++i){const s=this._controls[i],{valid:n,errorMessage:o}=this._validators[i].call(null,this._item,this._index,s);s.classList.toggle("error-input",!n&&!e),le(s,!n&&!e),e||!o||this._errorMessageContainer.textContent||(this._errorMessageContainer.textContent=o),t=t&&n}this._commitButton.disabled=!t}beginEdit(e,t,i,s,n){this._commit=s,this._cancel=n,this._item=e,this._index=t,this._commitButton.textContent=i,this.element.scrollIntoViewIfNeeded(!1),this._controls.length&&this._controls[0].focus(),this._validateControls(!0)}_commitClicked(){if(this._commitButton.disabled)return;const e=this._commit;this._commit=null,this._cancel=null,this._item=null,this._index=-1,e&&e()}_cancelClicked(){const e=this._cancel;this._commit=null,this._cancel=null,this._item=null,this._index=-1,e&&e()}},ValidatorResult:void 0});class jn extends et{constructor(e){super(),this.element.classList.add("panel"),this.element.setAttribute("aria-label",e),this.element.classList.add(e),this._panelName=e,UI.panels[e]=this}get name(){return this._panelName}searchableView(){return null}elementsToRestoreScrollPositionsFor(){return[]}}var qn=Object.freeze({__proto__:null,Panel:jn,PanelWithSidebar:class extends jn{constructor(e,t){super(e),this._panelSplitWidget=new Is(!0,!1,this._panelName+"PanelSplitViewState",t||200),this._panelSplitWidget.show(this.element),this._mainWidget=new et,this._panelSplitWidget.setMainWidget(this._mainWidget),this._sidebarWidget=new et,this._sidebarWidget.setMinimumSize(100,25),this._panelSplitWidget.setSidebarWidget(this._sidebarWidget),this._sidebarWidget.element.classList.add("panel-sidebar")}panelSidebarElement(){return this._sidebarWidget.element}mainElement(){return this._mainWidget.element}splitWidget(){return this._panelSplitWidget}}});let Gn=null;var Xn=Object.freeze({__proto__:null,PopoverHelper:class{constructor(e,t){this._disableOnClick=!1,this._hasPadding=!1,this._getRequest=t,this._scheduledRequest=null,this._hidePopoverCallback=null,this._container=e,this._showTimeout=0,this._hideTimeout=0,this._hidePopoverTimer=null,this._showPopoverTimer=null,this._boundMouseDown=this._mouseDown.bind(this),this._boundMouseMove=this._mouseMove.bind(this),this._boundMouseOut=this._mouseOut.bind(this),this._container.addEventListener("mousedown",this._boundMouseDown,!1),this._container.addEventListener("mousemove",this._boundMouseMove,!1),this._container.addEventListener("mouseout",this._boundMouseOut,!1),this.setTimeout(1e3)}setTimeout(e,t){this._showTimeout=e,this._hideTimeout="number"==typeof t?t:e/2}setHasPadding(e){this._hasPadding=e}setDisableOnClick(e){this._disableOnClick=e}_eventInScheduledContent(e){const t=e;return!!this._scheduledRequest&&this._scheduledRequest.box.contains(t.clientX,t.clientY)}_mouseDown(e){this._disableOnClick?this.hidePopover():this._eventInScheduledContent(e)||(this._startHidePopoverTimer(0),this._stopShowPopoverTimer(),this._startShowPopoverTimer(e,0))}_mouseMove(e){const t=e;this._eventInScheduledContent(t)||(this._startHidePopoverTimer(this._hideTimeout),this._stopShowPopoverTimer(),t.which&&this._disableOnClick||this._startShowPopoverTimer(t,this.isPopoverVisible()?.6*this._showTimeout:this._showTimeout))}_popoverMouseMove(e){this._stopHidePopoverTimer()}_popoverMouseOut(e,t){const i=t;if(!e.isShowing())return;const s=i.relatedTarget;s&&!s.isSelfOrDescendant(e.contentElement)&&this._startHidePopoverTimer(this._hideTimeout)}_mouseOut(e){this.isPopoverVisible()&&(this._eventInScheduledContent(e)||this._startHidePopoverTimer(this._hideTimeout))}_startHidePopoverTimer(e){this._hidePopoverCallback&&!this._hidePopoverTimer&&(this._hidePopoverTimer=window.setTimeout(()=>{this._hidePopover(),this._hidePopoverTimer=null},e))}_startShowPopoverTimer(e,t){this._scheduledRequest=this._getRequest.call(null,e),this._scheduledRequest&&(this._showPopoverTimer=window.setTimeout(()=>{this._showPopoverTimer=null,this._stopHidePopoverTimer(),this._hidePopover();const t=e.target.ownerDocument;this._showPopover(t)},t))}_stopShowPopoverTimer(){this._showPopoverTimer&&(clearTimeout(this._showPopoverTimer),this._showPopoverTimer=null)}isPopoverVisible(){return!!this._hidePopoverCallback}hidePopover(){this._stopShowPopoverTimer(),this._hidePopover()}_hidePopover(){this._hidePopoverCallback&&(this._hidePopoverCallback.call(null),this._hidePopoverCallback=null)}_showPopover(e){const t=new ot;t.registerRequiredCSS("ui/popover.css",{enableLegacyPatching:!0}),t.setSizeBehavior(lt.MeasureContent),t.setMarginBehavior(ht.Arrow);const i=this._scheduledRequest;i&&i.show.call(null,t).then(s=>{s&&(this._scheduledRequest===i?(Gn&&(console.error("One popover is already visible"),Gn.hidePopover()),Gn=this,t.contentElement.classList.toggle("has-padding",this._hasPadding),t.contentElement.addEventListener("mousemove",this._popoverMouseMove.bind(this),!0),t.contentElement.addEventListener("mouseout",this._popoverMouseOut.bind(this,t),!0),t.setContentAnchorBox(i.box),t.show(e),this._hidePopoverCallback=()=>{i.hide&&i.hide.call(null),t.hide(),Gn=null}):i.hide&&i.hide.call(null))})}_stopHidePopoverTimer(){this._hidePopoverTimer&&(clearTimeout(this._hidePopoverTimer),this._hidePopoverTimer=null,this._stopShowPopoverTimer())}dispose(){this._container.removeEventListener("mousedown",this._boundMouseDown,!1),this._container.removeEventListener("mousemove",this._boundMouseMove,!1),this._container.removeEventListener("mouseout",this._boundMouseOut,!1)}},PopoverRequest:void 0});var $n=Object.freeze({__proto__:null,ProgressIndicator:class{constructor(){this.element=document.createElement("div"),this.element.classList.add("progress-indicator"),this._shadowRoot=Ue(this.element,{cssFile:"ui/progressIndicator.css",enableLegacyPatching:!0,delegatesFocus:void 0}),this._contentElement=this._shadowRoot.createChild("div","progress-indicator-shadow-container"),this._labelElement=this._contentElement.createChild("div","title"),this._progressElement=this._contentElement.createChild("progress"),this._progressElement.value=0,this._stopButton=this._contentElement.createChild("button","progress-indicator-shadow-stop-button"),this._stopButton.addEventListener("click",this.cancel.bind(this)),this._isCanceled=!1,this._worked=0}show(e){e.appendChild(this.element)}done(){this._isDone||(this._isDone=!0,this.element.remove())}cancel(){this._isCanceled=!0}isCanceled(){return this._isCanceled}setTitle(e){this._labelElement.textContent=e}setTotalWork(e){this._progressElement.max=e}setWorked(e,t){this._worked=e,this._progressElement.value=e,t&&this.setTitle(t)}worked(e){this.setWorked(this._worked+(e||1))}}});class Yn extends et{constructor(e){super(!0),this.registerRequiredCSS("ui/remoteDebuggingTerminatedScreen.css",{enableLegacyPatching:!0});const i=this.contentElement.createChild("div","message"),s=i.createChild("span","reason");s.textContent=e,i.appendChild(Xt("Debugging connection was closed. Reason: %s",[s])),this.contentElement.createChild("div","message").textContent=t.UIString("Reconnect when ready by reopening DevTools.");const n=hi(t.UIString("Reconnect DevTools"),()=>window.location.reload());this.contentElement.createChild("div","button").appendChild(n)}static show(e){const t=new rn;t.setSizeBehavior(lt.MeasureContent),t.addCloseButton(),t.setDimmed(!0),new Yn(e).show(t.contentElement),t.show()}}var Qn=Object.freeze({__proto__:null,RemoteDebuggingTerminatedScreen:Yn});class Zn extends et{constructor(e,t){super(),this.element.classList.add("report-section"),t&&this.element.classList.add(t),this._headerElement=this.element.createChild("div","report-section-header"),this._titleElement=this._headerElement.createChild("div","report-section-title"),this.setTitle(e),Z(this._titleElement,2),this._fieldList=this.element.createChild("div","vbox"),this._fieldMap=new Map}title(){return this._titleElement.textContent||""}setTitle(e,t){this._titleElement.textContent!==e&&(this._titleElement.textContent=e),this._titleElement.title=t||"",this._titleElement.classList.toggle("hidden",!this._titleElement.textContent)}setUiGroupTitle(e){B(this.element),de(this.element,e)}createToolbar(){const e=new Ji("");return this._headerElement.appendChild(e.element),e}appendField(e,t){let i=this._fieldMap.get(e);return i||(i=this._fieldList.createChild("div","report-field"),i.createChild("div","report-field-name").textContent=e,this._fieldMap.set(e,i),i.createChild("div","report-field-value")),t&&i.lastElementChild&&(i.lastElementChild.textContent=t),i.lastElementChild}appendFlexedField(e,t){const i=this.appendField(e,t);return i.classList.add("report-field-value-is-flexed"),i}removeField(e){const t=this._fieldMap.get(e);t&&t.remove(),this._fieldMap.delete(e)}setFieldVisible(e,t){const i=this._fieldMap.get(e);i&&i.classList.toggle("hidden",!t)}fieldValue(e){const t=this._fieldMap.get(e);return t?t.lastElementChild:null}appendRow(){return this._fieldList.createChild("div","report-row")}appendSelectableRow(){return this._fieldList.createChild("div","report-row report-row-selectable")}clearContent(){this._fieldList.removeChildren(),this._fieldMap.clear()}markFieldListAsGroup(){B(this._fieldList),de(this._fieldList,this.title())}setIconMasked(e){this.element.classList.toggle("show-mask",e)}}var Jn=Object.freeze({__proto__:null,ReportView:class extends et{constructor(e){super(!0),this.registerRequiredCSS("ui/reportView.css",{enableLegacyPatching:!0}),this._contentBox=this.contentElement.createChild("div","report-content-box"),this._headerElement=this._contentBox.createChild("div","report-header vbox"),this._titleElement=this._headerElement.createChild("div","report-title"),e&&(this._titleElement.textContent=e),Z(this._titleElement,1),this._sectionList=this._contentBox.createChild("div","vbox")}setTitle(e){this._titleElement.textContent!==e&&(this._titleElement.textContent=e)}setSubtitle(e){this._subtitleElement&&this._subtitleElement.textContent===e||(this._subtitleElement||(this._subtitleElement=this._headerElement.createChild("div","report-subtitle")),this._subtitleElement.textContent=e)}setURL(e){this._urlElement||(this._urlElement=this._headerElement.createChild("div","report-url link")),this._urlElement.removeChildren(),e&&this._urlElement.appendChild(e)}createToolbar(){const e=new Ji("");return this._headerElement.appendChild(e.element),e}appendSection(e,t){const i=new Zn(e,t);return i.show(this._sectionList),i}sortSections(e){const t=this.children().slice();if(!t.every((t,i,s)=>!i||e(s[i-1],s[i])<=0)){this.detachChildWidgets(),t.sort(e);for(const e of t)e.show(this._sectionList)}}setHeaderVisible(e){this._headerElement.classList.toggle("hidden",!e)}setBodyScrollable(e){this._contentBox.classList.toggle("no-scroll",!e)}},Section:Zn});var eo=Object.freeze({__proto__:null,RootView:class extends et{constructor(){super(),this.markAsRoot(),this.element.classList.add("root-view"),this.registerRequiredCSS("ui/rootView.css",{enableLegacyPatching:!0}),this.element.setAttribute("spellcheck","false")}attachToDocument(e){e.defaultView&&e.defaultView.addEventListener("resize",this.doResize.bind(this),!1),this._window=e.defaultView,this.doResize(),this.show(e.body)}doResize(){if(this._window){const e=this.constraints().minimum,t=Ui.instance().zoomFactor(),i=Math.min(0,this._window.innerWidth-e.width/t);this.element.style.marginRight=i+"px";const s=Math.min(0,this._window.innerHeight-e.height/t);this.element.style.marginBottom=s+"px"}super.doResize()}}});const to=Symbol("searchableView");class io{constructor(e,t,i){this.query=e,this.caseSensitive=t,this.isRegex=i}toSearchRegex(e){let t=this.caseSensitive?"":"i";e&&(t+="g");const i=this.isRegex?"/"+this.query+"/":this.query;let s;try{/^\/.+\/$/.test(i)&&(s=new RegExp(i.substring(1,i.length-1),t),s.__fromRegExpQuery=!0)}catch(e){}return s||(s=createPlainTextSearchRegex(i,t)),s}}var so=Object.freeze({__proto__:null,SearchableView:class extends et{constructor(e,s){super(!0),this.registerRequiredCSS("ui/searchableView.css",{enableLegacyPatching:!0}),this.element[to]=this,this._searchProvider=e,this._setting=s?i.Settings.instance().createSetting(s,{}):null,this._replaceable=!1,this.contentElement.createChild("slot"),this._footerElementContainer=this.contentElement.createChild("div","search-bar hidden"),this._footerElementContainer.style.order=100,this._footerElement=this._footerElementContainer.createChild("div","toolbar-search");const n=new Ji("replace-toggle-toolbar",this._footerElement);this._replaceToggleButton=new os(t.UIString("Replace"),"mediumicon-replace"),this._replaceToggleButton.addEventListener(ss.Events.Click,this._toggleReplace,this),n.appendToolbarItem(this._replaceToggleButton);const o=this._footerElement.createChild("div","toolbar-search-inputs"),r=o.createChild("div","toolbar-search-control");this._searchInputElement=zn.create(),this._searchInputElement.type="search",this._searchInputElement.classList.add("search-replace","custom-search-input"),this._searchInputElement.id="search-input-field",this._searchInputElement.placeholder=t.UIString("Find"),r.appendChild(this._searchInputElement),this._matchesElement=r.createChild("label","search-results-matches"),this._matchesElement.setAttribute("for","search-input-field");const a=r.createChild("div","toolbar-search-navigation-controls");this._searchNavigationPrevElement=a.createChild("div","toolbar-search-navigation toolbar-search-navigation-prev"),this._searchNavigationPrevElement.addEventListener("click",this._onPrevButtonSearch.bind(this),!1),this._searchNavigationPrevElement.title=t.UIString("Search previous"),de(this._searchNavigationPrevElement,t.UIString("Search previous")),this._searchNavigationNextElement=a.createChild("div","toolbar-search-navigation toolbar-search-navigation-next"),this._searchNavigationNextElement.addEventListener("click",this._onNextButtonSearch.bind(this),!1),this._searchNavigationNextElement.title=t.UIString("Search next"),de(this._searchNavigationNextElement,t.UIString("Search next")),this._searchInputElement.addEventListener("keydown",this._onSearchKeyDown.bind(this),!0),this._searchInputElement.addEventListener("input",this._onInput.bind(this),!1),this._replaceInputElement=o.createChild("input","search-replace toolbar-replace-control hidden"),this._replaceInputElement.addEventListener("keydown",this._onReplaceKeyDown.bind(this),!0),this._replaceInputElement.placeholder=t.UIString("Replace"),this._buttonsContainer=this._footerElement.createChild("div","toolbar-search-buttons");const l=this._buttonsContainer.createChild("div","first-row-buttons"),h=new Ji("toolbar-search-options",l);this._searchProvider.supportsCaseSensitiveSearch()&&(this._caseSensitiveButton=new os(t.UIString("Match Case")),this._caseSensitiveButton.setText("Aa"),this._caseSensitiveButton.addEventListener(ss.Events.Click,this._toggleCaseSensitiveSearch,this),h.appendToolbarItem(this._caseSensitiveButton)),this._searchProvider.supportsRegexSearch()&&(this._regexButton=new os(t.UIString("Use Regular Expression")),this._regexButton.setText(".*"),this._regexButton.addEventListener(ss.Events.Click,this._toggleRegexSearch,this),h.appendToolbarItem(this._regexButton));const d=hi(t.UIString("Cancel"),this.closeSearch.bind(this),"search-action-button");l.appendChild(d),this._secondRowButtons=this._buttonsContainer.createChild("div","second-row-buttons hidden"),this._replaceButtonElement=hi(t.UIString("Replace"),this._replace.bind(this),"search-action-button"),this._replaceButtonElement.disabled=!0,this._secondRowButtons.appendChild(this._replaceButtonElement),this._replaceAllButtonElement=hi(t.UIString("Replace all"),this._replaceAll.bind(this),"search-action-button"),this._secondRowButtons.appendChild(this._replaceAllButtonElement),this._replaceAllButtonElement.disabled=!0,this._minimalSearchQuerySize=3,this._loadSetting()}static fromElement(e){let t=null;for(;e&&!t;)t=e[to],e=e.parentElementOrShadowHost();return t}_toggleCaseSensitiveSearch(){this._caseSensitiveButton.setToggled(!this._caseSensitiveButton.toggled()),this._saveSetting(),this._performSearch(!1,!0)}_toggleRegexSearch(){this._regexButton.setToggled(!this._regexButton.toggled()),this._saveSetting(),this._performSearch(!1,!0)}_toggleReplace(){this._replaceToggleButton.setToggled(!this._replaceToggleButton.toggled()),this._updateSecondRowVisibility()}_saveSetting(){if(!this._setting)return;const e=this._setting.get()||{};e.caseSensitive=this._caseSensitiveButton.toggled(),e.isRegex=this._regexButton.toggled(),this._setting.set(e)}_loadSetting(){const e=this._setting&&this._setting.get()||{};this._searchProvider.supportsCaseSensitiveSearch()&&this._caseSensitiveButton.setToggled(!!e.caseSensitive),this._searchProvider.supportsRegexSearch()&&this._regexButton.setToggled(!!e.isRegex)}setMinimalSearchQuerySize(e){this._minimalSearchQuerySize=e}setPlaceholder(e,t){this._searchInputElement.placeholder=e,t&&de(this._searchInputElement,t)}setReplaceable(e){this._replaceable=e}updateSearchMatchesCount(e){this._searchProvider.currentSearchMatches!==e&&(this._searchProvider.currentSearchMatches=e,this._updateSearchMatchesCountAndCurrentMatchIndex(this._searchProvider.currentQuery?e:0,-1))}updateCurrentMatchIndex(e){this._updateSearchMatchesCountAndCurrentMatchIndex(this._searchProvider.currentSearchMatches,e)}isSearchVisible(){return this._searchIsVisible}closeSearch(){this.cancelSearch(),this._footerElementContainer.hasFocus()&&this.focus()}_toggleSearchBar(e){this._footerElementContainer.classList.toggle("hidden",!e),this.doResize()}cancelSearch(){this._searchIsVisible&&(this.resetSearch(),delete this._searchIsVisible,this._toggleSearchBar(!1))}resetSearch(){this._clearSearch(),this._updateReplaceVisibility(),this._matchesElement.textContent=""}refreshSearch(){this._searchIsVisible&&(this.resetSearch(),this._performSearch(!1,!1))}handleFindNextShortcut(){return!!this._searchIsVisible&&(this._searchProvider.jumpToNextSearchResult(),!0)}handleFindPreviousShortcut(){return!!this._searchIsVisible&&(this._searchProvider.jumpToPreviousSearchResult(),!0)}handleFindShortcut(){return this.showSearchField(),!0}handleCancelSearchShortcut(){return!!this._searchIsVisible&&(this.closeSearch(),!0)}_updateSearchNavigationButtonState(e){this._replaceButtonElement.disabled=!e,this._replaceAllButtonElement.disabled=!e,this._searchNavigationPrevElement.classList.toggle("enabled",e),this._searchNavigationNextElement.classList.toggle("enabled",e)}_updateSearchMatchesCountAndCurrentMatchIndex(e,i){this._currentQuery?this._matchesElement.textContent=0===e||i>=0?t.UIString("%d of %d",i+1,e):1===e?t.UIString("1 match"):t.UIString("%d matches",e):this._matchesElement.textContent="",this._updateSearchNavigationButtonState(e>0)}showSearchField(){let e;if(this._searchIsVisible&&this.cancelSearch(),!this._searchInputElement.hasFocus()){const t=tn.instance().element.window().getSelection();t.rangeCount&&(e=t.toString().replace(/\r?\n.*/,""))}this._toggleSearchBar(!0),this._updateReplaceVisibility(),e&&(this._searchInputElement.value=e),this._performSearch(!1,!1),this._searchInputElement.focus(),this._searchInputElement.select(),this._searchIsVisible=!0}_updateReplaceVisibility(){this._replaceToggleButton.setVisible(this._replaceable),this._replaceable||(this._replaceToggleButton.setToggled(!1),this._updateSecondRowVisibility())}_onSearchKeyDown(e){if(isEscKey(e))return this.closeSearch(),void e.consume(!0);isEnterKey(e)&&(this._currentQuery?this._jumpToNextSearchResult(e.shiftKey):this._performSearch(!0,!0,e.shiftKey))}_onReplaceKeyDown(e){isEnterKey(e)&&this._replace()}_jumpToNextSearchResult(e){this._currentQuery&&(e?this._searchProvider.jumpToPreviousSearchResult():this._searchProvider.jumpToNextSearchResult())}_onNextButtonSearch(e){this._searchNavigationNextElement.classList.contains("enabled")&&(this._jumpToNextSearchResult(),this._searchInputElement.focus())}_onPrevButtonSearch(e){this._searchNavigationPrevElement.classList.contains("enabled")&&(this._jumpToNextSearchResult(!0),this._searchInputElement.focus())}_onFindClick(e){this._currentQuery?this._jumpToNextSearchResult():this._performSearch(!0,!0),this._searchInputElement.focus()}_onPreviousClick(e){this._currentQuery?this._jumpToNextSearchResult(!0):this._performSearch(!0,!0,!0),this._searchInputElement.focus()}_clearSearch(){delete this._currentQuery,this._searchProvider.currentQuery&&(delete this._searchProvider.currentQuery,this._searchProvider.searchCanceled()),this._updateSearchMatchesCountAndCurrentMatchIndex(0,-1)}_performSearch(e,t,i){const s=this._searchInputElement.value;if(!s||!e&&s.length<this._minimalSearchQuerySize&&!this._currentQuery)return void this._clearSearch();this._currentQuery=s,this._searchProvider.currentQuery=s;const n=this._currentSearchConfig();this._searchProvider.performSearch(n,t,i)}_currentSearchConfig(){const e=this._searchInputElement.value,t=!!this._caseSensitiveButton&&this._caseSensitiveButton.toggled(),i=!!this._regexButton&&this._regexButton.toggled();return new io(e,t,i)}_updateSecondRowVisibility(){const e=this._replaceToggleButton.toggled();this._footerElementContainer.classList.toggle("replaceable",e),this._secondRowButtons.classList.toggle("hidden",!e),this._replaceInputElement.classList.toggle("hidden",!e),e?this._replaceInputElement.focus():this._searchInputElement.focus(),this.doResize()}_replace(){const e=this._currentSearchConfig();this._searchProvider.replaceSelectionWith(e,this._replaceInputElement.value),delete this._currentQuery,this._performSearch(!0,!0)}_replaceAll(){const e=this._currentSearchConfig();this._searchProvider.replaceAllWith(e,this._replaceInputElement.value)}_onInput(e){this._valueChangedTimeoutId&&clearTimeout(this._valueChangedTimeoutId);const t=this._searchInputElement.value.length<3?200:0;this._valueChangedTimeoutId=setTimeout(this._onValueChanged.bind(this),t)}_onValueChanged(){this._searchIsVisible&&(delete this._valueChangedTimeoutId,this._performSearch(!1,!0))}},_symbol:to,Searchable:class{searchCanceled(){}performSearch(e,t,i){}jumpToNextSearchResult(){}jumpToPreviousSearchResult(){}supportsCaseSensitiveSearch(){}supportsRegexSearch(){}},Replaceable:class{replaceSelectionWith(e,t){}replaceAllWith(e,t){}},SearchConfig:io});var no=Object.freeze({__proto__:null,SegmentedButton:class extends tt{constructor(){super(!0),this._buttons=new Map,this._selected=null,this.registerRequiredCSS("ui/segmentedButton.css",{enableLegacyPatching:!0}),this.contentElement.classList.add("segmented-button")}addSegment(e,t,i){const s=this.contentElement.createChild("button","segmented-button-segment");s.textContent=e,i&&(s.title=i),this._buttons.set(t,s),s.addEventListener("click",()=>this.select(t))}select(e){if(this._selected!==e){this._selected=e;for(const[e,t]of this._buttons)t.classList.toggle("segmented-button-segment-selected",e===this._selected)}}selected(){return this._selected}}});var oo=Object.freeze({__proto__:null,SoftDropDown:class{constructor(e,t){this._delegate=t,this._selectedItem=null,this._model=e,this._placeholderText=ls`(no item selected)`,this.element=document.createElement("button"),this.element.classList.add("soft-dropdown"),Ne(this.element,"ui/softDropDownButton.css",{enableLegacyPatching:!0}),this._titleElement=this.element.createChild("span","title");const i=Ee.create("smallicon-triangle-down");this.element.appendChild(i),se(this.element,!1),this._glassPane=new ot,this._glassPane.setMarginBehavior(ht.NoMargin),this._glassPane.setAnchorBehavior(at.PreferBottom),this._glassPane.setOutsideClickCallback(this._hide.bind(this)),this._glassPane.setPointerEventsBehavior(rt.BlockedByGlassPane),this._list=new Ri(e,this,Ai.EqualHeightItems),this._list.element.classList.add("item-list"),this._rowHeight=36,this._width=315,Ue(this._glassPane.contentElement,{cssFile:"ui/softDropDown.css",enableLegacyPatching:!0,delegatesFocus:void 0}).appendChild(this._list.element),j(this._list.element),this._listWasShowing200msAgo=!1,this.element.addEventListener("mousedown",e=>{this._listWasShowing200msAgo?this._hide(e):this.element.disabled||this._show(e)},!1),this.element.addEventListener("keydown",this._onKeyDownButton.bind(this),!1),this._list.element.addEventListener("keydown",this._onKeyDownList.bind(this),!1),this._list.element.addEventListener("focusout",this._hide.bind(this),!1),this._list.element.addEventListener("mousedown",e=>e.consume(!0),!1),this._list.element.addEventListener("mouseup",e=>{e.target!==this._list.element&&this._listWasShowing200msAgo&&(this._selectHighlightedItem(),this._hide(e))},!1),e.addEventListener(Pi.ItemsReplaced,this._itemsReplaced,this)}_show(e){this._glassPane.isShowing()||(this._glassPane.setContentAnchorBox(this.element.boxInWindow()),this._glassPane.show(this.element.ownerDocument),this._list.element.focus(),se(this.element,!0),this._updateGlasspaneSize(),this._selectedItem&&this._list.selectItem(this._selectedItem),e.consume(!0),setTimeout(()=>{this._listWasShowing200msAgo=!0},200))}_updateGlasspaneSize(){const e=this._rowHeight*Math.min(this._model.length,9);this._glassPane.setMaxContentSize(new Fe(this._width,e)),this._list.viewportResized()}_hide(e){setTimeout(()=>{this._listWasShowing200msAgo=!1},200),this._glassPane.hide(),this._list.selectItem(null),se(this.element,!1),this.element.focus(),e.consume(!0)}_onKeyDownButton(e){const t=e;let i=!1;switch(t.key){case"ArrowUp":this._show(t),this._list.selectItemNextPage(),i=!0;break;case"ArrowDown":this._show(t),this._list.selectItemPreviousPage(),i=!0;break;case"Enter":case" ":this._show(t),i=!0}i&&t.consume(!0)}_onKeyDownList(e){const t=e;let i=!1;switch(t.key){case"ArrowLeft":i=this._list.selectPreviousItem(!1,!1);break;case"ArrowRight":i=this._list.selectNextItem(!1,!1);break;case"Home":for(let e=0;e<this._model.length;e++)if(this.isItemSelectable(this._model.at(e))){this._list.selectItem(this._model.at(e)),i=!0;break}break;case"End":for(let e=this._model.length-1;e>=0;e--)if(this.isItemSelectable(this._model.at(e))){this._list.selectItem(this._model.at(e)),i=!0;break}break;case"Escape":this._hide(t),i=!0;break;case"Tab":case"Enter":case" ":this._selectHighlightedItem(),this._hide(t),i=!0;break;default:if(1===t.key.length){const e=this._list.selectedIndex(),s=t.key.toUpperCase();for(let t=0;t<this._model.length;t++){const i=this._model.at((e+t+1)%this._model.length);if(this._delegate.titleFor(i).toUpperCase().startsWith(s)){this._list.selectItem(i);break}}i=!0}}i&&t.consume(!0)}setWidth(e){this._width=e,this._updateGlasspaneSize()}setRowHeight(e){this._rowHeight=e}setPlaceholderText(e){this._placeholderText=e,this._selectedItem||(this._titleElement.textContent=this._placeholderText)}_itemsReplaced(e){const t=e.data.removed;this._selectedItem&&-1!==t.indexOf(this._selectedItem)&&(this._selectedItem=null,this._selectHighlightedItem()),this._updateGlasspaneSize()}selectItem(e){this._selectedItem=e,this._selectedItem?this._titleElement.textContent=this._delegate.titleFor(this._selectedItem):this._titleElement.textContent=this._placeholderText,this._delegate.itemSelected(this._selectedItem)}createElementForItem(e){const t=document.createElement("div");return t.classList.add("item"),t.addEventListener("mousemove",t=>{(t.movementX||t.movementY)&&this._delegate.isItemSelectable(e)&&this._list.selectItem(e,!1,!0)}),t.classList.toggle("disabled",!this._delegate.isItemSelectable(e)),t.classList.toggle("highlighted",this._list.selectedItem()===e),q(t),t.appendChild(this._delegate.createElementForItem(e)),t}heightForItem(e){return this._rowHeight}isItemSelectable(e){return this._delegate.isItemSelectable(e)}selectedItemChanged(e,t,i,s){i&&i.classList.remove("highlighted"),s&&s.classList.add("highlighted"),me(this._list.element,s),this._delegate.highlightedItemChanged(e,t,i&&i.firstElementChild,s&&s.firstElementChild)}updateSelectedItemARIA(e,t){return!1}_selectHighlightedItem(){this.selectItem(this._list.selectedItem())}refreshItem(e){this._list.refreshItem(e)}},Delegate:class{titleFor(e){throw new Error("not implemented yet")}createElementForItem(e){throw new Error("not implemented yet")}isItemSelectable(e){throw new Error("not implemented yet")}itemSelected(e){}highlightedItemChanged(e,t,i,s){}}});var ro=Object.freeze({__proto__:null,SyntaxHighlighter:class{constructor(e,t){this._mimeType=e,this._stripExtraWhitespace=t}createSpan(e,t){const i=document.createElement("span");return i.className=t.replace(/\S+/g,"cm-$&"),this._stripExtraWhitespace&&"whitespace"!==t&&(e=e.replace(/^[\n\r]*/,"").replace(/\s*$/,"")),li(i,e),i}syntaxHighlightNode(e){const t=e.textContent?e.textContent.split("\n"):[];let i,s;const n=o.Runtime.instance().extension(b.TokenizerFactory);return n?n.instance().then(e=>r.call(this,e)):Promise.resolve();function r(n){e.removeChildren();const o=n.createTokenizer(this._mimeType);for(let n=0;n<t.length;++n){if(s=t[n],i=0,o(s,a.bind(this)),i<s.length){const t=s.substring(i,s.length);li(e,t)}n<t.length-1&&li(e,"\n")}}function a(t,n,o,r){if(n){if(o>i){const t=s.substring(i,o);li(e,t)}e.appendChild(this.createSpan(t,n)),i=r}}}}});var ao=Object.freeze({__proto__:null,TargetCrashedScreen:class extends et{constructor(e){super(!0),this.registerRequiredCSS("ui/targetCrashedScreen.css",{enableLegacyPatching:!0}),this.contentElement.createChild("div","message").textContent=t.UIString("DevTools was disconnected from the page."),this.contentElement.createChild("div","message").textContent=t.UIString("Once page is reloaded, DevTools will automatically reconnect."),this._hideCallback=e}willHide(){this._hideCallback.call(null)}}});class lo extends s.EventTarget{widget(){throw new Error("not implemented")}fullRange(){throw new Error("not implemented")}selection(){throw new Error("not implemented")}setSelection(e){}text(e){throw new Error("not implemented")}textWithCurrentSuggestion(){throw new Error("not implemented")}setText(e){}line(e){throw new Error("not implemented")}newlineAndIndent(){}addKeyDownHandler(e){}configureAutocomplete(e){}clearAutocomplete(){}visualCoordinates(e,t){throw new Error("not implemented")}tokenAtTextPosition(e,t){throw new Error("not implemented")}setPlaceholder(e){}}const ho={CursorChanged:Symbol("CursorChanged"),TextChanged:Symbol("TextChanged"),SuggestionChanged:Symbol("SuggestionChanged")};var co=Object.freeze({__proto__:null,TextEditorFactory:class{createEditor(e){throw new Error("not implemented")}},TextEditor:lo,Events:ho,Options:void 0,AutocompleteConfig:void 0});var uo=Object.freeze({__proto__:null,ThrottledWidget:class extends et{constructor(e,t){super(e),this._updateThrottler=new n.Throttler(void 0===t?100:t),this._updateWhenVisible=!1}doUpdate(){return Promise.resolve()}update(){this._updateWhenVisible=!this.isShowing(),this._updateWhenVisible||this._updateThrottler.schedule(()=>this.isShowing()?this.doUpdate():(this._updateWhenVisible=!0,Promise.resolve()))}wasShown(){super.wasShown(),this._updateWhenVisible&&this.update()}}});class mo extends e.ObjectWrapper{constructor(){super(),this._createRootElement(),this.selectedTreeElement=null,this.expandTreeElementsWhenArrowing=!1,this._comparator=null,this.contentElement=this._rootElement._childrenListNode,this.contentElement.addEventListener("keydown",this._treeKeyDown.bind(this),!1),this._preventTabOrder=!1,this._showSelectionOnKeyboardFocus=!1,this.setFocusable(!0),this.element=this.contentElement,V(this.element)}setShowSelectionOnKeyboardFocus(e,t){this.contentElement.classList.toggle("hide-selection-when-blurred",e),this._preventTabOrder=!!t,this._focusable&&(this.contentElement.tabIndex=t?-1:0),this._showSelectionOnKeyboardFocus=e}_createRootElement(){this._rootElement=new po,this._rootElement.treeOutline=this,this._rootElement.root=!0,this._rootElement.selectable=!1,this._rootElement.expanded=!0,this._rootElement._childrenListNode.classList.remove("children")}rootElement(){return this._rootElement}firstChild(){return this._rootElement.firstChild()}_lastDescendent(){let e=this._rootElement.lastChild();for(;e.expanded&&e.childCount();)e=e.lastChild();return e}appendChild(e,t){this._rootElement.appendChild(e,t)}insertChild(e,t){this._rootElement.insertChild(e,t)}removeChild(e){this._rootElement.removeChild(e)}removeChildren(){this._rootElement.removeChildren()}treeElementFromPoint(e,t){const i=this.contentElement.ownerDocument.deepElementFromPoint(e,t);if(!i)return null;const s=i.enclosingNodeOrSelfWithNodeNameInArray(["ol","li"]);return s?s.parentTreeElement||s.treeElement:null}treeElementFromEvent(e){return e?this.treeElementFromPoint(e.pageX,e.pageY):null}setComparator(e){this._comparator=e}setFocusable(e){this._focusable=e,this.updateFocusable()}updateFocusable(){this._focusable?(this.contentElement.tabIndex=this._preventTabOrder||this.selectedTreeElement?-1:0,this.selectedTreeElement&&this.selectedTreeElement._setFocusable(!0)):(this.contentElement.removeAttribute("tabIndex"),this.selectedTreeElement&&this.selectedTreeElement._setFocusable(!1))}focus(){this.selectedTreeElement?this.selectedTreeElement.listItemElement.focus():this.contentElement.focus()}useLightSelectionColor(){this._useLightSelectionColor=!0}_bindTreeElement(e){e.treeOutline&&console.error("Binding element for the second time: "+(new Error).stack),e.treeOutline=this,e.onbind()}_unbindTreeElement(e){e.treeOutline||console.error("Unbinding element that was not bound: "+(new Error).stack),e.deselect(),e.onunbind(),e.treeOutline=null}selectPrevious(){let e=this.selectedTreeElement.traversePreviousTreeElement(!0);for(;e&&!e.selectable;)e=e.traversePreviousTreeElement(!this.expandTreeElementsWhenArrowing);return!!e&&(e.select(!1,!0),!0)}selectNext(){let e=this.selectedTreeElement.traverseNextTreeElement(!0);for(;e&&!e.selectable;)e=e.traverseNextTreeElement(!this.expandTreeElementsWhenArrowing);return!!e&&(e.select(!1,!0),!0)}forceSelect(e=!1,t=!0){this.selectedTreeElement&&this.selectedTreeElement.deselect(),this._selectFirst(e,t)}_selectFirst(e=!1,t=!0){let i=this.firstChild();for(;i&&!i.selectable;)i=i.traverseNextTreeElement(!0);return!!i&&(i.select(e,t),!0)}_selectLast(){let e=this._lastDescendent();for(;e&&!e.selectable;)e=e.traversePreviousTreeElement(!0);return!!e&&(e.select(!1,!0),!0)}_treeKeyDown(e){if(e.shiftKey||e.metaKey||e.ctrlKey||Ot())return;let t=!1;this.selectedTreeElement?"ArrowUp"!==e.key||e.altKey?"ArrowDown"!==e.key||e.altKey?"ArrowLeft"===e.key?t=this.selectedTreeElement.collapseOrAscend(e.altKey):"ArrowRight"===e.key?this.selectedTreeElement.revealed()?t=this.selectedTreeElement.descendOrExpand(e.altKey):(this.selectedTreeElement.reveal(),t=!0):8===e.keyCode||46===e.keyCode?t=this.selectedTreeElement.ondelete():isEnterKey(e)?t=this.selectedTreeElement.onenter():e.keyCode===gt.Space.code?t=this.selectedTreeElement.onspace():"Home"===e.key?t=this._selectFirst():"End"===e.key&&(t=this._selectLast()):t=this.selectNext():t=this.selectPrevious():"ArrowUp"!==e.key||e.altKey?"ArrowDown"!==e.key||e.altKey||(t=this._selectFirst()):t=this._selectLast(),t&&e.consume(!0)}_deferredScrollIntoView(e,t){this._treeElementToScrollIntoView||this.element.window().requestAnimationFrame(function(){const e=this._treeElementToScrollIntoView.listItemElement.getBoundingClientRect(),t=this.contentElement.getBoundingClientRect(),i=this.element.getBoundingClientRect(),s=i.left-t.left,n=i.top-t.top;let o=e.left-t.left;o>s&&o<s+i.width?o=s:this._centerUponScrollIntoView&&(o-=i.width/2);let r=e.top-t.top;r>n&&r<n+i.height?r=n:this._centerUponScrollIntoView&&(r-=i.height/2);this.element.scrollTo(o,r),delete this._treeElementToScrollIntoView,delete this._centerUponScrollIntoView}.bind(this)),this._treeElementToScrollIntoView=e,this._centerUponScrollIntoView=t}}const _o={ElementAttached:Symbol("ElementAttached"),ElementsDetached:Symbol("ElementsDetached"),ElementExpanded:Symbol("ElementExpanded"),ElementCollapsed:Symbol("ElementCollapsed"),ElementSelected:Symbol("ElementSelected")};class po{constructor(e,t){this.treeOutline=null,this.parent=null,this.previousSibling=null,this.nextSibling=null,this._boundOnFocus=this._onFocus.bind(this),this._boundOnBlur=this._onBlur.bind(this),this._listItemNode=createElement("li"),this.titleElement=this._listItemNode.createChild("span","tree-element-title"),this._listItemNode.treeElement=this,e&&(this.title=e),this._listItemNode.addEventListener("mousedown",this._handleMouseDown.bind(this),!1),this._listItemNode.addEventListener("click",this._treeElementToggled.bind(this),!1),this._listItemNode.addEventListener("dblclick",this._handleDoubleClick.bind(this),!1),U(this._listItemNode),this._childrenListNode=createElement("ol"),this._childrenListNode.parentTreeElement=this,this._childrenListNode.classList.add("children"),B(this._childrenListNode),this._hidden=!1,this._selectable=!0,this.expanded=!1,this.selected=!1,this.setExpandable(t||!1),this._collapsible=!0,this.toggleOnClick=!1}hasAncestor(e){if(!e)return!1;let t=this.parent;for(;t;){if(e===t)return!0;t=t.parent}return!1}hasAncestorOrSelf(e){return this===e||this.hasAncestor(e)}isHidden(){if(this.hidden)return!0;let e=this.parent;for(;e;){if(e.hidden)return!0;e=e.parent}return!1}children(){return this._children||[]}childCount(){return this._children?this._children.length:0}firstChild(){return this._children?this._children[0]:null}lastChild(){return this._children?this._children[this._children.length-1]:null}childAt(e){return this._children?this._children[e]:null}indexOfChild(e){return this._children?this._children.indexOf(e):-1}appendChild(e,t){let i;this._children||(this._children=[]),i=t?this._children.lowerBound(e,t):this.treeOutline&&this.treeOutline._comparator?this._children.lowerBound(e,this.treeOutline._comparator):this._children.length,this.insertChild(e,i)}insertChild(e,t){if(this._children||(this._children=[]),!e)throw"child can't be undefined or null";console.assert(!e.parent,"Attempting to insert a child that is already in the tree, reparenting is not supported.");const i=t>0?this._children[t-1]:null;i?(i.nextSibling=e,e.previousSibling=i):e.previousSibling=null;const s=this._children[t];s?(s.previousSibling=e,e.nextSibling=s):e.nextSibling=null,this._children.splice(t,0,e),this.setExpandable(!0),e.parent=this,this.treeOutline&&this.treeOutline._bindTreeElement(e);for(let t=e.firstChild();this.treeOutline&&t;t=t.traverseNextTreeElement(!1,e,!0))this.treeOutline._bindTreeElement(t);e.onattach(),e._ensureSelection(),this.treeOutline&&this.treeOutline.dispatchEventToListeners(_o.ElementAttached,e);const n=e.nextSibling?e.nextSibling._listItemNode:null;this._childrenListNode.insertBefore(e._listItemNode,n),this._childrenListNode.insertBefore(e._childrenListNode,n),e.selected&&e.select(),e.expanded&&e.expand()}removeChildAtIndex(e){if(e<0||e>=this._children.length)throw"childIndex out of range";const t=this._children[e];this._children.splice(e,1);const i=t.parent;this.treeOutline&&this.treeOutline.selectedTreeElement&&this.treeOutline.selectedTreeElement.hasAncestorOrSelf(t)&&(t.nextSibling?t.nextSibling.select(!0):t.previousSibling?t.previousSibling.select(!0):i&&i.select(!0)),t.previousSibling&&(t.previousSibling.nextSibling=t.nextSibling),t.nextSibling&&(t.nextSibling.previousSibling=t.previousSibling),t.parent=null,this.treeOutline&&this.treeOutline._unbindTreeElement(t);for(let e=t.firstChild();this.treeOutline&&e;e=e.traverseNextTreeElement(!1,t,!0))this.treeOutline._unbindTreeElement(e);t._detach(),this.treeOutline&&this.treeOutline.dispatchEventToListeners(_o.ElementsDetached)}removeChild(e){if(!e)throw"child can't be undefined or null";if(e.parent!==this)return;const t=this._children.indexOf(e);if(-1===t)throw"child not found in this node's children";this.removeChildAtIndex(t)}removeChildren(){!this.root&&this.treeOutline&&this.treeOutline.selectedTreeElement&&this.treeOutline.selectedTreeElement.hasAncestorOrSelf(this)&&this.select(!0);for(let e=0;this._children&&e<this._children.length;++e){const t=this._children[e];t.previousSibling=null,t.nextSibling=null,t.parent=null,this.treeOutline&&this.treeOutline._unbindTreeElement(t);for(let e=t.firstChild();this.treeOutline&&e;e=e.traverseNextTreeElement(!1,t,!0))this.treeOutline._unbindTreeElement(e);t._detach()}this._children=[],this.treeOutline&&this.treeOutline.dispatchEventToListeners(_o.ElementsDetached)}get selectable(){return!this.isHidden()&&this._selectable}set selectable(e){this._selectable=e}get listItemElement(){return this._listItemNode}get childrenListElement(){return this._childrenListNode}get title(){return this._title}set title(e){this._title!==e&&(this._title=e,"string"==typeof e?(this.titleElement.textContent=e,this.tooltip=e):(this.titleElement=e,this.tooltip=""),this._listItemNode.removeChildren(),this._leadingIconsElement&&this._listItemNode.appendChild(this._leadingIconsElement),this._listItemNode.appendChild(this.titleElement),this._trailingIconsElement&&this._listItemNode.appendChild(this._trailingIconsElement),this._ensureSelection())}titleAsText(){return this._title?"string"==typeof this._title?this._title:this._title.textContent:""}startEditingTitle(e){Hn.startEditing(this.titleElement,e),this.treeOutline._shadowRoot.getSelection().selectAllChildren(this.titleElement)}setLeadingIcons(e){if(this._leadingIconsElement||e.length){this._leadingIconsElement||(this._leadingIconsElement=document.createElement("div"),this._leadingIconsElement.classList.add("leading-icons"),this._leadingIconsElement.classList.add("icons-container"),this._listItemNode.insertBefore(this._leadingIconsElement,this.titleElement),this._ensureSelection()),this._leadingIconsElement.removeChildren();for(const t of e)this._leadingIconsElement.appendChild(t)}}setTrailingIcons(e){if(this._trailingIconsElement||e.length){this._trailingIconsElement||(this._trailingIconsElement=document.createElement("div"),this._trailingIconsElement.classList.add("trailing-icons"),this._trailingIconsElement.classList.add("icons-container"),this._listItemNode.appendChild(this._trailingIconsElement),this._ensureSelection()),this._trailingIconsElement.removeChildren();for(const t of e)this._trailingIconsElement.appendChild(t)}}get tooltip(){return this._tooltip||""}set tooltip(e){this._tooltip!==e&&(this._tooltip=e,this._listItemNode.title=e)}isExpandable(){return this._expandable}setExpandable(e){this._expandable!==e&&(this._expandable=e,this._listItemNode.classList.toggle("parent",e),e?se(this._listItemNode,!1):(this.collapse(),ne(this._listItemNode)))}setCollapsible(e){this._collapsible!==e&&(this._collapsible=e,this._listItemNode.classList.toggle("always-parent",!e),e||this.expand())}get hidden(){return this._hidden}set hidden(e){if(this._hidden!==e&&(this._hidden=e,this._listItemNode.classList.toggle("hidden",e),this._childrenListNode.classList.toggle("hidden",e),e&&this.treeOutline&&this.treeOutline.selectedTreeElement&&this.treeOutline.selectedTreeElement.hasAncestorOrSelf(this))){const e=this.treeOutline.selectedTreeElement.listItemElement.hasFocus();this.treeOutline.forceSelect(!e,!1)}}invalidateChildren(){this._children&&(this.removeChildren(),this._children=null)}_ensureSelection(){this.treeOutline&&this.treeOutline._renderSelection&&(this._selectionElement||(this._selectionElement=document.createElement("div"),this._selectionElement.classList.add("selection"),this._selectionElement.classList.add("fill")),this._listItemNode.insertBefore(this._selectionElement,this.listItemElement.firstChild))}_treeElementToggled(e){const t=e.currentTarget;if(t.treeElement!==this||t.hasSelection())return;console.assert(!!this.treeOutline);const i=!!this.treeOutline&&this.treeOutline._showSelectionOnKeyboardFocus,s=this.toggleOnClick&&(i||!this.selectable),n=this.isEventWithinDisclosureTriangle(e);(s||n)&&(this.expanded?e.altKey?this.collapseRecursively():this.collapse():e.altKey?this.expandRecursively():this.expand(),e.consume())}_handleMouseDown(e){const t=e.currentTarget;t&&this.selectable&&t.treeElement===this&&(this.isEventWithinDisclosureTriangle(e)||this.selectOnMouseDown(e))}_handleDoubleClick(e){const t=e.currentTarget;if(!t||t.treeElement!==this)return;this.ondblclick(e)||this._expandable&&!this.expanded&&this.expand()}_detach(){this._listItemNode.remove(),this._childrenListNode.remove()}collapse(){if(!this.expanded||!this._collapsible)return;this._listItemNode.classList.remove("expanded"),this._childrenListNode.classList.remove("expanded"),se(this._listItemNode,!1),this.expanded=!1,this.oncollapse(),this.treeOutline&&this.treeOutline.dispatchEventToListeners(_o.ElementCollapsed,this);const e=this.treeOutline.selectedTreeElement;e&&e.hasAncestor(this)&&this.select(!0,!0)}collapseRecursively(){let e=this;for(;e;)e.expanded&&e.collapse(),e=e.traverseNextTreeElement(!1,this,!0)}collapseChildren(){if(this._children)for(const e of this._children)e.collapseRecursively()}expand(){!this._expandable||this.expanded&&this._children||(this.expanded=!0,this._populateIfNeeded(),this._listItemNode.classList.add("expanded"),this._childrenListNode.classList.add("expanded"),se(this._listItemNode,!0),this.treeOutline&&(this.onexpand(),this.treeOutline.dispatchEventToListeners(_o.ElementExpanded,this)))}async expandRecursively(e){let t=this;const i={};let s=0;for(isNaN(e)&&(e=3);t;)await t._populateIfNeeded(),s<e&&t.expand(),t=t.traverseNextTreeElement(!1,this,s>=e,i),s+=i.depthChange}collapseOrAscend(e){if(this.expanded&&this._collapsible)return e?this.collapseRecursively():this.collapse(),!0;if(!this.parent||this.parent.root)return!1;if(!this.parent.selectable)return this.parent.collapse(),!0;let t=this.parent;for(;t&&!t.selectable;)t=t.parent;return!!t&&(t.select(!1,!0),!0)}descendOrExpand(e){if(!this._expandable)return!1;if(!this.expanded)return e?this.expandRecursively():this.expand(),!0;let t=this.firstChild();for(;t&&!t.selectable;)t=t.nextSibling;return!!t&&(t.select(!1,!0),!0)}reveal(e){let t=this.parent;for(;t&&!t.root;)t.expanded||t.expand(),t=t.parent;this.treeOutline._deferredScrollIntoView(this,!!e)}revealed(){let e=this.parent;for(;e&&!e.root;){if(!e.expanded)return!1;e=e.parent}return!0}selectOnMouseDown(e){if(this.select(!1,!0)&&e.consume(!0),this._listItemNode.draggable&&this._selectionElement){const e=this.treeOutline.element.getBoundingClientRect().left-this._listItemNode.getBoundingClientRect().left;this._selectionElement.style.setProperty("margin-left",e+"px")}}select(e,t){if(!this.treeOutline||!this.selectable||this.selected)return e||this.listItemElement.focus(),!1;const i=this.treeOutline.selectedTreeElement;return this.treeOutline.selectedTreeElement=null,this.treeOutline._rootElement===this?(i&&i.deselect(),e||this.listItemElement.focus(),!1):(this.selected=!0,this.treeOutline.selectedTreeElement=this,this.treeOutline.updateFocusable(),e&&!this.treeOutline.contentElement.hasFocus()||this.listItemElement.focus(),this._listItemNode.classList.add("selected"),re(this._listItemNode,!0),this.treeOutline.dispatchEventToListeners(_o.ElementSelected,this),i&&i.deselect(),this.onselect(t))}_setFocusable(e){e?(this._listItemNode.setAttribute("tabIndex",this.treeOutline&&this.treeOutline._preventTabOrder?-1:0),this._listItemNode.addEventListener("focus",this._boundOnFocus,!1),this._listItemNode.addEventListener("blur",this._boundOnBlur,!1)):(this._listItemNode.removeAttribute("tabIndex"),this._listItemNode.removeEventListener("focus",this._boundOnFocus,!1),this._listItemNode.removeEventListener("blur",this._boundOnBlur,!1))}_onFocus(){this.treeOutline._useLightSelectionColor||this.treeOutline.contentElement.classList.contains("hide-selection-when-blurred")||this._listItemNode.classList.add("force-white-icons")}_onBlur(){this.treeOutline._useLightSelectionColor||this.treeOutline.contentElement.classList.contains("hide-selection-when-blurred")||this._listItemNode.classList.remove("force-white-icons")}revealAndSelect(e){this.reveal(!0),this.select(e)}deselect(){const e=this._listItemNode.hasFocus();this.selected=!1,this._listItemNode.classList.remove("selected"),ae(this._listItemNode),this._setFocusable(!1),this.treeOutline&&this.treeOutline.selectedTreeElement===this&&(this.treeOutline.selectedTreeElement=null,this.treeOutline.updateFocusable(),e&&this.treeOutline.focus())}async _populateIfNeeded(){this.treeOutline&&this._expandable&&!this._children&&(this._children=[],await this.onpopulate())}async onpopulate(){}onenter(){return!1}ondelete(){return!1}onspace(){return!1}onbind(){}onunbind(){}onattach(){}onexpand(){}oncollapse(){}ondblclick(e){return!1}onselect(e){return!1}traverseNextTreeElement(e,t,i,s){i||this._populateIfNeeded(),s&&(s.depthChange=0);let n=e?this.revealed()?this.firstChild():null:this.firstChild();if(n&&(!e||e&&this.expanded))return s&&(s.depthChange=1),n;if(this===t)return null;if(n=e?this.revealed()?this.nextSibling:null:this.nextSibling,n)return n;for(n=this;n&&!n.root&&!(e?n.revealed()&&n.nextSibling:n.nextSibling)&&n.parent!==t;)s&&(s.depthChange-=1),n=n.parent;return!n||n.root?null:e?n.revealed()?n.nextSibling:null:n.nextSibling}traversePreviousTreeElement(e,t){let i=e?this.revealed()?this.previousSibling:null:this.previousSibling;for(!t&&i&&i._populateIfNeeded();i&&(e?i.revealed()&&i.expanded&&i.lastChild():i.lastChild());)t||i._populateIfNeeded(),i=e?i.revealed()&&i.expanded?i.lastChild():null:i.lastChild();return i||(!this.parent||this.parent.root?null:this.parent)}isEventWithinDisclosureTriangle(e){const t=window.getComputedStyle(this._listItemNode).paddingLeft;console.assert(t.endsWith("px"));const i=parseFloat(t),s=this._listItemNode.totalOffsetLeft()+i;return e.pageX>=s&&e.pageX<=s+po._ArrowToggleWidth&&this._expandable}}po._ArrowToggleWidth=10,function(){const e=new Image;e.src="Images/treeoutlineTriangles.svg",po._imagePreload=e}();var go=Object.freeze({__proto__:null,TreeOutline:mo,Events:_o,TreeOutlineInShadow:class extends mo{constructor(){super(),this.contentElement.classList.add("tree-outline"),this.element=createElement("div"),this._shadowRoot=Ue(this.element,{cssFile:"ui/treeoutline.css",enableLegacyPatching:!0,delegatesFocus:void 0}),this._disclosureElement=this._shadowRoot.createChild("div","tree-outline-disclosure"),this._disclosureElement.appendChild(this.contentElement),this._renderSelection=!0}registerRequiredCSS(e,t){Ne(this._shadowRoot,e,t)}hideOverflow(){this._disclosureElement.classList.add("tree-outline-disclosure-hide-overflow")}makeDense(){this.contentElement.classList.add("tree-outline-dense")}},TreeElement:po});function bo(e,t,i={enableLegacyPatching:!1}){const s=o.cachedResources.get(t)||"";s||console.error(t+" not preloaded. Check module.json");let n=createElement("style");if(n.textContent=s,e.appendChild(n),i.enableLegacyPatching){const i=p.instance().themeStyleSheet(t,s);i&&(n=createElement("style"),n.textContent=i+"\n"+o.Runtime.resolveSourceURL(t+".theme"),e.appendChild(n))}}function fo(e){const t=e.target&&e.target.ownerDocument,i=t?t.deepActiveElement():null;!function(e){for(;e&&!e.__widget;)e=e.parentNodeOrShadowHost();if(!e)return;let t=e.__widget;for(;t._parentWidget;)t._parentWidget._defaultFocusedChild=t,t=t._parentWidget}(i),function(e){e=e&&e.parentNodeOrShadowHost();const t=customElements.get("x-widget");let i=null;for(;e;)e instanceof t&&(i&&(e._defaultFocusedElement=i),i=e),e=e.parentNodeOrShadowHost()}(i)}function vo(e){bo(e,"ui/inspectorCommon.css",{enableLegacyPatching:!0}),bo(e,"ui/textButton.css",{enableLegacyPatching:!0}),p.instance().injectHighlightStyleSheets(e),p.instance().injectCustomStyleSheets(e)}let wo;var Eo=Object.freeze({__proto__:null,appendStyle:bo,createShadowRootWithCoreStyles:function(e,t={delegatesFocus:void 0,cssFile:void 0,enableLegacyPatching:!1}){const{cssFile:i,delegatesFocus:s,enableLegacyPatching:n}=t,o=e.attachShadow({mode:"open",delegatesFocus:s});return vo(o),i&&bo(o,i,{enableLegacyPatching:n}),o.addEventListener("focus",fo.bind(UI),!0),o},focusChanged:fo,injectCoreStyles:vo,measuredScrollbarWidth:function(e){if("number"==typeof wo)return wo;if(!e)return 16;const t=e.createElement("div"),i=e.createElement("div");return t.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),i.setAttribute("style","height: 200px"),t.appendChild(i),e.body.appendChild(t),wo=t.offsetWidth-t.clientWidth,e.body.removeChild(t),wo},registerCustomElement:function(e,t,i){return self.customElements.define(t,class extends i{constructor(){super(),this.setAttribute("is",t)}},{extends:e}),()=>createElement(e,t)}});export{fe as ARIAUtils,T as Action,I as ActionDelegate,M as ActionRegistry,y as Context,v as ContextFlavorListener,Cn as ContextMenu,ln as Dialog,vs as DockController,Tn as DropTarget,In as EmptyWidget,An as FilterBar,Rn as FilterSuggestionBuilder,Fn as ForwardedInputEventHandler,Lt as Fragment,We as Geometry,mt as GlassPane,Wn as HistoryInput,Ce as Icon,Ss as Infobar,Un as InplaceEditor,on as InspectorView,vt as KeyboardShortcut,Oi as ListControl,Di as ListModel,Kn as ListWidget,qn as Panel,Xn as PopoverHelper,$n as ProgressIndicator,Qn as RemoteDebuggingTerminatedScreen,Jn as ReportView,Ts as ResizerWidget,eo as RootView,so as SearchableView,no as SegmentedButton,Li as SettingsUI,gn as ShortcutRegistry,fn as SoftContextMenu,oo as SoftDropDown,Ps as SplitWidget,Bi as SuggestBox,ro as SyntaxHighlighter,Fs as TabbedPane,ao as TargetCrashedScreen,co as TextEditor,Hi as TextPrompt,uo as ThrottledWidget,ms as Toolbar,Zi as Tooltip,go as TreeOutline,Ti as UIUtils,Eo as Utils,Vs as View,Js as ViewManager,nt as Widget,qe as XElement,Pt as XLink,Ye as XWidget,ji as ZoomManager};
